define(["require","jquery"],function(t){"use strict";function i(t,i){this.eventMediator=i.eventMediator,this.$el=t,this.$body=e("body"),this.$indicator=e('<span class="loading-indicator" role="alert"></span>'),this.DELAY=200}var e=t("jquery");return i.prototype={start:function(){this.$indicator.text(this.$el.data("loading-indicator-copy")),this.eventMediator.subscribe("partialRefresh.beforeSend",this.onStart.bind(this)),this.eventMediator.subscribe("partialRefresh.afterReplace",this.onEnd.bind(this)),this.eventMediator.subscribe("modal.loading",this.onStart.bind(this)),this.eventMediator.subscribe("modal.loadingComplete",this.onEnd.bind(this))},onStart:function(){this.timeout=setTimeout(e.proxy(function(){this.$el.append(this.$indicator),this.$body.addClass("loading-indicator-loading")},this),this.DELAY)},onEnd:function(){clearTimeout(this.timeout),this.$indicator.remove(),this.$body.removeClass("loading-indicator-loading")}},i});