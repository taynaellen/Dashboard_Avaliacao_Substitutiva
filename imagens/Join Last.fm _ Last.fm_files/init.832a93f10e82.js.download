!function(){"use strict";require.config({urlArgs:"1685022247",packages:[{name:"highcharts",main:"highcharts"}],paths:{uuid:"lib/uuid/uuid",jquery:"lib/jquery/jquery-2.1.1.min","jquery-pjax":"lib/jquery-pjax/jquery-pjax-1.9.6a","jquery-ui":"lib/jquery-ui/jquery-ui-1.12.1.custom.2",vue:"https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min","vue-dev":"https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue",machina:"lib/machina/machina-0.3.8.min",lodash:"lib/lodash/lodash-2.4.1.min",bootstrap:"lib/bootstrap/bootstrap-3.3.5.min","skiplink-polyfill":"lib/skiplink-polyfill/skiplink-polyfill",highcharts:"https://code.highcharts.com/10.3.1",lottie:"https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.3/lottie.min","jquery-cookie":"lib/jquery-cookie/jquery.cookie",redactor:"lib/redactor/redactor.min","spotify-remote-control-bridge":"player/providers/spotify/spotify-bridge","youtube-iframe-api":"https://www.youtube.com/iframe_api#",yad:"https://s.yimg.com/uq/syndication/yad","ba-debug":"lib/ba-debug/ba-debug-0.4.min",masonry:"lib/masonry/masonry-3.2.2.pkgd.min","cbsi-player":"lib/cbsi-player/cbsi-player-2.4.0.min","cbsi-player-html5":"https://vidtech.cbsinteractive.com/uvpjs/2.9.1/CBSI-PLAYER","searchlinks-library":"https://contextual.media.net/dmedianet.js?cid=8CU1M38OA","jquery-popup-overlay":"lib/jquery-popup-overlay/jquery.popupoverlay.2.1.1-lastfm.2","es6-promise":"lib/es6-promise/es6-promise.3.0.2",modernizr:"lib/modernizr/modernizr-custom","set-immediate":"lib/set-immediate/set-immediate-1.0.4","jquery-onscreen":"lib/jquery-onscreen/jquery.onscreen.min","ua-parser":"lib/ua-parser/ua-parser-0.7.10.min","index-exchange":"https://js-sec.indexww.com/ht/ls-lastfm",ima:"https://imasdk.googleapis.com/js/sdkloader/ima3","jquery-serialize-object":"lib/jquery-serialize-object/jquery-serialize-object-2.5.0.min","restart-animation":"lib/restart-animation/restart-animation",whatInput:"lib/what-input/what-input-3.0.0",store:"lib/store/store.min",canvgModule:"lib/canvg/canvg",stackblur:"lib/canvg/StackBlur",rgbcolor:"lib/canvg/rgbcolor","svg-todataurl":"lib/svg-todataurl/svg_todataurl","svg-js":"lib/svg-js/svg.2.3.6",base64:"lib/svg-todataurl/base64","facebook-sdk":"//connect.facebook.net/en_US/sdk","rasterize-html":"lib/rasterize-html/rasterizeHTML-1.2.4",html2canvas:"https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min","twitter-text":"lib/twitter-text/twitter-text-3.1.0.min",mustache:"lib/mustache/mustache-2.3.0.min","url-search-params":"lib/url-search-params/url-search-params.0.8.0",sticky:"lib/sticky-js/sticky.7abb16d8f06dad048fd4d397b160f8a150e522f4",rgbquant:"lib/rgbquant/rgbquant.1.1.2","moat-header":"https://z.moatads.com/cbsprebidheader506831276743/yield",jss:"lib/jss/jss.0.6",autosize:"lib/autosize/autosize.4.0.2","focus-visible":"lib/focus-visible/focus-visible-4.1.5",dragula:"lib/dragula/dragula.min","dragon-drop":"lib/dragon-drop/dragon-drop.min","dom-autoscroller":"lib/dom-autoscroller/dom-autoscroller.min","intersection-observer":"lib/intersection-observer/intersection-observer.0.7.0","apple-music-kit":"https://js-cdn.music.apple.com/musickit/v1/musickit",optanon:"https://production-cmp.isgprivacy.cbsi.com/dist/optanon-v1.1.0",shepherd:"https://cdn.jsdelivr.net/npm/shepherd.js@8.2.3/dist/js/shepherd",slick:"https://cdn.jsdelivr.net/jquery.slick/1.5.5/slick.min",movinwords:"https://unpkg.com/movinwords@1.1.0/movinwords.min","vue-loader":"vue-loader"},map:{"*":{jquery:"lib-shim/jquery"},"lib-shim/jquery":{jquery:"jquery"},"components/dropdown-position":{"lib/jss/jss.0.6":"jss"}},shim:{"jquery-pjax":["jquery"],bootstrap:["jquery"],"jquery-ui":["jquery"],html2canvas:{exports:"html2canvas"},"jquery-cookie":["jquery"],"jquery-popup-overlay":["jquery"],redactor:["jquery"],"spotify-remote-control-bridge":{exports:"Spotify"},"ba-debug":{exports:"debug"},modernizr:{exports:"Modernizr"},rgbquant:{exports:"RgbQuant"},jss:{exports:"jss"}}})}(),define("require-config",function(){}),!function(){function Zt(t,e,n){n=(n||0)-1;for(var i=t?t.length:0;++n<i;)if(t[n]===e)return n;return-1}function te(t,e){var n=typeof e;return t=t.l,"boolean"==n||null==e?t[e]?0:-1:(t=(t=t[n="number"!=n&&"string"!=n?"object":n])&&t["number"==n?e:ue+e],"object"==n?t&&-1<Zt(t,e)?0:-1:t?0:-1)}function s(t){var e,n=this.l,i=typeof t;"boolean"==i||null==t?n[t]=!0:(e="number"==(i="number"!=i&&"string"!=i?"object":i)?t:ue+t,n=n[i]||(n[i]={}),"object"==i?(n[e]||(n[e]=[])).push(t):n[e]=!0)}function ee(t){return t.charCodeAt(0)}function _e(t,e){for(var n=t.m,i=e.m,o=-1,r=n.length;++o<r;){var s=n[o],a=i[o];if(s!==a){if(a<s||void 0===s)return 1;if(s<a||void 0===a)return-1}}return t.n-e.n}function ne(t){var e=-1,n=t.length,i=t[0],o=t[n/2|0],r=t[n-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&r&&"object"==typeof r)return!1;for((i=oe()).false=i.null=i.true=i.undefined=!1,(o=oe()).k=t,o.l=i,o.push=s;++e<n;)o.push(t[e]);return o}function Pe(t){return"\\"+a[t]}function ie(){return e.pop()||[]}function oe(){return n.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function re(t){t.length=0,e.length<i&&e.push(t)}function se(t){var e=t.l;e&&se(e),t.k=t.l=t.m=t.object=t.number=t.string=t.o=null,n.length<i&&n.push(t)}function ae(t,e,n){var i=-1;n=(n=void 0===n?t?t.length:0:n)-(e=e||0)||0;for(var o=Array(n<0?0:n);++i<n;)o[i]=t[e+i];return o}var le,e=[],n=[],qe=0,ue=+new Date+"",ce=75,i=40,pe=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",$e=/\b__p\+='';/g,Me=/\b(__p\+=)''\+/g,Re=/(__e\(.*?\)|\b__t\))\+'';/g,Ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,De=/\w*$/,Le=/^\s*function[ \n\r\t]+\w/,de=/<%=([\s\S]+?)%>/g,Ie=RegExp("^["+pe+"]*0+(?=.$)"),he=/($^)/,fe=/\bthis\b/,Oe=/['\n\r\t\u2028\u2029\\]/g,He="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),ye="[object Arguments]",me="[object Array]",ve="[object Boolean]",ge="[object Date]",be="[object Function]",we="[object Number]",xe="[object Object]",ke="[object RegExp]",Ce="[object String]",Ae={},Te=(Ae[be]=!1,{leading:!(Ae[ye]=Ae[me]=Ae[ve]=Ae[ge]=Ae[we]=Ae[xe]=Ae[ke]=Ae[Ce]=!0),maxWait:0,trailing:!1}),ze={configurable:!1,enumerable:!1,value:null,writable:!1},Ee={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},a={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Se=Ee[typeof window]&&window||this,t=Ee[typeof exports]&&exports&&!exports.nodeType&&exports,o=Ee[typeof module]&&module&&!module.nodeType&&module,l=o&&o.exports===t&&t,r=Ee[typeof global]&&global,je=(!r||r.global!==r&&r.window!==r||(Se=r),function D(n){function d(t,e,n){if(t&&Ee[typeof t]){e=e&&void 0===n?e:y(e,n,3);for(var i=-1,o=Ee[typeof t]&&R(t),r=o?o.length:0;++i<r&&!1!==e(t[n=o[i]],n,t););}return t}function h(t,e,n){if(t&&Ee[typeof t])for(var i in e=e&&void 0===n?e:y(e,n,3),t)if(!1===e(t[i],i,t))break;return t}function L(t,e,n){var i,o,r=t;if(t)for(var s=arguments,a=0,l="number"==typeof n?2:s.length;++a<l;)if((o=s[a])&&Ee[typeof o])for(var u=-1,c=Ee[typeof o]&&R(o),p=c?c.length:0;++u<p;)void 0===r[i=c[u]]&&(r[i]=o[i]);return r}function I(t,e,n){var i,o,r=t;if(t){var s,a=arguments,l=0,u="number"==typeof n?2:a.length;for(3<u&&"function"==typeof a[u-2]?s=y(a[--u-1],a[u--],2):2<u&&"function"==typeof a[u-1]&&(s=a[--u]);++l<u;)if((o=a[l])&&Ee[typeof o])for(var c=-1,p=Ee[typeof o]&&R(o),d=p?p.length:0;++c<d;)r[i=p[c]]=s?s(r[i],o[i]):o[i]}return r}function c(t){return t&&"object"==typeof t&&!M(t)&&j.call(t,"__wrapped__")?t:new l(t)}function l(t,e){this.__chain__=!!e,this.__wrapped__=t}function O(t,n,i,o,r){if(i){var s=i(t);if(void 0!==s)return s}if(!w(t))return t;var e=S.call(t);if(!Ae[e])return t;var a=$[e];switch(e){case ve:case ge:return new a(+t);case we:case Ce:return new a(t);case ke:return(s=a(t.source,De.exec(t))).lastIndex=t.lastIndex,s}if(e=M(t),n){var l=!o;o=o||ie(),r=r||ie();for(var u=o.length;u--;)if(o[u]==t)return r[u];s=e?a(t.length):{}}else s=e?ae(t):I({},t);return e&&(j.call(t,"index")&&(s.index=t.index),j.call(t,"input"))&&(s.input=t.input),n&&(o.push(t),r.push(s),(e?x:d)(t,function(t,e){s[e]=O(t,n,i,o,r)}),l)&&(re(o),re(r)),s}function f(t){return w(t)?Dt(t):{}}function y(o,r,t){if("function"!=typeof o)return gt;if(void 0===r||!("prototype"in o))return o;var e,n=o.__bindData__;if(void 0!==n||(n=(n=Bt.funcNames?!o.name:n)||!Bt.funcDecomp)||(e=$t.call(o),n=Bt.funcNames?n:!Le.test(e))||(n=fe.test(e),Vt(o,n)),!1===n||!0!==n&&1&n[1])return o;switch(t){case 1:return function(t){return o.call(r,t)};case 2:return function(t,e){return o.call(r,t,e)};case 3:return function(t,e,n){return o.call(r,t,e,n)};case 4:return function(t,e,n,i){return o.call(r,t,e,n,i)}}return mt(o,r)}function H(t){function n(){var t,e=u?a:this;return r&&(t=ae(r),_.apply(t,arguments)),(s||p)&&(t=t||ae(arguments),s&&_.apply(t,s),p)&&t.length<l?(o|=16,H([i,d?o:-4&o,t,null,a,l])):(t=t||arguments,c&&(i=e[h]),this instanceof n?(e=f(i.prototype),w(t=i.apply(e,t))?t:e):i.apply(e,t))}var i=t[0],o=t[1],r=t[2],s=t[3],a=t[4],l=t[5],u=1&o,c=2&o,p=4&o,d=8&o,h=i;return Vt(n,t),n}function u(t,e){var n,i=-1,o=W(),r=t?t.length:0,s=ce<=r&&o===Zt,a=[];for(s&&((n=ne(e))?(o=te,e=n):s=!1);++i<r;)o(e,n=t[i])<0&&a.push(n);return s&&se(e),a}function p(t,e,n,i){i=(i||0)-1;for(var o=t?t.length:0,r=[];++i<o;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(M(s)||Q(s))){var a=-1,l=(s=e?s:p(s,e,n)).length,u=r.length;for(r.length+=l;++a<l;)r[u++]=s[a]}else n||r.push(s)}return r}function m(i,t,o,r,s,a){if(o&&void 0!==(p=o(i,t)))return!!p;if(i===t)return 0!==i||1/i==1/t;if(i==i&&!(i&&Ee[typeof i]||t&&Ee[typeof t]))return!1;if(null==i||null==t)return i===t;var e=S.call(i),n=S.call(t);if((e=e==ye?xe:e)!=(n=n==ye?xe:n))return!1;switch(e){case ve:case ge:return+i==+t;case we:return i!=+i?t!=+t:0==i?1/i==1/t:i==+t;case ke:case Ce:return i==T(t)}if(!(n=e==me)){var l=j.call(i,"__wrapped__"),u=j.call(t,"__wrapped__");if(l||u)return m(l?i.__wrapped__:i,u?t.__wrapped__:t,o,r,s,a);if(e!=xe)return!1;if((e=i.constructor)!=(l=t.constructor)&&!(b(e)&&e instanceof e&&b(l)&&l instanceof l)&&"constructor"in i&&"constructor"in t)return!1}for(e=!s,s=s||ie(),a=a||ie(),l=s.length;l--;)if(s[l]==i)return a[l]==t;var c=0,p=!0;if(s.push(i),a.push(t),n){if(l=i.length,c=t.length,(p=c==l)||r)for(;c--;)if(n=l,u=t[c],r)for(;n--&&!(p=m(i[n],u,o,r,s,a)););else if(!(p=m(i[c],u,o,r,s,a)))break}else h(t,function(t,e,n){return j.call(n,e)?(c++,p=j.call(i,e)&&m(i[e],t,o,r,s,a)):void 0}),p&&!r&&h(i,function(t,e,n){return j.call(n,e)?p=-1<--c:void 0});return s.pop(),a.pop(),e&&(re(s),re(a)),p}function z(t,e){return t+qt(Ft()*(e-t+1))}function F(t,e,n){var i=-1,o=W(),r=t?t.length:0,s=[],a=!e&&ce<=r&&o===Zt,l=n||a?ie():s;for(a&&(l=ne(l),o=te);++i<r;){var u=t[i],c=n?n(u,i,t):u;(e?!i||l[l.length-1]!==c:o(l,c)<0)&&((n||a)&&l.push(c),s.push(u))}return a?(re(l.k),se(l)):n&&re(l),s}function B(s){return function(t,i,e){var o={},n=(i=c.createCallback(i,e,3),e=-1,t?t.length:0);if("number"==typeof n)for(;++e<n;){var r=t[e];s(o,r,i(r,e,t),t)}else d(t,function(t,e,n){s(o,t,i(t,e,n),n)});return o}}function v(t,e,n,i,o,r){var s=1&e,a=4&e,l=16&e,u=32&e;if(!(2&e||b(t)))throw new E;l&&!n.length&&(e&=-17,l=n=!1),u&&!i.length&&(e&=-33,u=i=!1);var c=t&&t.__bindData__;return c&&!0!==c?((c=ae(c))[2]&&(c[2]=ae(c[2])),c[3]&&(c[3]=ae(c[3])),!s||1&c[1]||(c[4]=o),!s&&1&c[1]&&(e|=8),!a||4&c[1]||(c[5]=r),l&&_.apply(c[2]||(c[2]=[]),n),u&&Rt.apply(c[3]||(c[3]=[]),i),c[1]|=e,v.apply(null,c)):(1==e||17===e?function(t){function n(){var t,e;return o&&(e=ae(o),_.apply(e,arguments)),this instanceof n?(t=f(i.prototype),w(e=i.apply(t,e||arguments))?e:t):i.apply(r,e||arguments)}var i=t[0],o=t[2],r=t[4];return Vt(n,t),n}:H)([t,e,n,i,o,r])}function U(t){return Gt[t]}function W(){var t;return(t=c.indexOf)===ct?Zt:t}function i(t){return"function"==typeof t&&jt.test(t)}function V(t){var e,n;return!(!t||S.call(t)!=xe||b(e=t.constructor)&&!(e instanceof e))&&(h(t,function(t,e){n=e}),void 0===n||j.call(t,n))}function G(t){return Qt[t]}function Q(t){return t&&"object"==typeof t&&"number"==typeof t.length&&S.call(t)==ye||!1}function Y(t,e,n){var i=R(t),o=i.length;for(e=y(e,n,3);o--&&!1!==e(t[n=i[o]],n,t););return t}function g(t){var n=[];return h(t,function(t,e){b(t)&&n.push(e)}),n.sort()}function X(t){for(var e=-1,n=R(t),i=n.length,o={};++e<i;){var r=n[e];o[t[r]]=r}return o}function b(t){return"function"==typeof t}function w(t){return!(!t||!Ee[typeof t])}function J(t){return"number"==typeof t||t&&"object"==typeof t&&S.call(t)==we||!1}function a(t){return"string"==typeof t||t&&"object"==typeof t&&S.call(t)==Ce||!1}function K(t){for(var e=-1,n=R(t),i=n.length,o=C(i);++e<i;)o[e]=t[n[e]];return o}function Z(t,e,n){var i=-1,o=W(),r=t?t.length:0,s=!1;return n=(n<0?q(0,r+n):n)||0,M(t)?s=-1<o(t,e,n):"number"==typeof r?s=-1<(a(t)?t.indexOf(e,n):o(t,e,n)):d(t,function(t){return++i<n?void 0:!(s=t===e)}),s}function tt(t,i,e){var o=!0,n=(i=c.createCallback(i,e,3),e=-1,t?t.length:0);if("number"==typeof n)for(;++e<n&&(o=!!i(t[e],e,t)););else d(t,function(t,e,n){return o=!!i(t,e,n)});return o}function et(t,i,e){var o=[],n=(i=c.createCallback(i,e,3),e=-1,t?t.length:0);if("number"==typeof n)for(;++e<n;){var r=t[e];i(r,e,t)&&o.push(r)}else d(t,function(t,e,n){i(t,e,n)&&o.push(t)});return o}function nt(t,i,e){i=c.createCallback(i,e,3),e=-1;var o,n=t?t.length:0;if("number"!=typeof n)return d(t,function(t,e,n){return i(t,e,n)?(o=t,!1):void 0}),o;for(;++e<n;){var r=t[e];if(i(r,e,t))return r}}function x(t,e,n){var i=-1,o=t?t.length:0;if(e=e&&void 0===n?e:y(e,n,3),"number"==typeof o)for(;++i<o&&!1!==e(t[i],i,t););else d(t,e);return t}function it(t,i,e){var o=t?t.length:0;if(i=i&&void 0===e?i:y(i,e,3),"number"==typeof o)for(;o--&&!1!==i(t[o],o,t););else{var r=R(t),o=r.length;d(t,function(t,e,n){return e=r?r[--o]:--o,i(n[e],e,n)})}return t}function k(t,i,e){var o=-1,n=t?t.length:0;if(i=c.createCallback(i,e,3),"number"==typeof n)for(var r=C(n);++o<n;)r[o]=i(t[o],o,t);else r=[],d(t,function(t,e,n){r[++o]=i(t,e,n)});return r}function ot(t,i,e){var o=-1/0,r=o;if(null==(i="function"!=typeof i&&e&&e[i]===t?null:i)&&M(t)){e=-1;for(var n=t.length;++e<n;){var s=t[e];r<s&&(r=s)}}else i=null==i&&a(t)?ee:c.createCallback(i,e,3),x(t,function(t,e,n){e=i(t,e,n),o<e&&(o=e,r=t)});return r}function rt(t,i,o,e){if(t){var r=arguments.length<3,n=(i=c.createCallback(i,e,4),-1),s=t.length;if("number"==typeof s)for(r&&(o=t[++n]);++n<s;)o=i(o,t[n],n,t);else d(t,function(t,e,n){o=r?(r=!1,t):i(o,t,e,n)})}return o}function st(t,i,o,e){var r=arguments.length<3;return i=c.createCallback(i,e,4),it(t,function(t,e,n){o=r?(r=!1,t):i(o,t,e,n)}),o}function at(t){var n=-1,e=t?t.length:0,i=C("number"==typeof e?e:0);return x(t,function(t){var e=z(0,++n);i[n]=i[e],i[e]=t}),i}function lt(t,i,e){i=c.createCallback(i,e,3),e=-1;var o,n=t?t.length:0;if("number"==typeof n)for(;++e<n&&!(o=i(t[e],e,t)););else d(t,function(t,e,n){return!(o=i(t,e,n))});return!!o}function ut(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=-1;for(e=c.createCallback(e,n,3);++r<o&&e(t[r],r,t);)i++}else if(null==(i=e)||n)return t?t[0]:le;return ae(t,0,Ht(q(0,i),o))}function ct(t,e,n){if("number"==typeof n){var i=t?t.length:0;n=n<0?q(0,i+n):n||0}else if(n)return t[n=dt(t,e)]===e?n:-1;return Zt(t,e,n)}function pt(t,e,n){if("number"!=typeof e&&null!=e){var i=0,o=-1,r=t?t.length:0;for(e=c.createCallback(e,n,3);++o<r&&e(t[o],o,t);)i++}else i=null==e||n?1:q(0,e);return ae(t,i)}function dt(t,e,n,i){var o=0,r=t?t.length:o;for(e=(n=n?c.createCallback(n,i,1):gt)(e);o<r;)n(t[i=o+r>>>1])<e?o=i+1:r=i;return o}function ht(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),F(t,e,n=null!=n?c.createCallback(n,i,3):n)}function ft(){for(var t=1<arguments.length?arguments:arguments[0],e=-1,n=t?ot(Kt(t,"length")):0,i=C(n<0?0:n);++e<n;)i[e]=Kt(t,e);return i}function yt(t,e){var n=-1,i=t?t.length:0,o={};for(e||!i||M(t[0])||(e=[]);++n<i;){var r=t[n];e?o[r]=e[n]:r&&(o[r[0]]=r[1])}return o}function mt(t,e){return 2<arguments.length?v(t,17,ae(arguments,2),null,e):v(t,1,null,null,e)}function vt(i,o,t){function r(){d&&Pt(d),l=d=h=le,!v&&m===o||(y=N(),u=i.apply(p,a),d)||l||(a=p=null)}function s(){var t=o-(N()-c);0<t?d=P(s,t):(l&&Pt(l),t=h,l=d=h=le,t&&(y=N(),u=i.apply(p,a),d||l||(a=p=null)))}var a,l,u,c,p,d,h,f,y=0,m=!1,v=!0;if(b(i))return o=q(0,o)||0,!0===t?v=!(f=!0):w(t)&&(f=t.leading,m="maxWait"in t&&(q(o,t.maxWait)||0),v="trailing"in t?t.trailing:v),function(){var t,e,n;return a=arguments,c=N(),p=this,h=v&&(d||!f),!1===m?t=f&&!d:(n=(e=m-(c-(y=l||f?y:c)))<=0)?(l=l&&Pt(l),y=c,u=i.apply(p,a)):l=l||P(r,e),n&&d?d=Pt(d):d||o===m||(d=P(s,o)),t&&(n=!0,u=i.apply(p,a)),!n||d||l||(a=p=null),u};throw new E}function gt(t){return t}function bt(o,e,t){var r=!0,n=e&&g(e),s=(e&&(t||n.length)||(null==t&&(t=e),s=l,e=o,o=c,n=g(e)),!1===t?r=!1:w(t)&&"chain"in t&&(r=t.chain),o),a=b(s);x(n,function(t){var i=o[t]=e[t];a&&(s.prototype[t]=function(){var t=this.__chain__,e=this.__wrapped__,n=[e];if(_.apply(n,arguments),n=i.apply(o,n),r||t){if(e===n&&w(n))return this;(n=new s(n)).__chain__=t}return n})})}function wt(){}function xt(e){return function(t){return t[e]}}function kt(){return this.__wrapped__}var C=(n=n?je.defaults(Se.Object(),n,je.pick(Se,He)):Se).Array,Ct=n.Boolean,At=n.Date,Tt=n.Function,t=n.Math,Et=n.Number,o=n.Object,A=n.RegExp,T=n.String,E=n.TypeError,r=[],e=o.prototype,St=n._,S=e.toString,jt=A("^"+T(S).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),_t=t.ceil,Pt=n.clearTimeout,qt=t.floor,$t=Tt.prototype.toString,s=i(s=o.getPrototypeOf)&&s,j=e.hasOwnProperty,_=r.push,P=n.setTimeout,Mt=r.splice,Rt=r.unshift,Nt=function(){try{var t={},e=i(e=o.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),Dt=i(Dt=o.create)&&Dt,e=i(e=C.isArray)&&e,Lt=n.isFinite,It=n.isNaN,Ot=i(Ot=o.keys)&&Ot,q=t.max,Ht=t.min,zt=n.parseInt,Ft=t.random,$={},Bt=($[me]=C,$[ve]=Ct,$[ge]=At,$[be]=Tt,$[xe]=o,$[we]=Et,$[ke]=A,$[Ce]=T,l.prototype=c.prototype,c.support={});function Ut(){}Bt.funcDecomp=!i(n.a)&&fe.test(D),Bt.funcNames="string"==typeof Tt.name,c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:de,variable:"",imports:{_:c}},Dt||(f=function(t){var e;return w(t)&&(Ut.prototype=t,e=new Ut,Ut.prototype=null),e||n.Object()});var Wt,Vt=Nt?function(t,e){ze.value=e,Nt(t,"__bindData__",ze)}:wt,M=e||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&S.call(t)==me||!1},R=Ot?function(t){return w(t)?Ot(t):[]}:function(t){var e,n=[];if(t&&Ee[typeof t])for(e in t)j.call(t,e)&&n.push(e);return n},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qt=X(Gt),Yt=A("("+R(Qt).join("|")+")","g"),Xt=A("["+R(Gt).join("")+"]","g"),Jt=s?function(t){var e,n;return!(!t||S.call(t)!=xe)&&((n=i(e=t.valueOf)&&(n=s(e))&&s(n))?t==n||s(t)==n:V(t))}:V,t=B(function(t,e,n){j.call(t,n)?t[n]++:t[n]=1}),Ct=B(function(t,e,n){(j.call(t,n)?t[n]:t[n]=[]).push(e)}),Et=B(function(t,e,n){t[n]=e}),Kt=k,N=i(N=At.now)&&N||function(){return(new At).getTime()},e=8==zt(pe+"08")?zt:function(t,e){return zt(a(t)?t.replace(Ie,""):t,e||0)};return c.after=function(t,e){if(b(e))return function(){return--t<1?e.apply(this,arguments):void 0};throw new E},c.assign=I,c.at=function(t){for(var e=-1,n=p(i=arguments,!0,!1,1),i=i[2]&&i[2][i[1]]===t?1:n.length,o=C(i);++e<i;)o[e]=t[n[e]];return o},c.bind=mt,c.bindAll=function(t){for(var e=1<arguments.length?p(arguments,!0,!1,1):g(t),n=-1,i=e.length;++n<i;){var o=e[n];t[o]=v(t[o],1,null,null,t)}return t},c.bindKey=function(t,e){return 2<arguments.length?v(e,19,ae(arguments,2),null,t):v(e,3,null,null,t)},c.chain=function(t){return(t=new l(t)).__chain__=!0,t},c.compact=function(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var o=t[e];o&&i.push(o)}return i},c.compose=function(){for(var n=arguments,t=n.length;t--;)if(!b(n[t]))throw new E;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},c.constant=function(t){return function(){return t}},c.countBy=t,c.create=function(t,e){return t=f(t),e?I(t,e):t},c.createCallback=function(i,t,e){var o,n,r,s=typeof i;return null==i||"function"==s?y(i,t,e):"object"!=s?xt(i):(o=R(i),n=o[0],r=i[n],1!=o.length||r!=r||w(r)?function(t){for(var e=o.length,n=!1;e--&&(n=m(t[o[e]],i[o[e]],null,!0)););return n}:function(t){return t=t[n],r===t&&(0!==r||1/r==1/t)})},c.curry=function(t,e){return v(t,4,null,null,null,e="number"==typeof e?e:+e||t.length)},c.debounce=vt,c.defaults=L,c.defer=function(t){var e;if(b(t))return e=ae(arguments,1),P(function(){t.apply(le,e)},1);throw new E},c.delay=function(t,e){var n;if(b(t))return n=ae(arguments,2),P(function(){t.apply(le,n)},e);throw new E},c.difference=function(t){return u(t,p(arguments,!0,!0,1))},c.filter=et,c.flatten=function(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),p(t=null!=n?k(t,n,i):t,e)},c.forEach=x,c.forEachRight=it,c.forIn=h,c.forInRight=function(t,e,n){var i=[],o=(h(t,function(t,e){i.push(e,t)}),i.length);for(e=y(e,n,3);o--&&!1!==e(i[o--],i[o],t););return t},c.forOwn=d,c.forOwnRight=Y,c.functions=g,c.groupBy=Ct,c.indexBy=Et,c.initial=function(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=c.createCallback(e,n,3);r--&&e(t[r],r,t);)i++}else i=null==e||n?1:e||i;return ae(t,0,Ht(q(0,o-i),o))},c.intersection=function(){for(var t=[],e=-1,n=arguments.length,i=ie(),o=W(),r=o===Zt,s=ie();++e<n;)(M(p=arguments[e])||Q(p))&&(t.push(p),i.push(r&&p.length>=ce&&ne(e?t[e]:s)));var a=-1,l=(r=t[0])?r.length:0,u=[];t:for(;++a<l;){var c=i[0],p=r[a];if((c?te(c,p):o(s,p))<0){for(e=n,(c||s).push(p);--e;)if(((c=i[e])?te(c,p):o(t[e],p))<0)continue t;u.push(p)}}for(;n--;)(c=i[n])&&se(c);return re(i),re(s),u},c.invert=X,c.invoke=function(t,e){var n=ae(arguments,2),i=-1,o="function"==typeof e,r=t?t.length:0,s=C("number"==typeof r?r:0);return x(t,function(t){s[++i]=(o?e:t[e]).apply(t,n)}),s},c.keys=R,c.map=k,c.mapValues=function(t,i,e){var o={};return i=c.createCallback(i,e,3),d(t,function(t,e,n){o[e]=i(t,e,n)}),o},c.max=ot,c.memoize=function(n,i){function o(){var t=o.cache,e=i?i.apply(this,arguments):ue+arguments[0];return j.call(t,e)?t[e]:t[e]=n.apply(this,arguments)}if(b(n))return o.cache={},o;throw new E},c.merge=function(t){var e,n=arguments,i=2;if(w(t)){3<(i="number"!=typeof n[2]?n.length:i)&&"function"==typeof n[i-2]?e=y(n[--i-1],n[i--],2):2<i&&"function"==typeof n[i-1]&&(e=n[--i]);for(var n=ae(arguments,1,i),o=-1,r=ie(),s=ie();++o<i;)!function a(l,t,u,c,p){(M(t)?x:d)(t,function(t,e){var n,i,o,r=t,s=l[e];if(t&&((i=M(t))||Jt(t))){for(r=c.length;r--;)if(n=c[r]==t){s=p[r];break}n||(u&&(o=void 0!==(r=u(s,t)))&&(s=r),o||(s=i?M(s)?s:[]:Jt(s)?s:{}),c.push(t),p.push(s),o)||a(s,t,u,c,p)}else void 0!==(r=u&&void 0===(r=u(s,t))?t:r)&&(s=r);l[e]=s})}(t,n[o],e,r,s);re(r),re(s)}return t},c.min=function(t,i,e){var o=1/0,r=o;if(null==(i="function"!=typeof i&&e&&e[i]===t?null:i)&&M(t)){e=-1;for(var n=t.length;++e<n;){var s=t[e];s<r&&(r=s)}}else i=null==i&&a(t)?ee:c.createCallback(i,e,3),x(t,function(t,e,n){(e=i(t,e,n))<o&&(o=e,r=t)});return r},c.omit=function(t,i,e){var o={};if("function"!=typeof i){var n=[];h(t,function(t,e){n.push(e)});for(var r=-1,s=(n=u(n,p(arguments,!0,!1,1))).length;++r<s;){var a=n[r];o[a]=t[a]}}else i=c.createCallback(i,e,3),h(t,function(t,e,n){i(t,e,n)||(o[e]=t)});return o},c.once=function(t){var e,n;if(b(t))return function(){return e||(e=!0,n=t.apply(this,arguments),t=null),n};throw new E},c.pairs=function(t){for(var e=-1,n=R(t),i=n.length,o=C(i);++e<i;){var r=n[e];o[e]=[r,t[r]]}return o},c.partial=function(t){return v(t,16,ae(arguments,1))},c.partialRight=function(t){return v(t,32,null,ae(arguments,1))},c.pick=function(t,i,e){var o={};if("function"!=typeof i)for(var n=-1,r=p(arguments,!0,!1,1),s=w(t)?r.length:0;++n<s;){var a=r[n];a in t&&(o[a]=t[a])}else i=c.createCallback(i,e,3),h(t,function(t,e,n){i(t,e,n)&&(o[e]=t)});return o},c.pluck=Kt,c.property=xt,c.pull=function(t){for(var e=arguments,n=0,i=e.length,o=t?t.length:0;++n<i;)for(var r=-1,s=e[n];++r<o;)t[r]===s&&(Mt.call(t,r--,1),o--);return t},c.range=function(t,e,n){t=+t||0,null==e&&(e=t,t=0);var i=-1;e=q(0,_t((e-t)/((n="number"==typeof n?n:+n||1)||1)));for(var o=C(e);++i<e;)o[i]=t,t+=n;return o},c.reject=function(t,i,e){return i=c.createCallback(i,e,3),et(t,function(t,e,n){return!i(t,e,n)})},c.remove=function(t,e,n){var i=-1,o=t?t.length:0,r=[];for(e=c.createCallback(e,n,3);++i<o;)e(n=t[i],i,t)&&(r.push(n),Mt.call(t,i--,1),o--);return r},c.rest=pt,c.shuffle=at,c.sortBy=function(t,o,e){var r=-1,s=M(o),n=t?t.length:0,a=C("number"==typeof n?n:0);for(s||(o=c.createCallback(o,e,3)),x(t,function(e,t,n){var i=a[++r]=oe();s?i.m=k(o,function(t){return e[t]}):(i.m=ie())[0]=o(e,t,n),i.n=r,i.o=e}),n=a.length,a.sort(_e);n--;)t=a[n],a[n]=t.o,s||re(t.m),se(t);return a},c.tap=function(t,e){return e(t),t},c.throttle=function(t,e,n){var i=!0,o=!0;if(b(t))return!1===n?i=!1:w(n)&&(i="leading"in n?n.leading:i,o="trailing"in n?n.trailing:o),Te.leading=i,Te.maxWait=e,Te.trailing=o,vt(t,e,Te);throw new E},c.times=function(t,e,n){t=-1<(t=+t)?t:0;var i=-1,o=C(t);for(e=y(e,n,1);++i<t;)o[i]=e(i);return o},c.toArray=function(t){return(t&&"number"==typeof t.length?ae:K)(t)},c.transform=function(t,i,o,e){var n,r=M(t);return null==o&&(o=r?[]:f((n=t&&t.constructor)&&n.prototype)),i&&(i=c.createCallback(i,e,4),(r?x:d)(t,function(t,e,n){return i(o,t,e,n)})),o},c.union=function(){return F(p(arguments,!0,!0))},c.uniq=ht,c.values=K,c.where=et,c.without=function(t){return u(t,ae(arguments,1))},c.wrap=function(t,e){return v(e,16,[t])},c.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n,i=arguments[t];(M(i)||Q(i))&&(n=n?F(u(n,i).concat(u(i,n))):i)}return n||[]},c.zip=ft,c.zipObject=yt,c.collect=k,c.drop=pt,c.each=x,c.eachRight=it,c.extend=I,c.methods=g,c.object=yt,c.select=et,c.tail=pt,c.unique=ht,c.unzip=ft,bt(c),c.clone=function(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=e,e=!1),O(t,e,"function"==typeof n&&y(n,i,1))},c.cloneDeep=function(t,e,n){return O(t,!0,"function"==typeof e&&y(e,n,1))},c.contains=Z,c.escape=function(t){return null==t?"":T(t).replace(Xt,U)},c.every=tt,c.find=nt,c.findIndex=function(t,e,n){var i=-1,o=t?t.length:0;for(e=c.createCallback(e,n,3);++i<o;)if(e(t[i],i,t))return i;return-1},c.findKey=function(t,i,e){var o;return i=c.createCallback(i,e,3),d(t,function(t,e,n){return i(t,e,n)?(o=e,!1):void 0}),o},c.findLast=function(t,i,e){var o;return i=c.createCallback(i,e,3),it(t,function(t,e,n){return i(t,e,n)?(o=t,!1):void 0}),o},c.findLastIndex=function(t,e,n){var i=t?t.length:0;for(e=c.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1},c.findLastKey=function(t,i,e){var o;return i=c.createCallback(i,e,3),Y(t,function(t,e,n){return i(t,e,n)?(o=e,!1):void 0}),o},c.has=function(t,e){return!!t&&j.call(t,e)},c.identity=gt,c.indexOf=ct,c.isArguments=Q,c.isArray=M,c.isBoolean=function(t){return!0===t||!1===t||t&&"object"==typeof t&&S.call(t)==ve||!1},c.isDate=function(t){return t&&"object"==typeof t&&S.call(t)==ge||!1},c.isElement=function(t){return t&&1===t.nodeType||!1},c.isEmpty=function(t){var e,n,i=!0;return t?(e=S.call(t),n=t.length,e==me||e==Ce||e==ye||e==xe&&"number"==typeof n&&b(t.splice)?!n:(d(t,function(){return i=!1}),i)):i},c.isEqual=function(t,e,n,i){return m(t,e,"function"==typeof n&&y(n,i,2))},c.isFinite=function(t){return Lt(t)&&!It(parseFloat(t))},c.isFunction=b,c.isNaN=function(t){return J(t)&&t!=+t},c.isNull=function(t){return null===t},c.isNumber=J,c.isObject=w,c.isPlainObject=Jt,c.isRegExp=function(t){return t&&"object"==typeof t&&S.call(t)==ke||!1},c.isString=a,c.isUndefined=function(t){return void 0===t},c.lastIndexOf=function(t,e,n){var i=t?t.length:0;for("number"==typeof n&&(i=(n<0?q(0,i+n):Ht(n,i-1))+1);i--;)if(t[i]===e)return i;return-1},c.mixin=bt,c.noConflict=function(){return n._=St,this},c.noop=wt,c.now=N,c.parseInt=e,c.random=function(t,e,n){var i=null==t,o=null==e;return null==n&&("boolean"==typeof t&&o?(n=t,t=1):o||"boolean"!=typeof e||(n=e,o=!0)),i&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1?(n=Ft(),Ht(t+n*(e-t+parseFloat("1e-"+((n+"").length-1))),e)):z(t,e)},c.reduce=rt,c.reduceRight=st,c.result=function(t,e){var n;if(t)return b(n=t[e])?t[e]():n},c.runInContext=D,c.size=function(t){var e=t?t.length:0;return"number"==typeof e?e:R(t).length},c.some=lt,c.sortedIndex=dt,c.template=function(s,t,e){var n=c.templateSettings;s=T(s||""),e=L({},e,n);var a,i=L({},e.imports,n.imports),n=R(i),i=K(i),l=0,o=e.interpolate||he,u="__p+='",o=A((e.escape||he).source+"|"+o.source+"|"+(o===de?Ne:he).source+"|"+(e.evaluate||he).source+"|$","g");s.replace(o,function(t,e,n,i,o,r){return n=n||i,u+=s.slice(l,r).replace(Oe,Pe),e&&(u+="'+__e("+e+")+'"),o&&(a=!0,u+="';"+o+";\n__p+='"),n&&(u+="'+((__t=("+n+"))==null?'':__t)+'"),l=r+t.length,t}),u+="';",(o=e=e.variable)||(u="with("+(e="obj")+"){"+u+"}"),u=(a?u.replace($e,""):u).replace(Me,"$1").replace(Re,"$1;"),u="function("+e+"){"+(o?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+u+"return __p}";try{var r=Tt(n,"return "+u).apply(le,i)}catch(t){throw t.source=u,t}return t?r(t):(r.source=u,r)},c.unescape=function(t){return null==t?"":T(t).replace(Yt,G)},c.uniqueId=function(t){var e=++qe;return T(null==t?"":t)+e},c.all=tt,c.any=lt,c.detect=nt,c.findWhere=nt,c.foldl=rt,c.foldr=st,c.include=Z,c.inject=rt,bt((Wt={},d(c,function(t,e){c.prototype[e]||(Wt[e]=t)}),Wt),!1),c.first=ut,c.last=function(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=c.createCallback(e,n,3);r--&&e(t[r],r,t);)i++}else if(null==(i=e)||n)return t?t[o-1]:le;return ae(t,q(0,o-i))},c.sample=function(t,e,n){return t&&"number"!=typeof t.length&&(t=K(t)),null==e||n?t?t[z(0,t.length-1)]:le:((t=at(t)).length=Ht(q(0,e),t.length),t)},c.take=ut,c.head=ut,d(c,function(o,t){var r="sample"!==t;c.prototype[t]||(c.prototype[t]=function(t,e){var n=this.__chain__,i=o(this.__wrapped__,t,e);return n||null!=t&&(!e||r&&"function"==typeof t)?new l(i,n):i})}),c.VERSION="2.4.1",c.prototype.chain=function(){return this.__chain__=!0,this},c.prototype.toString=function(){return T(this.__wrapped__)},c.prototype.value=kt,c.prototype.valueOf=kt,x(["join","pop","shift"],function(t){var n=r[t];c.prototype[t]=function(){var t=this.__chain__,e=n.apply(this.__wrapped__,arguments);return t?new l(e,t):e}}),x(["push","reverse","sort","unshift"],function(t){var e=r[t];c.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),x(["concat","slice","splice"],function(t){var e=r[t];c.prototype[t]=function(){return new l(e.apply(this.__wrapped__,arguments),this.__chain__)}}),c}());"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Se._=je,define("lodash",[],function(){return je})):t&&o?l?(o.exports=je)._=je:t._=je:Se._=je}.call(this),!function(){"use strict";function u(t){return"function"==typeof t}var e,n,t=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=t,i=0,a=function(t,e){f[i]=t,f[i+1]=e,2===(i+=2)&&(n?n(y):g())};var t="undefined"!=typeof window?window:void 0,o=t||{},o=o.MutationObserver||o.WebKitMutationObserver,r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){return function(){setTimeout(y,1)}}var p,d,h,f=new Array(1e3);function y(){for(var t=0;t<i;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;i=0}function m(){try{var t=require("vertx");return e=t.runOnLoop||t.runOnContext,function(){e(y)}}catch(t){return c()}}function v(){}var g=r?function(){process.nextTick(y)}:o?(d=0,r=new o(y),h=document.createTextNode(""),r.observe(h,{characterData:!0}),function(){h.data=d=++d%2}):l?((p=new MessageChannel).port1.onmessage=y,function(){p.port2.postMessage(0)}):(void 0===t&&"function"==typeof require?m:c)(),b=void 0,w=1,x=2,k=new _;function C(t,i,o){a(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(o,i,function(t){n||(n=!0,(i!==t?A:T)(e,t))},function(t){n||(n=!0,E(e,t))},e._label);!n&&t&&(n=!0,E(e,t))},t)}function D(t,e){var n,i;e.constructor===t.constructor?(n=t,(i=e)._state===w?T(n,i._result):i._state===x?E(n,i._result):S(i,void 0,function(t){A(n,t)},function(t){E(n,t)})):(i=function(t){try{return t.then}catch(t){return k.error=t,k}}(e))===k?E(t,k.error):void 0!==i&&u(i)?C(t,e,i):T(t,e)}function A(t,e){var n;t===e?E(t,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(n=e)||"object"==typeof n&&null!==n?D:T)(t,e)}function L(t){t._onerror&&t._onerror(t._result),j(t)}function T(t,e){t._state===b&&(t._result=e,t._state=w,0!==t._subscribers.length)&&a(j,t)}function E(t,e){t._state===b&&(t._state=x,t._result=e,a(L,t))}function S(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+w]=n,o[r+x]=i,0===r&&t._state&&a(j,t)}function j(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,o,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?q(n,i,o,r):o(r);t._subscribers.length=0}}function _(){this.error=null}var P=new _;function q(t,e,n,i){var o,r,s,a,l=u(n);if(l){if((o=function(t,e){try{return t(e)}catch(t){return P.error=t,P}}(n,i))===P?(a=!0,r=o.error,o=null):s=!0,e===o)return void E(e,new TypeError("A promises callback cannot return that same promise."))}else o=i,s=!0;e._state===b&&(l&&s?A(e,o):a?E(e,r):t===w?T(e,o):t===x&&E(e,o))}function $(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0!==n.length&&(n.length=n.length||0,n._enumerate(),0!==n._remaining)||T(n.promise,n._result)):E(n.promise,n._validationError())}$.prototype._validateInput=function(t){return s(t)},$.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},$.prototype._init=function(){this._result=new Array(this.length)};var I=$;$.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,i=0;e._state===b&&i<t;i++)this._eachEntry(n[i],i)},$.prototype._eachEntry=function(t,e){var n,i=this,o=i._instanceConstructor;"object"==typeof(n=t)&&null!==n?t.constructor===o&&t._state!==b?(t._onerror=null,i._settledAt(t._state,e,t._result)):i._willSettleAt(o.resolve(t),e):(i._remaining--,i._result[e]=t)},$.prototype._settledAt=function(t,e,n){var i=this,o=i.promise;o._state===b&&(i._remaining--,t===x?E(o,n):i._result[e]=n),0===i._remaining&&T(o,i._result)},$.prototype._willSettleAt=function(t,e){var n=this;S(t,void 0,function(t){n._settledAt(w,e,t)},function(t){n._settledAt(x,e,t)})};function O(t){var e=new this(v);if(s(t))for(var n=t.length,i=0;e._state===b&&i<n;i++)S(this.resolve(t[i]),void 0,o,r);else E(e,new TypeError("You must pass an array to race."));return e;function o(t){A(e,t)}function r(t){E(e,t)}}function H(t){var e;return t&&"object"==typeof t&&t.constructor===this?t:(A(e=new this(v),t),e)}function z(t){var e=new this(v);return E(e,t),e}var F=0;var M=R;function R(t){if(this._id=F++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t){if(!u(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof R))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var e=this;try{t(function(t){A(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}}R.all=function(t){return new I(this,t).promise},R.race=O,R.resolve=H,R.reject=z,R._setScheduler=function(t){n=t},R._setAsap=function(t){a=t},R._asap=a,R.prototype={constructor:R,then:function(t,e){var n,i,o,r=this._state;return r===w&&!t||r===x&&!e?this:(n=new this.constructor(v),i=this._result,r?(o=arguments[r-1],a(function(){q(r,n,o,i)})):S(this,n,t,e),n)},catch:function(t){return this.then(null,t)}};var o=function(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=M)},N={Promise:M,polyfill:o};"function"==typeof define&&define.amd?define("es6-promise",[],function(){return N}):"undefined"!=typeof module&&module.exports?module.exports=N:void 0!==this&&(this.ES6Promise=N),o()}.call(this),define("core/module-requiring-consent",[],function(){function t(t,e){this.consentManager=t,this.consentCategory=e,this.startHandle=null,this._realStart=this.start,this.start=this._start,this.stop&&(this._realStop=this.stop,this.stop=this._stop)}return t.prototype._start=function(){this.startHandle=this.consentManager.deferUntilConsentGiven(this._realStart.bind(this),this.consentCategory)},t.prototype._stop=function(){this.consentManager.cancelDeferral(this.startHandle),this.consentManager.ifConsentGiven(this._realStop.bind(this),this.consentCategory)},t}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(f,D){function L(t,e){return e.toUpperCase()}var t=[],c=t.slice,I=t.concat,O=t.push,o=t.indexOf,n={},H=n.toString,z=n.hasOwnProperty,y={},m=f.document,x=function(t,e){return new x.fn.init(t,e)},F=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,B=/^-ms-/,U=/-([\da-z])/gi;function W(t){var e=t.length,n=x.type(t);return"function"!==n&&!x.isWindow(t)&&(!(1!==t.nodeType||!e)||"array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}x.fn=x.prototype={jquery:"2.1.1",constructor:x,selector:"",length:0,toArray:function(){return c.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:c.call(this)},pushStack:function(t){t=x.merge(this.constructor(),t);return t.prevObject=this,t.context=this.context,t},each:function(t,e){return x.each(this,t,e)},map:function(n){return this.pushStack(x.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:t.sort,splice:t.splice},x.extend=x.fn.extend=function(){var t,e,n,i,o,r=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||x.isFunction(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)o=r[e],n=t[e],r!==n&&(l&&n&&(x.isPlainObject(n)||(i=x.isArray(n)))?(o=i?(i=!1,o&&x.isArray(o)?o:[]):o&&x.isPlainObject(o)?o:{},r[e]=x.extend(l,o,n)):void 0!==n&&(r[e]=n));return r},x.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===x.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!x.isArray(t)&&0<=t-parseFloat(t)},isPlainObject:function(t){return!("object"!==x.type(t)||t.nodeType||x.isWindow(t)||t.constructor&&!z.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){for(var e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[H.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=x.trim(t))&&(1===t.indexOf("use strict")?((e=m.createElement("script")).text=t,m.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(B,"ms-").replace(U,L)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i,o=0,r=t.length,s=W(t);if(n){if(s)for(;o<r&&!1!==(i=e.apply(t[o],n));o++);else for(o in t)if(i=e.apply(t[o],n),!1===i)break}else if(s)for(;o<r&&!1!==(i=e.call(t[o],o,t[o]));o++);else for(o in t)if(i=e.call(t[o],o,t[o]),!1===i)break;return t},trim:function(t){return null==t?"":(t+"").replace(F,"")},makeArray:function(t,e){e=e||[];return null!=t&&(W(Object(t))?x.merge(e,"string"==typeof t?[t]:t):O.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!=s&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,r=t.length,s=[];if(W(t))for(;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)i=e(t[o],o,n),null!=i&&s.push(i);return I.apply([],s)},guid:1,proxy:function(t,e){var n,i;return"string"==typeof e&&(i=t[e],e=t,t=i),x.isFunction(t)?(n=c.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(c.call(arguments)))}).guid=t.guid=t.guid||x.guid++,i):void 0},now:Date.now,support:y}),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var t=function(D){function p(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}var t,d,w,r,L,h,I,O,x,u,c,f,k,e,y,m,i,o,v,b="sizzle"+-new Date,g=D.document,C=0,H=0,z=ut(),F=ut(),B=ut(),U=function(t,e){return t===e&&(c=!0),0},n="undefined",W={}.hasOwnProperty,s=[],V=s.pop,G=s.push,A=s.push,Q=s.slice,T=s.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",l="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",X=l.replace("w","w#"),J="\\["+a+"*("+l+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+X+"))|)"+a+"*\\]",K=":("+l+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",E=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),Z=new RegExp("^"+a+"*,"+a+"*"),tt=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),et=new RegExp("="+a+"*([^\\]'\"]*?)"+a+"*\\]","g"),nt=new RegExp(K),it=new RegExp("^"+X+"$"),S={ID:new RegExp("^#("+l+")"),CLASS:new RegExp("^\\.("+l+")"),TAG:new RegExp("^("+l.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+K),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ot=/^(?:input|select|textarea|button)$/i,rt=/^h\d$/i,j=/^[^{]+\{\s*\[native \w/,st=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,at=/[+~]/,lt=/'|\\/g,_=new RegExp("\\\\([\\da-f]{1,6}"+a+"?|("+a+")|.)","ig");try{A.apply(s=Q.call(g.childNodes),g.childNodes),s[g.childNodes.length].nodeType}catch(t){A={apply:s.length?function(t,e){G.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function P(t,e,n,i){var o,r,s,a,l,u,c;if((e?e.ownerDocument||e:g)!==k&&f(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(o=(e=e||k).nodeType)&&9!==o)return[];if(y&&!i){if(u=st.exec(t))if(c=u[1]){if(9===o){if(!(a=e.getElementById(c))||!a.parentNode)return n;if(a.id===c)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(c))&&v(e,a)&&a.id===c)return n.push(a),n}else{if(u[2])return A.apply(n,e.getElementsByTagName(t)),n;if((c=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return A.apply(n,e.getElementsByClassName(c)),n}if(d.qsa&&(!m||!m.test(t))){if(l=a=b,u=e,c=9===o&&t,1===o&&"object"!==e.nodeName.toLowerCase()){for(s=h(t),(a=e.getAttribute("id"))?l=a.replace(lt,"\\$&"):e.setAttribute("id",l),l="[id='"+l+"'] ",r=s.length;r--;)s[r]=l+R(s[r]);u=at.test(t)&&dt(e.parentNode)||e,c=s.join(",")}if(c)try{return A.apply(n,u.querySelectorAll(c)),n}catch(t){}finally{a||e.removeAttribute("id")}}}return O(t.replace(E,"$1"),e,n,i)}function ut(){var n=[];function i(t,e){return n.push(t+" ")>w.cacheLength&&delete i[n.shift()],i[t+" "]=e}return i}function q(t){return t[b]=!0,t}function $(t){var e=k.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function ct(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function pt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function M(s){return q(function(r){return r=+r,q(function(t,e){for(var n,i=s([],t.length,r),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function dt(t){return t&&typeof t.getElementsByTagName!==n&&t}for(t in d=P.support={},L=P.isXML=function(t){t=t&&(t.ownerDocument||t).documentElement;return!!t&&"HTML"!==t.nodeName},f=P.setDocument=function(t){var l=t?t.ownerDocument||t:g,t=l.defaultView;return l!==k&&9===l.nodeType&&l.documentElement?(e=(k=l).documentElement,y=!L(l),t&&t!==t.top&&(t.addEventListener?t.addEventListener("unload",function(){f()},!1):t.attachEvent&&t.attachEvent("onunload",function(){f()})),d.attributes=$(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=$(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=j.test(l.getElementsByClassName)&&$(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),d.getById=$(function(t){return e.appendChild(t).id=b,!l.getElementsByName||!l.getElementsByName(b).length}),d.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!==n&&y)return(e=e.getElementById(t))&&e.parentNode?[e]:[]},w.filter.ID=function(t){var e=t.replace(_,p);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(_,p);return function(t){t=typeof t.getAttributeNode!==n&&t.getAttributeNode("id");return t&&t.value===e}}),w.find.TAG=d.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==n?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},w.find.CLASS=d.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==n&&y?e.getElementsByClassName(t):void 0},i=[],m=[],(d.qsa=j.test(l.querySelectorAll))&&($(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+a+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+a+"*(?:value|"+Y+")"),t.querySelectorAll(":checked").length||m.push(":checked")}),$(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+a+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(d.matchesSelector=j.test(o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector))&&$(function(t){d.disconnectedMatch=o.call(t,"div"),o.call(t,"[s!='']:x"),i.push("!=",K)}),m=m.length&&new RegExp(m.join("|")),i=i.length&&new RegExp(i.join("|")),t=j.test(e.compareDocumentPosition),v=t||j.test(e.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=t?function(t,e){var n;return t===e?(c=!0,0):(n=!t.compareDocumentPosition-!e.compareDocumentPosition)||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument===g&&v(g,t)?-1:e===l||e.ownerDocument===g&&v(g,e)?1:u?T.call(u,t)-T.call(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===l?-1:e===l?1:o?-1:r?1:u?T.call(u,t)-T.call(u,e):0;if(o===r)return pt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?pt(s[i],a[i]):s[i]===g?-1:a[i]===g?1:0},l):k},P.matches=function(t,e){return P(t,null,null,e)},P.matchesSelector=function(t,e){if((t.ownerDocument||t)!==k&&f(t),e=e.replace(et,"='$1']"),!(!d.matchesSelector||!y||i&&i.test(e)||m&&m.test(e)))try{var n=o.call(t,e);if(n||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<P(e,k,null,[t]).length},P.contains=function(t,e){return(t.ownerDocument||t)!==k&&f(t),v(t,e)},P.attr=function(t,e){(t.ownerDocument||t)!==k&&f(t);var n=w.attrHandle[e.toLowerCase()],n=n&&W.call(w.attrHandle,e.toLowerCase())?n(t,e,!y):void 0;return void 0!==n?n:d.attributes||!y?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},P.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},P.uniqueSort=function(t){var e,n=[],i=0,o=0;if(c=!d.detectDuplicates,u=!d.sortStable&&t.slice(0),t.sort(U),c){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return u=null,t},r=P.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(w=P.selectors={cacheLength:50,createPseudo:q,match:S,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_,p),t[3]=(t[3]||t[4]||t[5]||"").replace(_,p),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||P.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&P.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return S.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&nt.test(n)&&(e=(e=h(n,!0))&&n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_,p).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+a+")"+t+"("+a+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==n&&t.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(t){t=P.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===i:"!="===n?t!==i:"^="===n?i&&0===t.indexOf(i):"*="===n?i&&-1<t.indexOf(i):"$="===n?i&&t.slice(-i.length)===i:"~="===n?-1<(" "+t+" ").indexOf(i):"|="===n&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,t,e,f,y){var m="nth"!==h.slice(0,3),v="last"!==h.slice(-4),g="of-type"===t;return 1===f&&0===y?function(t){return!!t.parentNode}:function(t,e,n){var i,o,r,s,a,l,u=m!=v?"nextSibling":"previousSibling",c=t.parentNode,p=g&&t.nodeName.toLowerCase(),d=!n&&!g;if(c){if(m){for(;u;){for(r=t;r=r[u];)if(g?r.nodeName.toLowerCase()===p:1===r.nodeType)return!1;l=u="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&d){for(a=(i=(o=c[b]||(c[b]={}))[h]||[])[0]===C&&i[1],s=i[0]===C&&i[2],r=a&&c.childNodes[a];r=++a&&r&&r[u]||(s=a=0,l.pop());)if(1===r.nodeType&&++s&&r===t){o[h]=[C,a,s];break}}else if(d&&(i=(t[b]||(t[b]={}))[h])&&i[0]===C)s=i[1];else for(;(r=++a&&r&&r[u]||(s=a=0,l.pop()))&&((g?r.nodeName.toLowerCase()!==p:1!==r.nodeType)||!++s||(d&&((r[b]||(r[b]={}))[h]=[C,s]),r!==t)););return(s-=y)===f||s%f==0&&0<=s/f}}},PSEUDO:function(t,r){var e,s=w.pseudos[t]||w.setFilters[t.toLowerCase()]||P.error("unsupported pseudo: "+t);return s[b]?s(r):1<s.length?(e=[t,t,"",r],w.setFilters.hasOwnProperty(t.toLowerCase())?q(function(t,e){for(var n,i=s(t,r),o=i.length;o--;)t[n=T.call(t,i[o])]=!(e[n]=i[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:q(function(t){var i=[],o=[],a=I(t.replace(E,"$1"));return a[b]?q(function(t,e,n,i){for(var o,r=a(t,null,i,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,n){return i[0]=t,a(i,null,n,o),!o.pop()}}),has:q(function(e){return function(t){return 0<P(e,t).length}}),contains:q(function(e){return function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:q(function(n){return it.test(n||"")||P.error("unsupported lang: "+n),n=n.replace(_,p).toLowerCase(),function(t){var e;do{if(e=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=D.location&&D.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===e},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return rt.test(t.nodeName)},input:function(t){return ot.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:M(function(){return[0]}),last:M(function(t,e){return[e-1]}),eq:M(function(t,e,n){return[n<0?n+e:n]}),even:M(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:M(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:M(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:M(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})w.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function ht(){}function R(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function ft(s,t,e){var a=t.dir,l=e&&"parentNode"===a,u=H++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||l)return s(t,e,n)}:function(t,e,n){var i,o,r=[C,u];if(n){for(;t=t[a];)if((1===t.nodeType||l)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||l){if((i=(o=t[b]||(t[b]={}))[a])&&i[0]===C&&i[1]===u)return r[2]=i[2];if((o[a]=r)[2]=s(t,e,n))return!0}}}function yt(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function N(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),u)&&e.push(a);return s}function mt(h,f,y,m,v,t){return m&&!m[b]&&(m=mt(m)),v&&!v[b]&&(v=mt(v,t)),q(function(t,e,n,i){var o,r,s,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,o=e.length;i<o;i++)P(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),p=!h||!t&&f?c:N(c,a,h,n,i),d=y?v||(t?h:u||m)?[]:e:p;if(y&&y(p,d,n,i),m)for(o=N(d,l),m(o,[],n,i),r=o.length;r--;)(s=o[r])&&(d[l[r]]=!(p[l[r]]=s));if(t){if(v||h){if(v){for(o=[],r=d.length;r--;)(s=d[r])&&o.push(p[r]=s);v(null,d=[],o,i)}for(r=d.length;r--;)(s=d[r])&&-1<(o=v?T.call(t,s):a[r])&&(t[o]=!(e[o]=s))}}else d=N(d===e?d.splice(u,d.length):d),v?v(null,e,d,i):A.apply(e,d)})}function vt(m,v){function t(t,e,n,i,o){var r,s,a,l=0,u="0",c=t&&[],p=[],d=x,h=t||b&&w.find.TAG("*",o),f=C+=null==d?1:Math.random()||.1,y=h.length;for(o&&(x=e!==k&&e);u!==y&&null!=(r=h[u]);u++){if(b&&r){for(s=0;a=m[s++];)if(a(r,e,n)){i.push(r);break}o&&(C=f)}g&&((r=!a&&r)&&l--,t)&&c.push(r)}if(l+=u,g&&u!==l){for(s=0;a=v[s++];)a(c,p,e,n);if(t){if(0<l)for(;u--;)c[u]||p[u]||(p[u]=V.call(i));p=N(p)}A.apply(i,p),o&&!t&&0<p.length&&1<l+v.length&&P.uniqueSort(i)}return o&&(C=f,x=d),c}var g=0<v.length,b=0<m.length;return g?q(t):t}return ht.prototype=w.filters=w.pseudos,w.setFilters=new ht,h=P.tokenize=function(t,e){var n,i,o,r,s,a,l,u=F[t+" "];if(u)return e?0:u.slice(0);for(s=t,a=[],l=w.preFilter;s;){for(r in n&&!(i=Z.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(o=[])),n=!1,(i=tt.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(E," ")}),s=s.slice(n.length)),w.filter)!(i=S[r].exec(s))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?P.error(t):F(t,a).slice(0)},I=P.compile=function(t,e){var n,i=[],o=[],r=B[t+" "];if(!r){for(n=(e=e||h(t)).length;n--;)((r=function t(e){for(var i,n,o,r=e.length,s=w.relative[e[0].type],a=s||w.relative[" "],l=s?1:0,u=ft(function(t){return t===i},a,!0),c=ft(function(t){return-1<T.call(i,t)},a,!0),p=[function(t,e,n){return!s&&(n||e!==x)||((i=e).nodeType?u:c)(t,e,n)}];l<r;l++)if(n=w.relative[e[l].type])p=[ft(yt(p),n)];else{if((n=w.filter[e[l].type].apply(null,e[l].matches))[b]){for(o=++l;o<r&&!w.relative[e[o].type];o++);return mt(1<l&&yt(p),1<l&&R(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(E,"$1"),n,l<o&&t(e.slice(l,o)),o<r&&t(e=e.slice(o)),o<r&&R(e))}p.push(n)}return yt(p)}(e[n]))[b]?i:o).push(r);(r=B(t,vt(o,i))).selector=t}return r},O=P.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,c=!i&&h(t=u.selector||t);if(n=n||[],1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(s=r[0]).type&&d.getById&&9===e.nodeType&&y&&w.relative[r[1].type]){if(!(e=(w.find.ID(s.matches[0].replace(_,p),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=S.needsContext.test(t)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(i=l(s.matches[0].replace(_,p),at.test(r[0].type)&&dt(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&R(r))break;return A.apply(n,i),n}}return(u||I(t,c))(i,e,!y,n,at.test(t)&&dt(e.parentNode)||e),n},d.sortStable=b.split("").sort(U).join("")===b,d.detectDuplicates=!!c,f(),d.sortDetached=$(function(t){return 1&t.compareDocumentPosition(k.createElement("div"))}),$(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&$(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),$(function(t){return null==t.getAttribute("disabled")})||ct(Y,function(t,e,n){return n?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),P}(f),V=(x.find=t,x.expr=t.selectors,x.expr[":"]=x.expr.pseudos,x.unique=t.uniqueSort,x.text=t.getText,x.isXMLDoc=t.isXML,x.contains=t.contains,x.expr.match.needsContext),G=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Q=/^.[^:#\[\.,]*$/;function Y(t,n,i){if(x.isFunction(n))return x.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return x.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(Q.test(n))return x.filter(n,t,i);n=x.filter(n,t)}return x.grep(t,function(t){return 0<=o.call(n,t)!==i})}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n=this.length,i=[],o=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<n;e++)if(x.contains(o[e],this))return!0}));for(e=0;e<n;e++)x.find(t,o[e],i);return(i=this.pushStack(1<n?x.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(Y(this,t||[],!1))},not:function(t){return this.pushStack(Y(this,t||[],!0))},is:function(t){return!!Y(this,"string"==typeof t&&V.test(t)?x(t):t||[],!1).length}});var r,X=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,J=((x.fn.init=function(t,e){var n,i;if(t){if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):x.isFunction(t)?void 0!==r.ready?r.ready(t):t(x):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),x.makeArray(t,this));if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:X.exec(t))||!n[1]&&e)return(!e||e.jquery?e||r:this.constructor(e)).find(t);if(n[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),G.test(n[1])&&x.isPlainObject(e))for(n in e)x.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n])}else(i=m.getElementById(n[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=m,this.selector=t}return this}).prototype=x.fn,r=x(m),/^(?:parents|prev(?:Until|All))/),K={children:!0,contents:!0,next:!0,prev:!0};function Z(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.extend({dir:function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&x(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=V.test(t)||"string"!=typeof t?x(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&x.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?x.unique(r):r)},index:function(t){return t?"string"==typeof t?o.call(x(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.unique(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return x.dir(t,"parentNode")},parentsUntil:function(t,e,n){return x.dir(t,"parentNode",n)},next:function(t){return Z(t,"nextSibling")},prev:function(t){return Z(t,"previousSibling")},nextAll:function(t){return x.dir(t,"nextSibling")},prevAll:function(t){return x.dir(t,"previousSibling")},nextUntil:function(t,e,n){return x.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return x.dir(t,"previousSibling",n)},siblings:function(t){return x.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return x.sibling(t.firstChild)},contents:function(t){return t.contentDocument||x.merge([],t.childNodes)}},function(i,o){x.fn[i]=function(t,e){var n=x.map(this,o,t);return(e="Until"!==i.slice(-5)?t:e)&&"string"==typeof e&&(n=x.filter(e,n)),1<this.length&&(K[i]||x.unique(n),J.test(i))&&n.reverse(),this.pushStack(n)}});var e,k=/\S+/g,tt={};function i(){m.removeEventListener("DOMContentLoaded",i,!1),f.removeEventListener("load",i,!1),x.ready()}x.Callbacks=function(o){var t,n;o="string"==typeof o?tt[o]||(n=tt[t=o]={},x.each(t.match(k)||[],function(t,e){n[e]=!0}),n):x.extend({},o);function i(t){for(e=o.memory&&t,r=!0,u=a||0,a=0,l=c.length,s=!0;c&&u<l;u++)if(!1===c[u].apply(t[0],t[1])&&o.stopOnFalse){e=!1;break}s=!1,c&&(p?p.length&&i(p.shift()):e?c=[]:d.disable())}var e,r,s,a,l,u,c=[],p=!o.once&&[],d={add:function(){var t;return c&&(t=c.length,function i(t){x.each(t,function(t,e){var n=x.type(e);"function"===n?o.unique&&d.has(e)||c.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),s?l=c.length:e&&(a=t,i(e))),this},remove:function(){return c&&x.each(arguments,function(t,e){for(var n;-1<(n=x.inArray(e,c,n));)c.splice(n,1),s&&(n<=l&&l--,n<=u)&&u--}),this},has:function(t){return t?-1<x.inArray(t,c):!(!c||!c.length)},empty:function(){return c=[],l=0,this},disable:function(){return c=p=e=void 0,this},disabled:function(){return!c},lock:function(){return p=void 0,e||d.disable(),this},locked:function(){return!p},fireWith:function(t,e){return!c||r&&!p||(e=[t,(e=e||[]).slice?e.slice():e],s?p.push(e):i(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},x.extend({Deferred:function(t){var r=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return x.Deferred(function(i){x.each(r,function(t,e){var n=x.isFunction(o[t])&&o[t];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&x.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[e[0]+"With"](this===s?i.promise():this,n?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?x.extend(t,s):s}},a={};return s.pipe=s.then,x.each(r,function(t,e){var n=e[2],i=e[3];s[e[1]]=n.add,i&&n.add(function(){o=i},r[1^t][2].disable,r[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?s:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?c.call(arguments):t,i===o?u.notifyWith(n,i):--l||u.resolveWith(n,i)}}var o,n,i,r=0,s=c.call(arguments),a=s.length,l=1!==a||t&&x.isFunction(t.promise)?a:0,u=1===l?t:x.Deferred();if(1<a)for(o=new Array(a),n=new Array(a),i=new Array(a);r<a;r++)s[r]&&x.isFunction(s[r].promise)?s[r].promise().done(e(r,i,s)).fail(u.reject).progress(e(r,n,o)):--l;return l||u.resolveWith(i,s),u.promise()}}),x.fn.ready=function(t){return x.ready.promise().done(t),this},x.extend({isReady:!1,readyWait:1,holdReady:function(t){t?x.readyWait++:x.ready(!0)},ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0)!==t&&0<--x.readyWait||(e.resolveWith(m,[x]),x.fn.triggerHandler&&(x(m).triggerHandler("ready"),x(m).off("ready")))}}),x.ready.promise=function(t){return e||(e=x.Deferred(),"complete"===m.readyState?setTimeout(x.ready):(m.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",i,!1))),e.promise(t)},x.ready.promise();var a=x.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,u=null==n;if("object"===x.type(n))for(a in o=!0,n)x.access(t,e,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,x.isFunction(i)||(s=!0),e=u?s?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(x(t),n)}):e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:u?e.call(t):l?e(t[0],n):r};function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}x.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=x.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var n={},i=e[this.expando];if(!i){i=s.uid++;try{n[this.expando]={value:i},Object.defineProperties(e,n)}catch(t){n[this.expando]=i,x.extend(e,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,n){var i,t=this.key(t),o=this.cache[t];if("string"==typeof e)o[e]=n;else if(x.isEmptyObject(o))x.extend(this.cache[t],e);else for(i in e)o[i]=e[i];return o},get:function(t,e){t=this.cache[this.key(t)];return void 0===e?t:t[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,x.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,t=this.key(t),o=this.cache[t];if(void 0===e)this.cache[t]={};else{n=(i=x.isArray(e)?e.concat(e.map(x.camelCase)):(t=x.camelCase(e),e in o?[e,t]:(i=t)in o?[i]:i.match(k)||[])).length;for(;n--;)delete o[i[n]]}},hasData:function(t){return!x.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var v=new s,l=new s,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,nt=/([A-Z])/g;function it(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(nt,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:et.test(n)?x.parseJSON(n):n)}catch(t){}l.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return l.hasData(t)||v.hasData(t)},data:function(t,e,n){return l.access(t,e,n)},removeData:function(t,e){l.remove(t,e)},_data:function(t,e,n){return v.access(t,e,n)},_removeData:function(t,e){v.remove(t,e)}}),x.fn.extend({data:function(i,t){var e,n,o,r=this[0],s=r&&r.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){l.set(this,i)}):a(this,function(e){var t,n=x.camelCase(i);if(r&&void 0===e)return void 0!==(t=l.get(r,i))||void 0!==(t=l.get(r,n))||void 0!==(t=it(r,n,void 0))?t:void 0;this.each(function(){var t=l.get(this,n);l.set(this,n,e),-1!==i.indexOf("-")&&void 0!==t&&l.set(this,i,e)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=l.get(r),1===r.nodeType)&&!v.get(r,"hasDataAttrs")){for(e=s.length;e--;)s[e]&&0===(n=s[e].name).indexOf("data-")&&(n=x.camelCase(n.slice(5)),it(r,n,o[n]));v.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){l.remove(this,t)})}}),x.extend({queue:function(t,e,n){var i;return t?(i=v.get(t,e=(e||"fx")+"queue"),n&&(!i||x.isArray(n)?i=v.access(t,e,x.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),i=n.length,o=n.shift(),r=x._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){x.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return v.get(t,n)||v.access(t,n,{empty:x.Callbacks("once memory").add(function(){v.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?x.queue(this[0],e):void 0===n?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--o||r.resolveWith(s,[s])}var i,o=1,r=x.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=v.get(s[a],t+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),r.promise(e)}});function g(t,e){return"none"===x.css(t=e||t,"display")||!x.contains(t.ownerDocument,t)}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,u=["Top","Right","Bottom","Left"],ot=/^(?:checkbox|radio)$/i,b=(P=m.createDocumentFragment().appendChild(m.createElement("div")),(_=m.createElement("input")).setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),P.appendChild(_),y.checkClone=P.cloneNode(!0).cloneNode(!0).lastChild.checked,P.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!P.cloneNode(!0).lastChild.defaultValue,"undefined"),rt=(y.focusinBubbles="onfocusin"in f,/^key/),st=/^(?:mouse|pointer|contextmenu)|click/,at=/^(?:focusinfocus|focusoutblur)$/,lt=/^([^.]*)(?:\.(.+)|)$/;function p(){return!0}function d(){return!1}function ut(){try{return m.activeElement}catch(t){}}x.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,u,c,p,d,h,f=v.get(e);if(f)for(n.handler&&(n=(r=n).handler,o=r.selector),n.guid||(n.guid=x.guid++),a=(a=f.events)||(f.events={}),s=(s=f.handle)||(f.handle=function(t){return typeof x!=b&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(k)||[""]).length;l--;)p=h=(d=lt.exec(t[l])||[])[1],d=(d[2]||"").split(".").sort(),p&&(u=x.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=x.event.special[p]||{},h=x.extend({type:p,origType:h,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:d.join(".")},r),(c=a[p])||((c=a[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,d,s))||e.addEventListener&&e.addEventListener(p,s,!1),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),o?c.splice(c.delegateCount++,0,h):c.push(h),x.event.global[p]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,u,c,p,d,h,f,y,m=v.hasData(t)&&v.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(k)||[""]).length;u--;)if(h=y=(a=lt.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),h){for(p=x.event.special[h]||{},d=l[h=(i?p.delegateType:p.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)c=d[r],!o&&y!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(t,c));s&&!d.length&&(p.teardown&&!1!==p.teardown.call(t,f,m.handle)||x.removeEvent(t,h,m.handle),delete l[h])}else for(h in l)x.event.remove(t,h+e[u],n,i,!0);x.isEmptyObject(l)&&(delete m.handle,v.remove(t,"events"))}},trigger:function(t,e,n,i){var o,r,s,a,l,u,c=[n||m],p=z.call(t,"type")?t.type:t,d=z.call(t,"namespace")?t.namespace.split("."):[],h=r=n=n||m;if(3!==n.nodeType&&8!==n.nodeType&&!at.test(p+x.event.triggered)&&(0<=p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),a=p.indexOf(":")<0&&"on"+p,(t=t[x.expando]?t:new x.Event(p,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:x.makeArray(e,[t]),u=x.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!x.isWindow(n)){for(s=u.delegateType||p,at.test(s+p)||(h=h.parentNode);h;h=h.parentNode)c.push(h),r=h;r===(n.ownerDocument||m)&&c.push(r.defaultView||r.parentWindow||f)}for(o=0;(h=c[o++])&&!t.isPropagationStopped();)t.type=1<o?s:u.bindType||p,(l=(v.get(h,"events")||{})[t.type]&&v.get(h,"handle"))&&l.apply(h,e),(l=a&&h[a])&&l.apply&&x.acceptData(h)&&(t.result=l.apply(h,e),!1===t.result)&&t.preventDefault();return t.type=p,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(c.pop(),e)||!x.acceptData(n)||a&&x.isFunction(n[p])&&!x.isWindow(n)&&((r=n[a])&&(n[a]=null),n[x.event.triggered=p](),x.event.triggered=void 0,r)&&(n[a]=r),t.result}},dispatch:function(t){t=x.event.fix(t);var e,n,i,o,r,s=c.call(arguments),a=(v.get(this,"events")||{})[t.type]||[],l=x.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,t)){for(r=x.event.handlers.call(this,t,a),e=0;(i=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0===(o=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s)))||!1!==(t.result=o)||(t.preventDefault(),t.stopPropagation());return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(i=[],n=0;n<a;n++)void 0===i[o=(r=e[n]).selector+" "]&&(i[o]=r.needsContext?0<=x(o,this).index(l):x.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||m).documentElement,i=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[x.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=st.test(o)?this.mouseHooks:rt.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new x.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=m),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ut()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ut()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return x.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){t=x.extend(new x.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?x.event.trigger(t,null,e):x.event.dispatch.call(e,t),t.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},x.Event=function(t,e){return this instanceof x.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?p:d):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||x.now(),void(this[x.expando]=!0)):new x.Event(t,e)},x.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){x.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||x.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=o),e}}}),y.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(n,i){function o(t){x.event.simulate(i,t.target,x.event.fix(t),!0)}x.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=v.access(t,i);e||t.addEventListener(n,o,!0),v.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=v.access(t,i)-1;e?v.access(t,i,e):(t.removeEventListener(n,o,!0),v.remove(t,i))}}}),x.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){for(s in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(s,e,n,t[s],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=d;else if(!i)return this;return 1===o&&(r=i,(i=function(t){return x().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=x.guid++)),this.each(function(){x.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);else{if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=d),this.each(function(){x.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o])}return this},trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?x.event.trigger(t,e,n,!0):void 0}});var ct=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,pt=/<([\w:]+)/,dt=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,yt=/^$|\/(?:java|ecma)script/i,mt=/^true\/(.*)/,vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){return x.nodeName(t,"table")&&x.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function bt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function wt(t){var e=mt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function xt(t,e){for(var n=0,i=t.length;n<i;n++)v.set(t[n],"globalEval",!e||v.get(e[n],"globalEval"))}function kt(t,e){var n,i,o,r,s,a;if(1===e.nodeType){if(v.hasData(t)&&(r=v.access(t),s=v.set(e,r),a=r.events))for(o in delete s.handle,s.events={},a)for(n=0,i=a[o].length;n<i;n++)x.event.add(e,o,a[o][n]);l.hasData(t)&&(r=l.access(t),s=x.extend({},r),l.set(e,s))}}function w(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&x.nodeName(t,e)?x.merge([t],n):n}h.optgroup=h.option,h.tbody=h.tfoot=h.colgroup=h.caption=h.thead,h.th=h.td,x.extend({clone:function(t,e,n){var i,o,r,s,a,l,u,c=t.cloneNode(!0),p=x.contains(t.ownerDocument,t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(s=w(c),i=0,o=(r=w(t)).length;i<o;i++)a=r[i],l=s[i],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&ot.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(r=r||w(t),s=s||w(c),i=0,o=r.length;i<o;i++)kt(r[i],s[i]);else kt(t,c);return 0<(s=w(c,"script")).length&&xt(s,!p&&w(t,"script")),c},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,u=e.createDocumentFragment(),c=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===x.type(o))x.merge(c,o.nodeType?[o]:o);else if(dt.test(o)){for(r=r||u.appendChild(e.createElement("div")),s=(pt.exec(o)||["",""])[1].toLowerCase(),r.innerHTML=(s=h[s]||h._default)[1]+o.replace(ct,"<$1></$2>")+s[2],l=s[0];l--;)r=r.lastChild;x.merge(c,r.childNodes),(r=u.firstChild).textContent=""}else c.push(e.createTextNode(o));for(u.textContent="",p=0;o=c[p++];)if((!i||-1===x.inArray(o,i))&&(a=x.contains(o.ownerDocument,o),r=w(u.appendChild(o),"script"),a&&xt(r),n))for(l=0;o=r[l++];)yt.test(o.type||"")&&n.push(o);return u},cleanData:function(t){for(var e,n,i,o,r=x.event.special,s=0;void 0!==(n=t[s]);s++){if(x.acceptData(n)&&(o=n[v.expando])&&(e=v.cache[o])){if(e.events)for(i in e.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);v.cache[o]&&delete v.cache[o]}delete l.cache[n[l.expando]]}}}),x.fn.extend({text:function(t){return a(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||gt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=gt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?x.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||x.cleanData(w(n)),n.parentNode&&(e&&x.contains(n.ownerDocument,n)&&xt(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return a(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ht.test(t)&&!h[(pt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(ct,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,x.cleanData(w(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i){n=I.apply([],n);var t,e,o,r,s,a,l=0,u=this.length,c=this,p=u-1,d=n[0],h=x.isFunction(d);if(h||1<u&&"string"==typeof d&&!y.checkClone&&ft.test(d))return this.each(function(t){var e=c.eq(t);h&&(n[0]=d.call(this,t,e.html())),e.domManip(n,i)});if(u&&(e=(t=x.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===t.childNodes.length&&(t=e),e)){for(r=(o=x.map(w(t,"script"),bt)).length;l<u;l++)s=t,l!==p&&(s=x.clone(s,!0,!0),r)&&x.merge(o,w(s,"script")),i.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,x.map(o,wt),l=0;l<r;l++)s=o[l],yt.test(s.type||"")&&!v.access(s,"globalEval")&&x.contains(a,s)&&(s.src?x._evalUrl&&x._evalUrl(s.src):x.globalEval(s.textContent.replace(vt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){x.fn[t]=function(t){for(var e,n=[],i=x(t),o=i.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),x(i[r])[s](e),O.apply(n,e.get());return this.pushStack(n)}});var Ct,At={};function Tt(t,e){t=x(e.createElement(t)).appendTo(e.body),e=f.getDefaultComputedStyle&&(e=f.getDefaultComputedStyle(t[0]))?e.display:x.css(t[0],"display");return t.detach(),e}function Et(t){var e=m,n=At[t];return n||("none"!==(n=Tt(t,e))&&n||((e=(Ct=(Ct||x("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=Tt(t,e),Ct.detach()),At[t]=n),n}function St(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)}var jt,_t,C,A,T,Pt=/^margin/,qt=new RegExp("^("+t+")(?!px)[a-z%]+$","i");function E(t,e,n){var i,o,r=t.style;return(n=n||St(t))&&(o=n.getPropertyValue(e)||n[e]),n&&(""!==o||x.contains(t.ownerDocument,t)||(o=x.style(t,e)),qt.test(o))&&Pt.test(e)&&(t=r.width,e=r.minWidth,i=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=t,r.minWidth=e,r.maxWidth=i),void 0!==o?o+"":o}function $t(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function Mt(){T.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",T.innerHTML="",C.appendChild(A);var t=f.getComputedStyle(T,null);jt="1%"!==t.top,_t="4px"===t.width,C.removeChild(A)}C=m.documentElement,A=m.createElement("div"),(T=m.createElement("div")).style&&(T.style.backgroundClip="content-box",T.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===T.style.backgroundClip,A.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",A.appendChild(T),f.getComputedStyle)&&x.extend(y,{pixelPosition:function(){return Mt(),jt},boxSizingReliable:function(){return null==_t&&Mt(),_t},reliableMarginRight:function(){var t=T.appendChild(m.createElement("div"));return t.style.cssText=T.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",T.style.width="1px",C.appendChild(A),t=!parseFloat(f.getComputedStyle(t,null).marginRight),C.removeChild(A),t}}),x.swap=function(t,e,n,i){var o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in n=n.apply(t,i||[]),e)t.style[o]=r[o];return n};var Rt=/^(none|table(?!-c[ea]).+)/,Nt=new RegExp("^("+t+")(.*)$","i"),Dt=new RegExp("^([+-])=("+t+")","i"),Lt={position:"absolute",visibility:"hidden",display:"block"},It={letterSpacing:"0",fontWeight:"400"},Ot=["Webkit","O","Moz","ms"];function Ht(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,o=Ot.length;o--;)if((e=Ot[o]+n)in t)return e;return i}function zt(t,e,n){var i=Nt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function Ft(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===n&&(s+=x.css(t,n+u[r],!0,o)),i?("content"===n&&(s-=x.css(t,"padding"+u[r],!0,o)),"margin"!==n&&(s-=x.css(t,"border"+u[r]+"Width",!0,o))):(s+=x.css(t,"padding"+u[r],!0,o),"padding"!==n&&(s+=x.css(t,"border"+u[r]+"Width",!0,o)));return s}function Bt(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=St(t),s="border-box"===x.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=E(t,e,r))<0||null==o)&&(o=t.style[e]),qt.test(o))return o;i=s&&(y.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Ft(t,e,n||(s?"border":"content"),i,r)+"px"}function Ut(t,e){for(var n,i,o,r=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(r[s]=v.get(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&g(i)&&(r[s]=v.access(i,"olddisplay",Et(i.nodeName)))):(o=g(i),"none"===n&&o||v.set(i,"olddisplay",o?n:x.css(i,"display"))));for(s=0;s<a;s++)!(i=t[s]).style||e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none");return t}function S(t,e,n,i,o){return new S.prototype.init(t,e,n,i,o)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=E(t,"opacity"))?"1":e}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){var o,r,s,a,l;if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style)return a=x.camelCase(e),l=t.style,e=x.cssProps[a]||(x.cssProps[a]=Ht(l,a)),s=x.cssHooks[e]||x.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e]:("string"===(r=typeof n)&&(o=Dt.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(x.css(t,e)),r="number"),void(null!=n&&n==n&&("number"!==r||x.cssNumber[a]||(n+="px"),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l[e]=n))))},css:function(t,e,n,i){var o,r=x.camelCase(e);return e=x.cssProps[r]||(x.cssProps[r]=Ht(t.style,r)),"normal"===(o=void 0===(o=(r=x.cssHooks[e]||x.cssHooks[r])&&"get"in r?r.get(t,!0,n):o)?E(t,e,i):o)&&e in It&&(o=It[e]),(""===n||n)&&(r=parseFloat(o),!0===n||x.isNumeric(r))?r||0:o}}),x.each(["height","width"],function(t,o){x.cssHooks[o]={get:function(t,e,n){return e?Rt.test(x.css(t,"display"))&&0===t.offsetWidth?x.swap(t,Lt,function(){return Bt(t,o,n)}):Bt(t,o,n):void 0},set:function(t,e,n){var i=n&&St(t);return zt(0,e,n?Ft(t,o,n,"border-box"===x.css(t,"boxSizing",!1,i),i):0)}}}),x.cssHooks.marginRight=$t(y.reliableMarginRight,function(t,e){return e?x.swap(t,{display:"inline-block"},E,[t,"marginRight"]):void 0}),x.each({margin:"",padding:"",border:"Width"},function(o,r){x.cssHooks[o+r]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+u[e]+r]=i[e]||i[e-2]||i[0];return n}},Pt.test(o)||(x.cssHooks[o+r].set=zt)}),x.fn.extend({css:function(t,e){return a(this,function(t,e,n){var i,o,r={},s=0;if(x.isArray(e)){for(i=St(t),o=e.length;s<o;s++)r[e[s]]=x.css(t,e[s],!1,i);return r}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,1<arguments.length)},show:function(){return Ut(this,!0)},hide:function(){return Ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){g(this)?x(this).show():x(this).hide()})}}),((x.Tween=S).prototype={constructor:S,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(x.cssNumber[n]?"":"px")},cur:function(){var t=S.propHooks[this.prop];return(t&&t.get?t:S.propHooks._default).get(this)},run:function(t){var e=S.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(e&&e.set?e:S.propHooks._default).set(this),this}}).init.prototype=S.prototype,(S.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[x.cssProps[t.prop]]||x.cssHooks[t.prop])?x.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=S.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},x.fx=S.prototype.init,x.fx.step={};var j,Wt,_,P,Vt=/^(?:toggle|show|hide)$/,Gt=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),Qt=/queueHooks$/,Yt=[function(e,t,n){var i,o,r,s,a,l,u,c=this,p={},d=e.style,h=e.nodeType&&g(e),f=v.get(e,"fxshow");for(i in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=x.css(e,"display"),"inline"===("none"===u?v.get(e,"olddisplay")||Et(e.nodeName):u))&&"none"===x.css(e,"float")&&(d.display="inline-block"),n.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),t)if(o=t[i],Vt.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;h=!0}p[i]=f&&f[i]||x.style(e,i)}else u=void 0;if(x.isEmptyObject(p))"inline"===("none"===u?Et(e.nodeName):u)&&(d.display=u);else for(i in f?"hidden"in f&&(h=f.hidden):f=v.access(e,"fxshow",{}),r&&(f.hidden=!h),h?x(e).show():c.done(function(){x(e).hide()}),c.done(function(){for(var t in v.remove(e,"fxshow"),p)x.style(e,t,p[t])}),p)s=Kt(h?f[i]:0,i,c),i in f||(f[i]=s.start,h&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],q={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),e=Gt.exec(e),o=e&&e[3]||(x.cssNumber[t]?"":"px"),r=(x.cssNumber[t]||"px"!==o&&+i)&&Gt.exec(x.css(n.elem,t)),s=1,a=20;if(r&&r[3]!==o)for(o=o||r[3],e=e||[],r=+i||1;x.style(n.elem,t,(r/=s=s||".5")+o),s!==(s=n.cur()/i)&&1!==s&&--a;);return e&&(r=n.start=+r||+i||0,n.unit=o,n.end=e[1]?r+(e[1]+1)*e[2]:+e[2]),n}]};function Xt(){return setTimeout(function(){j=void 0}),j=x.now()}function Jt(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=u[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function Kt(t,e,n){for(var i,o=(q[e]||[]).concat(q["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function Zt(o,t,e){var n,r,i,s,a,l,u,c=0,p=Yt.length,d=x.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var t=j||Xt(),t=Math.max(0,f.startTime+f.duration-t),e=1-(t/f.duration||0),n=0,i=f.tweens.length;n<i;n++)f.tweens[n].run(e);return d.notifyWith(o,[f,e,t]),e<1&&i?t:(d.resolveWith(o,[f]),!1)},f=d.promise({elem:o,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:j||Xt(),duration:e.duration,tweens:[],createTween:function(t,e){e=x.Tween(o,f.opts,t,e,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(e),e},stop:function(t){var e=0,n=t?f.tweens.length:0;if(!r){for(r=!0;e<n;e++)f.tweens[e].run(1);t?d.resolveWith(o,[f,t]):d.rejectWith(o,[f,t])}return this}}),y=f.props,m=y,v=f.opts.specialEasing;for(i in m)if(s=x.camelCase(i),a=v[s],l=m[i],x.isArray(l)&&(a=l[1],l=m[i]=l[0]),i!==s&&(m[s]=l,delete m[i]),u=x.cssHooks[s],u&&"expand"in u)for(i in l=u.expand(l),delete m[s],l)i in m||(m[i]=l[i],v[i]=a);else v[s]=a;for(;c<p;c++)if(n=Yt[c].call(f,o,y,f.opts))return n;return x.map(y,Kt,f),x.isFunction(f.opts.start)&&f.opts.start.call(o,f),x.fx.timer(x.extend(h,{elem:o,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}x.Animation=x.extend(Zt,{tweener:function(t,e){for(var n,i=0,o=(t=x.isFunction(t)?(e=t,["*"]):t.split(" ")).length;i<o;i++)n=t[i],q[n]=q[n]||[],q[n].unshift(e)},prefilter:function(t,e){e?Yt.unshift(t):Yt.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||x.isFunction(t)&&t,duration:t,easing:n&&e||e&&!x.isFunction(e)&&e};return i.duration=x.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in x.fx.speeds?x.fx.speeds[i.duration]:x.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){x.isFunction(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(g).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){function o(){var t=Zt(this,x.extend({},e),s);(r||v.get(this,"finish"))&&t.stop(!0)}var r=x.isEmptyObject(e),s=x.speed(t,n,i);return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(o,t,r){function s(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=x.timers,i=v.get(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&Qt.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||x.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=v.get(this),n=e[s+"queue"],i=e[s+"queueHooks"],o=x.timers,r=n?n.length:0;for(e.finish=!0,x.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),x.each(["toggle","show","hide"],function(t,i){var o=x.fn[i];x.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(Jt(i,!0),t,e,n)}}),x.each({slideDown:Jt("show"),slideUp:Jt("hide"),slideToggle:Jt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){x.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(j=x.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),j=void 0},x.fx.timer=function(t){x.timers.push(t),t()?x.fx.start():x.timers.pop()},x.fx.interval=13,x.fx.start=function(){Wt=Wt||setInterval(x.fx.tick,x.fx.interval)},x.fx.stop=function(){clearInterval(Wt),Wt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(i,t){return i=x.fx&&x.fx.speeds[i]||i,this.queue(t=t||"fx",function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},_=m.createElement("input"),P=m.createElement("select"),t=P.appendChild(m.createElement("option")),_.type="checkbox",y.checkOn=""!==_.value,y.optSelected=t.selected,P.disabled=!0,y.optDisabled=!t.disabled,(_=m.createElement("input")).value="t",_.type="radio",y.radioValue="t"===_.value;var te,$=x.expr.attrHandle,ee=(x.fn.extend({attr:function(t,e){return a(this,x.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute==b?x.prop(t,e,n):(1===r&&x.isXMLDoc(t)||(e=e.toLowerCase(),i=x.attrHooks[e]||(x.expr.match.bool.test(e)?te:void 0)),void 0===n?!(i&&"get"in i&&null!==(o=i.get(t,e)))&&null==(o=x.find.attr(t,e))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void x.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(k);if(r&&1===t.nodeType)for(;n=r[o++];)i=x.propFix[n]||n,x.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){var n;if(!y.radioValue&&"radio"===e&&x.nodeName(t,"input"))return n=t.value,t.setAttribute("type",e),n&&(t.value=n),e}}}}),te={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var r=$[e]||x.find.attr;$[e]=function(t,e,n){var i,o;return n||(o=$[e],$[e]=i,i=null!=r(t,e,n)?e.toLowerCase():null,$[e]=o),i}}),/^(?:input|select|textarea|button)$/i),ne=(x.fn.extend({prop:function(t,e){return a(this,x.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!x.isXMLDoc(t))&&(e=x.propFix[e]||e,o=x.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ee.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),y.optSelected||(x.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),/[\t\r\n\f]/g),ie=(x.fn.extend({addClass:function(e){var t,n,i,o,r,s,a="string"==typeof e&&e,l=0,u=this.length;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(k)||[];l<u;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(ne," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=x.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,o,r,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(k)||[];l<u;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(ne," "):"")){for(r=0;o=t[r++];)for(;0<=i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");s=e?x.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(o,e){var r=typeof o;return"boolean"==typeof e&&"string"==r?e?this.addClass(o):this.removeClass(o):this.each(x.isFunction(o)?function(t){x(this).toggleClass(o.call(this,t,this.className,e),e)}:function(){if("string"==r)for(var t,e=0,n=x(this),i=o.match(k)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!=b&&"boolean"!=r||(this.className&&v.set(this,"__className__",this.className),this.className=!this.className&&!1!==o&&v.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(ne," ").indexOf(e))return!0;return!1}}),/\r/g),oe=(x.fn.extend({val:function(e){var n,t,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(t){1===this.nodeType&&(null==(t=i?e.call(this,t,x(this).val()):e)?t="":"number"==typeof t?t+="":x.isArray(t)&&(t=x.map(t,function(t){return null==t?"":t+""})),(n=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):o?(n=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(o,"value"))?t:"string"==typeof(t=o.value)?t.replace(ie,""):null==t?"":t:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:x.trim(x.text(t))}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,r=o?null:[],s=o?i+1:n.length,a=i<0?s:o?i:0;a<s;a++)if(!(!(e=n[a]).selected&&a!==i||(y.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&x.nodeName(e.parentNode,"optgroup"))){if(e=x(e).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,r=x.makeArray(e),s=o.length;s--;)((i=o[s]).selected=0<=x.inArray(i.value,r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){return x.isArray(e)?t.checked=0<=x.inArray(x(t).val(),e):void 0}},y.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){x.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.now()),re=/\?/;x.parseJSON=function(t){return JSON.parse(t+"")},x.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+t),e};var M,R,se=/#.*$/,ae=/([?&])_=[^&]*/,le=/^(.*?):[ \t]*([^\r\n]*)$/gm,ue=/^(?:GET|HEAD)$/,ce=/^\/\//,pe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,de={},he={},fe="*/".concat("*");try{R=location.href}catch(t){(R=m.createElement("a")).href="",R=R.href}function ye(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(k)||[];if(x.isFunction(e))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function me(e,i,o,r){var s={},a=e===he;function l(t){var n;return s[t]=!0,x.each(e[t]||[],function(t,e){e=e(i,o,r);return"string"!=typeof e||a||s[e]?a?!(n=e):void 0:(i.dataTypes.unshift(e),l(e),!1)}),n}return l(i.dataTypes[0])||!s["*"]&&l("*")}function ve(t,e){var n,i,o=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i=i||{})[n]=e[n]);return i&&x.extend(!0,t,i),t}M=pe.exec(R.toLowerCase())||[],x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:R,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(M[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ve(ve(t,x.ajaxSettings),e):ve(x.ajaxSettings,t)},ajaxPrefilter:ye(de),ajaxTransport:ye(he),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,u,c,n,p,d,i,h=x.ajaxSetup({},e=e||{}),f=h.context||h,y=h.context&&(f.nodeType||f.jquery)?x(f):x.event,m=x.Deferred(),v=x.Callbacks("once memory"),g=h.statusCode||{},o={},r={},b=0,s="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!n)for(n={};e=le.exec(c);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?c:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=r[n]=r[n]||t,o[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){if(t)if(b<2)for(var e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){t=t||s;return l&&l.abort(t),a(0,t),this}};if(m.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||R)+"").replace(se,"").replace(ce,M[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=x.trim(h.dataType||"*").toLowerCase().match(k)||[""],null==h.crossDomain&&(t=pe.exec(h.url.toLowerCase()),h.crossDomain=!(!t||t[1]===M[1]&&t[2]===M[2]&&(t[3]||("http:"===t[1]?"80":"443"))===(M[3]||("http:"===M[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=x.param(h.data,h.traditional)),me(de,h,e,w),2!==b){for(i in(d=h.global)&&0==x.active++&&x.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ue.test(h.type),u=h.url,h.hasContent||(h.data&&(u=h.url+=(re.test(u)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ae.test(u)?u.replace(ae,"$1_="+oe++):u+(re.test(u)?"&":"?")+"_="+oe++)),h.ifModified&&(x.lastModified[u]&&w.setRequestHeader("If-Modified-Since",x.lastModified[u]),x.etag[u])&&w.setRequestHeader("If-None-Match",x.etag[u]),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+fe+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(!1===h.beforeSend.call(f,w,h)||2===b))return w.abort();for(i in s="abort",{success:1,error:1,complete:1})w[i](h[i]);if(l=me(he,h,e,w)){w.readyState=1,d&&y.trigger("ajaxSend",[w,h]),h.async&&0<h.timeout&&(p=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,l.send(o,a)}catch(t){if(!(b<2))throw t;a(-1,t)}}else a(-1,"No Transport")}return w;function a(t,e,n,i){var o,r,s,a=e;2!==b&&(b=2,p&&clearTimeout(p),l=void 0,c=i||"",w.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s=s||o}r=r||s}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}(h,w,n)),s=function(t,e,n,i){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=u[l+" "+r]||u["* "+r]))for(o in u)if(a=o.split(" "),a[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[o]:!0!==u[o]&&(r=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(h,s,w,i),i?(h.ifModified&&((n=w.getResponseHeader("Last-Modified"))&&(x.lastModified[u]=n),n=w.getResponseHeader("etag"))&&(x.etag[u]=n),204===t||"HEAD"===h.type?a="nocontent":304===t?a="notmodified":(a=s.state,o=s.data,i=!(r=s.error))):(r=a,(t||!a)&&(a="error",t<0)&&(t=0)),w.status=t,w.statusText=(e||a)+"",i?m.resolveWith(f,[o,a,w]):m.rejectWith(f,[w,a,r]),w.statusCode(g),g=void 0,d&&y.trigger(i?"ajaxSuccess":"ajaxError",[w,h,i?o:r]),v.fireWith(f,[w,a]),d)&&(y.trigger("ajaxComplete",[w,h]),--x.active||x.event.trigger("ajaxStop"))}},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,o){x[o]=function(t,e,n,i){return x.isFunction(e)&&(i=i||n,n=e,e=void 0),x.ajax({url:t,type:o,dataType:i,data:e,success:n})}}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(n){return this.each(x.isFunction(n)?function(t){x(this).wrapInner(n.call(this,t))}:function(){var t=x(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=x.isFunction(e);return this.each(function(t){x(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}}),x.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},x.expr.filters.visible=function(t){return!x.expr.filters.hidden(t)};var ge=/%20/g,be=/\[\]$/,we=/\r?\n/g,xe=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;x.param=function(t,e){function n(t,e){e=x.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var i,o=[];if(void 0===e&&(e=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){n(this.name,this.value)});else for(i in t)!function n(i,t,o,r){if(x.isArray(t))x.each(t,function(t,e){o||be.test(i)?r(i,e):n(i+"["+("object"==typeof e?t:"")+"]",e,o,r)});else if(o||"object"!==x.type(t))r(i,t);else for(var e in t)n(i+"["+e+"]",t[e],o,r)}(i,t[i],e,n);return o.join("&").replace(ge,"+")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&ke.test(this.nodeName)&&!xe.test(t)&&(this.checked||!ot.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(we,"\r\n")}}):{name:e.name,value:n.replace(we,"\r\n")}}).get()}}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ce=0,Ae={},Te={0:200,1223:204},N=x.ajaxSettings.xhr(),Ee=(f.ActiveXObject&&x(f).on("unload",function(){for(var t in Ae)Ae[t]()}),y.cors=!!N&&"withCredentials"in N,y.ajax=N=!!N,x.ajaxTransport(function(r){var s;return y.cors||N&&!r.crossDomain?{send:function(t,e){var n,i=r.xhr(),o=++Ce;if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);s=function(t){return function(){s&&(delete Ae[o],s=i.onload=i.onerror=null,"abort"===t?i.abort():"error"===t?e(i.status,i.statusText):e(Te[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=s(),i.onerror=s("error"),s=Ae[o]=s("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(s)throw t}},abort:function(){s&&s()}}:void 0}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(t,e){i=x("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){i.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),m.head.appendChild(i[0])},abort:function(){o&&o()}}}),[]),Se=/(=)\?(?=&|$)|\?\?/,je=(x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ee.pop()||x.expando+"_"+oe++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,r,s=!1!==t.jsonp&&(Se.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Se.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Se,"$1"+i):!1!==t.jsonp&&(t.url+=(re.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||x.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=f[i],f[i]=function(){r=arguments},n.always(function(){f[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ee.push(i)),r&&x.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),x.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||m;var i=G.exec(t),n=!n&&[];return i?[e.createElement(i[1])]:(i=x.buildFragment([t],e,n),n&&n.length&&x(n).remove(),x.merge([],i.childNodes))},x.fn.load),_e=(x.fn.load=function(t,e,n){var i,o,r,s,a;return"string"!=typeof t&&je?je.apply(this,arguments):(s=this,0<=(a=t.indexOf(" "))&&(i=x.trim(t.slice(a)),t=t.slice(0,a)),x.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<s.length&&x.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,r||[t.responseText,e,t])}),this)},x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},f.document.documentElement);function Pe(t){return x.isWindow(t)?t:9===t.nodeType&&t.defaultView}x.offset={setOffset:function(t,e,n){var i,o,r,s,a=x.css(t,"position"),l=x(t),u={};"static"===a&&(t.style.position="relative"),r=l.offset(),i=x.css(t,"top"),s=x.css(t,"left"),a=("absolute"===a||"fixed"===a)&&-1<(i+s).indexOf("auto")?(o=(a=l.position()).top,a.left):(o=parseFloat(i)||0,parseFloat(s)||0),null!=(e=x.isFunction(e)?e.call(t,n,r):e).top&&(u.top=e.top-r.top+o),null!=e.left&&(u.left=e.left-r.left+a),"using"in e?e.using.call(t,u):l.css(u)}},x.fn.extend({offset:function(e){var t,n,i,o;return arguments.length?void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)}):(i={top:0,left:0},(o=(n=this[0])&&n.ownerDocument)?(t=o.documentElement,x.contains(t,n)?(typeof n.getBoundingClientRect!=b&&(i=n.getBoundingClientRect()),n=Pe(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0)},position:function(){var t,e,n,i;if(this[0])return n=this[0],i={top:0,left:0},"fixed"===x.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),(i=x.nodeName(t[0],"html")?i:t.offset()).top+=x.css(t[0],"borderTopWidth",!0),i.left+=x.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-x.css(n,"marginTop",!0),left:e.left-i.left-x.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||_e;t&&!x.nodeName(t,"html")&&"static"===x.css(t,"position");)t=t.offsetParent;return t||_e})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;x.fn[e]=function(t){return a(this,function(t,e,n){var i=Pe(t);return void 0===n?i?i[o]:t[e]:void(i?i.scrollTo(r?f.pageXOffset:n,r?n:f.pageYOffset):t[e]=n)},e,t,arguments.length,null)}}),x.each(["top","left"],function(t,n){x.cssHooks[n]=$t(y.pixelPosition,function(t,e){return e?(e=E(t,n),qt.test(e)?x(t).position()[n]+"px":e):void 0})}),x.each({Height:"height",Width:"width"},function(r,s){x.each({padding:"inner"+r,content:s,"":"outer"+r},function(i,t){x.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return a(this,function(t,e,n){var i;return x.isWindow(t)?t.document.documentElement["client"+r]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+r],i["scroll"+r],t.body["offset"+r],i["offset"+r],i["client"+r])):void 0===n?x.css(t,e,o):x.style(t,e,n,o)},s,n?t:void 0,n,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var qe=f.jQuery,$e=f.$;return x.noConflict=function(t){return f.$===x&&(f.$=$e),t&&f.jQuery===x&&(f.jQuery=qe),x},typeof D==b&&(f.jQuery=f.$=x),x}),define("lib-shim/jquery",["jquery"],function(t){"use strict";return t.noConflict()}),define("tracking/tealium-utag-data",["require","jquery"],function(t){"use strict";let i=t("jquery"),o="tealiumData";return{read:function(t){var e=i(document),n=e.find("#initial-tealium-data"),e=e.find("#tlmdata").data(o)||n.data(o)||void 0,t=(e&&(e.pageViewGuid=t.viewGuid,e.clickGenericText=""),n.data("tealiumEnvironment")||void 0);return{data:e||{},environment:t}}}}),!function(t){define("ba-debug",[],function(){return function(){return window.debug=function(){for(var i,o,r=this,s=Array.prototype.slice,a=r.console,e={},l=9,u=["error","warn","info","debug","log"],t="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),n=t.length,c=[];0<=--n;)!function(t){e[t]=function(){0!==l&&a&&a[t]&&a[t].apply(a,arguments)}}(t[n]);for(n=u.length;0<=--n;)!function(n,i){e[i]=function(){var t=s.call(arguments),e=[i].concat(t);c.push(e),p(e),a&&(e=n,0<l?e<l:u.length+l<=e)&&(a.firebug?a[i].apply(r,t):a[i]?a[i](t):a.log(t))}}(n,u[n]);function p(t){!i||!o&&a&&a.log||i.apply(r,t)}return e.setLevel=function(t){l="number"==typeof t?t:9},e.setCallback=function(){var t=s.call(arguments),e=c.length,n=e;for(i=t.shift()||null,o="boolean"==typeof t[0]&&t.shift(),n-="number"==typeof t[0]?t.shift():e;n<e;)p(c[n++])},e}(),t.debug=debug}.apply(t,arguments)})}(this),define("debug",["require","ba-debug"],function(t){"use strict";var n=t("ba-debug");return["error","warn","info","debug","log"].forEach(function(t){var e=n[t];n[t]=function(){var t=[].slice.call(arguments);t.unshift(new Date),e.apply(n,t)}}),n}),!function(t){"function"==typeof define&&define.amd?define("jquery-cookie",["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(p){var n=/\+/g;function d(t){return f.raw?t:encodeURIComponent(t)}function h(t,e){t=f.raw?t:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(n," ")),f.json?JSON.parse(t):t}catch(t){}}(t);return p.isFunction(e)?e(t):t}var f=p.cookie=function(t,e,n){var i,o;if(void 0!==e&&!p.isFunction(e))return"number"==typeof(n=p.extend({},f.defaults,n)).expires&&(i=n.expires,(o=n.expires=new Date).setTime(+o+864e5*i)),document.cookie=[d(t),"=",(o=e,d(f.json?JSON.stringify(o):String(o))),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("");for(var r=t?void 0:{},s=document.cookie?document.cookie.split("; "):[],a=0,l=s.length;a<l;a++){var u=s[a].split("="),c=(c=u.shift(),f.raw?c:decodeURIComponent(c)),u=u.join("=");if(t&&t===c){r=h(u,e);break}t||void 0===(u=h(u))||(r[c]=u)}return r};f.defaults={},p.removeCookie=function(t,e){return void 0!==p.cookie(t)&&(p.cookie(t,"",p.extend({},e,{expires:-1})),!p.cookie(t))}}),define("core/jqueryajax",["require","jquery","jquery-cookie"],function(t){function e(){}var a=t("jquery");t("jquery-cookie");function l(t,e,n){if(t.push){for(var i=0;i<t.length;i++)if(t[i].name===e)return t;t.push({name:e,value:n})}else"string"==typeof t?t+="&"+encodeURIComponent(e)+"="+encodeURIComponent(n):t[e]=t[e]||n;return t}return e.prototype.get=function(t,e,n,i){return this.request("GET",t,e,n,i)},e.prototype.post=function(t,e,n,i){return this.request("POST",t,e,n,i)},e.prototype.request=function(t,e,n,i,o){n=n||{},i=i||{};var r,s="http"===e.substr(0,4),s=(s||(i=l(i,"ajax",1)),s||"POST"!==t||(i=function(t){var e=a.cookie("csrftoken");e&&(t=l(t,"csrfmiddlewaretoken",e));return t}(i)),{type:t,cache:n.cache,headers:n.headers,dataType:n.dataType,traditional:n.traditional,data:i}),i=(t=e,void 0===(n=s).async&&(n.async=!0),r=a.ajax(t,{cache:n.cache,headers:n.headers,type:n.type,dataType:n.dataType,traditional:n.traditional,data:n.data,xhr:"json"==n.dataType&&window.IEXMLHttpRequest?window.IEXMLHttpRequest:a.ajaxSettings.xhr,async:n.async}),(t=new Promise(function(t,i){r.done(t),r.fail(function(t,e,n){i(t.responseJSON)})})).abort=r.abort,t);return i.then(function(t){var e=null;t&&t.error&&(e=new Error(t.error.message)),o&&o(e,t)}),i.catch(function(t){o&&o(new Error(t))}),i},e}),define("core/ajax",["core/jqueryajax"],function(t){return new t}),define("core/media-size-v2",["require","jquery"],function(t){"use strict";var t=t("jquery"),e=t("<span>",{id:"media-test"}),n=t("<span>",{class:"visible-xs-inline"}),i=t("<span>",{class:"visible-sm-inline"}),o=t("<span>",{class:"visible-md-inline"}),r=t("<span>",{class:"visible-lg-inline"});return n.appendTo(e),i.appendTo(e),o.appendTo(e),r.appendTo(e),e.appendTo("body"),{getMediaSize:function(){return"none"!==n.css("display")?"xs":"none"!==i.css("display")?"sm":"none"!==o.css("display")?"md":"none"!==r.css("display")?"lg":null},isMobile:function(){return"xs"===this.getMediaSize()},breakpoints:["xs","sm","md","lg"]}}),define("player/playlink-handler",["require","jquery","lodash","core/ajax","core/media-size-v2"],function(t){"use strict";function o(t,e){this.$el=t,this.app=e}var r=t("jquery"),i=t("lodash"),e=t("core/ajax"),s=t("core/media-size-v2");function n(t,e){var n=t.length?t[t.length-1]:null;return n&&e.trackUrl===n.trackUrl||t.push(e),t}return o.prototype.STARTED_BY_PLAYLINK="playlink",o.prototype.STARTED_BY_SINGLE_PLAYLINK="single-playlink",o.prototype.STARTED_BY_STATION_BUTTON="station-playlink",o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK="video-preview-playlink",o.prototype.start=function(){var i;this.app.player&&(i=this.play.bind(this),this.$el.on("click",".js-playlink",function(t){t.preventDefault();var e,t=r(t.currentTarget),n=o.prototype.STARTED_BY_PLAYLINK,t=(t.parents(".js-video-preview-playlink").length&&(n=o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK),t.is("[data-single-track]")||s.isMobile()?(e=[t],n=o.prototype.STARTED_BY_SINGLE_PLAYLINK):e=this.findAllFollowingPlaylinks(t),this.tracksFromPlaylinks(e,n));i(t)}.bind(this)),this.$el.on("click",".js-playlink-station",function(t){t=r(t.currentTarget);this.stationUrl=t.data("stationUrl"),this.stationPage=1,this.retrieveStationTracks(function(t){i(t)})}.bind(this)),this.$el.on("click","[data-play-all]",function(t){t.preventDefault();var t=r(t.currentTarget),e=t.attr("data-playlink-affiliate"),t=t.attr("data-play-all"),t=this.$el.find("#"+t),t=this.findAllPlaylinksIn(t,e),e=this.tracksFromPlaylinks(t,o.prototype.STARTED_BY_PLAYLINK);i(e)}.bind(this)),this.app.eventMediator.subscribe("player.track.tuning",this.trackStarted.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.trackStopped.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.trackStopped.bind(this)))},o.prototype.retrieveStationTracks=function(n){this.stationUrl&&e.get(this.stationUrl,null,{page:this.stationPage},function(t,e){e=e&&e.playlist,e=this.tracksFromPlaylist(e);n&&n(e)}.bind(this))},o.prototype.trackStarted=function(t){var e=this;t.playlink&&(e.$el.find("[data-player-now-playing]").removeAttr("data-player-now-playing"),t.playlink.attr("data-player-now-playing","")),e.app.player.isLast()&&(e.stationPage++,e.retrieveStationTracks(function(t){e.app.player.queue(t)}))},o.prototype.trackStopped=function(){this.$el.find("[data-player-now-playing]").removeAttr("data-player-now-playing")},o.prototype.stop=function(){this.$el.off("click",".js-playlink")},o.prototype.play=function(t){0===t.length?this.app.eventMediator.publish("player.playlist.request.error"):(this.app.player.queue(t,!0),this.app.player.play())},o.prototype.findAllFollowingPlaylinks=function(e){var t=e.attr("data-playlink-affiliate"),n=this.$el.find(".js-playlink").toArray(),n=this.filterPlaylinksByAffiliate(n,t);return i.tail(n,function(t){return!r(t).is(e)})},o.prototype.findAllPlaylinksIn=function(t,e){t=t.find(".js-playlink").toArray();return this.filterPlaylinksByAffiliate(t,e)},o.prototype.filterPlaylinksByAffiliate=function(t,e){return t.filter(function(t){return r(t).attr("data-playlink-affiliate")===e})},o.prototype.tracksFromPlaylist=function(t){return t?t.filter(function(t){return t.playlinks&&t.playlinks.length}).map(function(t){var e={trackName:t.name,artistName:t.artists[0].name,artistUrl:t.artists[0].url,trackUrl:t.url,startedBy:o.prototype.STARTED_BY_STATION_BUTTON};return t.playlinks.forEach(function(t){e[t.affiliate+"Id"]=t.id,e[t.affiliate+"Url"]=t.url}),e}):[]},o.prototype.tracksFromPlaylinks=function(t,e){return t.map(function(t,e){e=r(e),t={playlink:e,startedBy:t};return r.extend(t,e.data())}.bind(this,e)).reduce(n,[])},o}),define("tracking/event-tracking",["require","debug","jquery","player/playlink-handler"],function(t){"use strict";function e(t){t.subscribe("player.track.playing",this.playerEventHandler.bind(this,"PlayTrack")),t.subscribe("player.track.paused",this.playerEventHandler.bind(this,"PauseTrack")),t.subscribe("player.track.finished",this.playerEventHandler.bind(this,"PlayTrackFinished")),t.subscribe("player.track.playing",this.trackPlayHandler.bind(this)),t.subscribe("player.track.positionChanged",this.positionChangedHandler.bind(this)),t.subscribe("autoplay-video.ad-start",this.trackEvent.bind(this,"VideoAdStart")),t.subscribe("autoplay-video.ad-end",this.trackEvent.bind(this,"VideoAdComplete")),t.subscribe("autoplay-video.video-start",this.trackEvent.bind(this,"VideoStart")),t.subscribe("autoplay-video.video-end",this.trackEvent.bind(this,"VideoComplete")),t.subscribe("stubhub.search",this.trackEvent.bind(this,"StubHubCheck")),t.subscribe("stubhub.match",this.trackEvent.bind(this,"StubHubMatch")),t.subscribe("stubhub.nomatch",this.trackEvent.bind(this,"StubHubNoMatch")),t.subscribe("playlisting.import.spotify",this.trackEvent.bind(this,"Import","Spotify")),t.subscribe("playlisting.import.youtube",this.trackEvent.bind(this,"Import","Youtube")),t.subscribe("playlisting.import.apple-music",this.trackEvent.bind(this,"Import","AppleMusic")),t.subscribe("onboarding.tourguide.dismiss",this.trackEvent.bind(this,"Tourguide","Dismiss")),t.subscribe("onboarding.tourguide.complete",this.trackEvent.bind(this,"Tourguide","Complete")),t.subscribe("labs.bubblechart.loadmoreusers",this.trackEvent.bind(this,"LabsBubbleChart","LoadMoreUsersClick")),t.subscribe("labs.bubblechart.userSelected",this.trackEvent.bind(this,"LabsBubbleChart","FollowingUserClick")),t.subscribe("labs.bubblechart.followingUsersList.open",this.trackEvent.bind(this,"LabsBubbleChart","FollowingUsersListOpen")),t.subscribe("labs.bubblechart.search.fetch",this.trackEvent.bind(this,"LabsBubbleChart","SearchUserFetch")),t.subscribe("lazy-recs-bar.shown",this.trackEvent.bind(this,"LazyRecsBarShown")),n("body").on("click.event-tracking","[data-analytics-social]",this.socialHandler),n("body").on("click.event-tracking","[data-analytics-action]",this.analyticsHandler.bind(this)),t.subscribe("gallery.visit",this.trackEvent.bind(this,"galleryVisited"))}var i=t("debug"),n=t("jquery"),o=t("player/playlink-handler"),r="TrackDurationExceeded",s="TrackDurationExceededBy5Seconds";return e.prototype={trackEvent:function(t,e,n){window.om&&void 0!==t&&(t={gaEventAction:t},void 0!==e&&(t.gaEventLabel=e),void 0!==n&&(t.gaEventValue=n),window.om.trackEvent(t),i.info("Event tracked",t))},playerEventHandler:function(t,e){e&&e.startedBy===o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK&&(t+="Video"),this.trackEvent(t,e&&e.affiliate)},socialHandler:function(t){window.om&&(t={id:n(t.currentTarget).data("analyticsSocial")},window.om.trackSocialClick(t),i.info("Social event tracked",t))},analyticsHandler:function(t){this.trackEvent(n(t.currentTarget).data("analyticsAction")||"",n(t.currentTarget).data("analyticsLabel")||"",n(t.currentTarget).data("analyticsValue")||"")},trackPlayHandler:function(t){this.durationTracking&&t===this.durationTracking.track||(this.durationTracking={track:t})},positionChangedHandler:function(t){this.durationTracking&&(t>this.durationTracking.track.duration&&!this.durationTracking[r]&&(this.trackEvent(r,this.durationTracking.track.affiliate),this.durationTracking[r]=!0),5<=t-this.durationTracking.track.duration)&&!this.durationTracking[s]&&(this.trackEvent(s,this.durationTracking.track.affiliate),this.durationTracking[s]=!0)}},e}),define("tracking/tealium",["require","core/module-requiring-consent","tracking/tealium-utag-data","tracking/event-tracking"],function(e){"use strict";function t(t){n.call(this,t.consentManager,t.consentManager.SCRIPTS_READY),this.app=t}var n=e("core/module-requiring-consent"),i=e("tracking/tealium-utag-data"),o=e("tracking/event-tracking");return((t.prototype=Object.create(n.prototype)).constructor=t).prototype.start=function(){var t=i.read(this.app).environment;this.loadUtagJS(t),this.eventTracking=new o(this.app.eventMediator),this.app.eventMediator.subscribe("page.transitionComplete",this.recordAsyncPageView.bind(this))},t.prototype.loadUtagJS=function(t){e(["https://tags.tiqcdn.com/utag/cbsi/lastfmsite/"+t+"/utag.js"])},t.prototype.recordAsyncPageView=function(){var t=i.read(this.app).data;window.OneTrust&&window.OneTrust.initializeCookiePolicyHtml(),window.utag&&window.utag.view(t)},t}),define("core/consent-manager",["require","jquery","lodash"],function(n){"use strict";function t(){this.consentGiven={},this.deferred={},this.nextHandleIndex=0;var t=e("body").is("[data-onetrust-prod]");this.loadLibrary(t).then(this.waitForScriptsReady.bind(this)).then(this.checkConsent.bind(this)).then(this.waitForConsent.bind(this))}var e=n("jquery"),i=n("lodash");return t.prototype.SCRIPTS_READY="scriptsReady",t.prototype.PERFORMANCE="2",t.prototype.FUNCTIONAL="3",t.prototype.TARGETING="4",t.prototype.loadLibrary=function(t){return new Promise(function(t,e){n(["optanon"],t)})},t.prototype.waitForScriptsReady=function(){window.cbsoptanon.onScriptsReady(this.scriptsReady.bind(this))},t.prototype.waitForConsent=function(){window.cbsoptanon.ot.addOnConsentChangedHandler(this.checkConsent.bind(this))},t.prototype.scriptsReady=function(){this.handleConsentGiven(this.SCRIPTS_READY)},t.prototype.checkConsent=function(){window.cbsoptanon.ot.performanceAllowed(function(t){t&&this.handleConsentGiven(this.PERFORMANCE)}.bind(this)),window.cbsoptanon.ot.functionalAllowed(function(t){t&&this.handleConsentGiven(this.FUNCTIONAL)}.bind(this)),window.cbsoptanon.ot.targetingAllowed(function(t){t&&this.handleConsentGiven(this.TARGETING)}.bind(this))},t.prototype.handleConsentGiven=function(t){this.consentGiven[t]||(this.consentGiven[t]=!0,this.unblockDeferrals(t))},t.prototype.unblockDeferrals=function(n){i(this.deferred).forEach(function(t,e){this.handleIsForCategory(n,e)&&(delete this.deferred[e],t)&&t()}.bind(this))},t.prototype.deferUntilConsentGiven=function(t,e){if(!this.consentGiven[e])return e=this.nextHandleId(e),this.deferred[e]=t,e;t()},t.prototype.ifConsentGiven=function(t,e){this.consentGiven[e]&&t()},t.prototype.cancelDeferral=function(t){this.deferred[t]=void 0},t.prototype.nextHandleId=function(t){return t+","+this.nextHandleIndex++},t.prototype.handleIsForCategory=function(t,e){return e.split(",")[0]==t},t}),define("shim/youtube",["require"],function(e){"use strict";var t;return function(){return t=t||new Promise(function(t){window.onYouTubeIframeAPIReady=function(){t(window.YT)},e(["youtube-iframe-api"])})}}),!function(R){define("modernizr",[],function(){return function(){var s=window,c=document,T=void 0;function E(t,e){return typeof t===e}function S(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function j(t){return"function"!=typeof c.createElement?c.createElement(t):x?c.createElementNS.call(c,"http://www.w3.org/2000/svg",t):c.createElement.apply(c,arguments)}function o(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function r(t,e,n,i){var o,r,s,a,l="modernizr",u=j("div");(a=c.body)||((a=j(x?"svg":"body")).fake=!0);if(parseInt(n,10))for(;n--;)(r=j("div")).id=i?i[n]:l+(n+1),u.appendChild(r);return(o=j("style")).type="text/css",o.id="s"+l,(a.fake?a:u).appendChild(o),a.appendChild(u),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(c.createTextNode(t)),u.id=l,a.fake&&(a.style.background="",a.style.overflow="hidden",s=w.style.overflow,w.style.overflow="hidden",w.appendChild(a)),o=e(u,t),a.fake?(a.parentNode.removeChild(a),w.style.overflow=s,w.offsetHeight):u.parentNode.removeChild(u),!!o}function _(t,e){var n=t.length;if("CSS"in s&&"supports"in s.CSS){for(;n--;)if(s.CSS.supports(o(t[n]),e))return!0;return!1}if("CSSSupportsRule"in s){for(var i=[];n--;)i.push("("+o(t[n])+":"+e+")");return r("@supports ("+(i=i.join(" or "))+") { #modernizr { position: absolute; } }",function(t){return"absolute"==(t=t,e=null,n="position","getComputedStyle"in s?(i=getComputedStyle.call(s,t,e),o=s.console,null!==i?n&&(i=i.getPropertyValue(n)):o&&o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")):i=!e&&t.currentStyle&&t.currentStyle[n],i);var e,n,i,o})}return T}function i(t,e,n,i,o){var r,s,a=t.charAt(0).toUpperCase()+t.slice(1),l=(t+" "+P.join(a+" ")+a).split(" ");if(E(e,"string")||void 0===e){var u=l,c=e,p=i,d=o;function h(){f&&(delete $.style,delete $.modElem)}if(d=void 0!==d&&d,void 0!==p){l=_(u,p);if(void 0!==l)return l}for(var f,y,m,v,g,b=["modernizr","tspan","samp"];!$.style&&b.length;)f=!0,$.modElem=j(b.shift()),$.style=$.modElem.style;for(m=u.length,y=0;y<m;y++)if(v=u[y],g=$.style[v],~(""+v).indexOf("-")&&(v=S(v)),$.style[v]!==T){if(d||void 0===p)return h(),"pfx"!=c||v;try{$.style[v]=p}catch(t){}if($.style[v]!=g)return h(),"pfx"!=c||v}h()}else{var w=(t+" "+q.join(a+" ")+a).split(" "),x=e,k=n;for(s in w)if(w[s]in x)if(!1===k)return w[s];else{r=x[w[s]];if(E(r,"function")){var C=r;var A=k||x;return function(){return C.apply(A,arguments)};return}else return r}}return!1}function a(t){var e,n=prefixes.length,i=s.CSSRule;if(void 0===i)return T;if(t){if((e=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in i)return"@"+t;for(var o=0;o<n;o++){var r=prefixes[o];if(r.toUpperCase()+"_"+e in i)return"@-"+r.toLowerCase()+"-"+t}}return!1}var t,e,n,l,u,p,d,h,f,y,m=[],v=[],g={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){v.push({name:t,fn:e,options:n})},addAsyncTest:function(t){v.push({name:null,fn:t})}},b=function(){},w=(b.prototype=g,b=new b,c.documentElement),x="svg"===w.nodeName.toLowerCase(),k=(b.addTest("video",function(){var t=j("video"),e=!1;try{(e=!!t.canPlayType)&&((e=new Boolean(e)).ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),e.vp9=t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),e.hls=t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(t){}return e}),{}.toString),C=(b.addTest("svgforeignobject",function(){return!!c.createElementNS&&/SVGForeignObject/.test(k.call(c.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}),b.addTest("csspointerevents",function(){var t=j("a").style;return t.cssText="pointer-events:auto","auto"===t.pointerEvents}),"Moz O ms Webkit"),P=g._config.usePrefixes?C.split(" "):[],q=(g._cssomPrefixes=P,g.atRule=a,g._config.usePrefixes?C.toLowerCase().split(" "):[]),A=(g._domPrefixes=q,{elem:j("modernizr")}),$=(b._q.push(function(){delete A.elem}),{style:A.elem.style});for(d in b._q.unshift(function(){delete $.style}),g.testAllProps=i,g.prefixed=function(t,e,n){return 0===t.indexOf("@")?a(t):(-1!=t.indexOf("-")&&(t=S(t)),e?i(t,e,n):i(t,"pfx"))},v)if(v.hasOwnProperty(d)){if(t=[],(e=v[d]).name&&(t.push(e.name.toLowerCase()),e.options)&&e.options.aliases&&e.options.aliases.length)for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(l=E(e.fn,"function")?e.fn():e.fn,u=0;u<t.length;u++)1===(p=t[u].split(".")).length?b[p[0]]=l:(!b[p[0]]||b[p[0]]instanceof Boolean||(b[p[0]]=new Boolean(b[p[0]])),b[p[0]][p[1]]=l),m.push((l?"":"no-")+p.join("-"))}C=m,f=w.className,y=b._config.classPrefix||"",x&&(f=f.baseVal),b._config.enableJSClass&&(h=new RegExp("(^|\\s)"+y+"no-js(\\s|$)"),f=f.replace(h,"$1"+y+"js$2")),b._config.enableClasses&&(f+=" "+y+C.join(" "+y),x?w.className.baseVal=f:w.className=f),delete g.addTest,delete g.addAsyncTest;for(var M=0;M<b._q.length;M++)b._q[M]();return s.Modernizr=b,R.Modernizr=Modernizr}.apply(R,arguments)})}(this),define("ads/audience-network",[],function(){"use strict";return{loadPrebidApi:function(){return window.AudienceNetworkPrebid?new Promise.resolve(window.AudienceNetworkPrebid):new Promise(function(t){var e,n,i;e=document,n="an-prebid",i=e.getElementsByTagName("script")[0],e.getElementById(n)||((e=e.createElement("script")).id=n,e.src="//connect.facebook.com/en_US/AudienceNetworkPrebid.js",i.parentNode.insertBefore(e,i)),window.anPrebidAsyncInit=function(){t(window.AudienceNetworkPrebid)}})}}}),define("ads/video-ad-url",["require","jquery","ads/audience-network"],function(t){"use strict";var n=t("jquery"),o=t("ads/audience-network");return function(t,e){return((i=t)?o.loadPrebidApi().then(function(t){return new Promise(function(e,n){new t(i).getProfile(function(t){t&&t.token&&"nobid"!==t.token&&e(t.token),n()})})}):new Promise.reject).then(r.bind(null,e,"fan"),r.bind(null,e,""));var i};function r(t,e){(t=(t=t)||{}).bidid=e;e={iu:"/8264/vaw-lastfm/desktop",sz:"640x480",impl:"s",gdfp_req:"1",env:"vp",output:"xml_vmap1",pp:"vpaid_js",unviewed_position_start:"1",url:"[referrer_url]",correlator:"[timestamp]",cust_params:n.param(t||{})};return Promise.resolve("https://pubads.g.doubleclick.net/gampad/ads?"+n.param(e))}}),define("components/cbsi-player",["require","jquery","lodash","shim/youtube","modernizr","ads/video-ad-url"],function(e){"use strict";function t(t,e){this.app=t,this.sessionOptions={partner:"lastfm",nativeControls:!0,autoHide:!1,usesIMA:!0,usesTealium:!1,uvpc:e}}var n,a=e("jquery"),l=e("lodash"),i=e("shim/youtube"),o=e("modernizr"),u=e("ads/video-ad-url"),c=0,r=0;return t.prototype.playVideo=function(t,o,r){var s=t.attr("id")||"cbsiplayer-"+c++;t.attr("id",s),this.createVideoPlayer(s,r.previewImage,r.autoplay).then(function(n){r.mute&&n.mute(),om.getHbParams&&n.setPageContextMetadata(om.getHbParams()),r.events&&l.forOwn(r.events,function(t,e){this.addEventListener(n,e,t)}.bind(this));var t,e,i={type:uvpjs.mediaCapabilities.RP_PLATFORM,vidContId:s,pid:o};r.disableAds?n.loadAndPlayResource(i):(t=this.app.adTargeting(),e=a("body").data("facebook-placement-id"),u(e,t).then(function(t){i.type=uvpjs.mediaCapabilities.RP_IMA,i.adCall=t,n.loadAndPlayResource(i)}))}.bind(this))},t.prototype.destroyPlayer=function(e){this.videoManager().then(function(t){t.destroyVideoPlayer(e.attr("id"))})},t.prototype.isSupported=function(){return!(void 0!==document.documentMode)&&o.video},t.prototype.addEventListener=function(t,e,n){e+="."+r++,t.addEventListener(e,n)},t.prototype.createVideoPlayer=function(i,t,o){return this.videoManager().then(function(e){var n={skin:!0,previewImage:t,enableMutedAutoplay:o,enableUnmutedAutoplay:o};return new Promise(function(t){e.createVideoPlayer(i,t,n)})}.bind(this))},t.prototype.videoManager=function(){return this.loadingVideoManager||(this.loadingVideoManager=this.api().then(this.loadVideoManager.bind(this))),this.loadingVideoManager},t.prototype.loadVideoManager=function(){return new Promise(function(t,e){var n=new uvpjs.VideoManager;n.initialize(this.sessionOptions,t.bind(this,n),e)}.bind(this))},t.prototype.api=function(){return n=n||i().then(function(){return new Promise(function(t){e(["ima","cbsi-player-html5"],t)}.bind(this))}.bind(this))},t}),define("core/dom-require/module-finder",["jquery"],function(r){"use strict";return new function(){var o=this;o.find=function(t){var e=[],n="[data-require]",t=t||r("html"),i=r(n,t);return t.is(n)&&(e=e.concat(o.generateModuleObjects(t))),i.each(function(){e=e.concat(o.generateModuleObjects(r(this)))}),e},o.generateModuleObjects=function(e){return e.data("require").split(",").map(function(t){return{location:t.trim(),element:e}})}}}),define("core/dom-require/module-loader",["require","jquery","core/dom-require/module-finder","lodash"],function(t){"use strict";var n=t("jquery"),e=t("core/dom-require/module-finder"),a=t("lodash");return function(o){var r=this,s=(r.domReady=!1,r.elementCount=0,r.require=t,r._activeModules=[],r.start=function(){r.domReady||(r.preDomReadySearchTimer=setTimeout(r.startPreDomModules,150))},r.startPreDomModules=function(){var t;!r.domReady&&document.body&&(t=r.getElementCount(),r.elementCount<t)&&(r.elementCount=t,r.startAllModules()),r.domReady||(r.preDomReadySearchTimer=setTimeout(r.startPreDomModules,150))},r.getElementCount=function(){return n("*").length},r.handleDomReady=function(){r.domReady=!0,clearTimeout(r.preDomReadySearchTimer),delete r.preDomReadySearchTimer,delete r.elementCount,r.startAllModules()},r.startAllModules=function(t){e.find(t).forEach(function(t){r.startModule(t.location,t.element)})},r.stopAllModules=function(e){r._activeModules.forEach(function(t){t.stopped||e&&n.contains(document,t.element[0])&&!n.contains(e[0],t.element[0])||(t.stopped=!0,a.isFunction(t.module.stop)&&t.module.stop())}),r._activeModules=r._activeModules.filter(function(t){return!t.stopped})},r.startModule=function(e,n){var t=n.data("starting")||{},i=n.data("started")||{};a(i).has(e)||a(t).has(e)||!r.isElementContentLoaded(n)||(t[e]=!0,n.data("starting",t),r.require([e],function(t){s(t,n,e)}))},function(t,e,n){var i=e.data("started")||{};t&&(t=new t(e,o),a.isFunction(t.start))&&(t.start(),i[n]=!0,e.data("started",i),r._activeModules.push({module:t,element:e}))});r.isElementContentLoaded=function(t){if(r.domReady)return!0;for(;0===t.next().length&&!t.is("html");)if(0===(t=t.parent()).length)return!0;return!t.is("html")},o.eventMediator.subscribe("domReady",r.handleDomReady)}}),!function(t){define("jquery-pjax",["jquery"],function(){return function(){function t(t,n,i){var o=this;return this.on("click.pjax",t,function(t){var e=C.extend({},l(n,i));e.container||(e.container=C(this).attr("data-pjax")||o),r(t,e)})}function r(t,e,n){n=l(e,n);var i,e=t.currentTarget;if("A"!==e.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||((i=e).href instanceof SVGAnimatedString&&(i=g(i.getAttribute("href"))),location.protocol!==i.protocol)||location.hostname!==i.hostname||-1<i.href.indexOf("#")&&s(i)==s(location)||t.isDefaultPrevented()||(i={url:i.href,container:C(e).attr("data-pjax"),target:e},i=C.extend({},i,n),n=C.Event("pjax:click"),C(e).trigger(n,[i]),n.isDefaultPrevented())||(h(i),t.preventDefault(),C(e).trigger("pjax:clicked",[i]))}function e(t,e,n){n=l(e,n);var e=t.currentTarget,i=C(e);if("FORM"!==e.tagName.toUpperCase())throw"$.pjax.submit requires a form element";i={type:(i.attr("method")||"GET").toUpperCase(),url:i.attr("action"),container:i.attr("data-pjax"),target:e};if("GET"!==i.type&&void 0!==window.FormData)i.data=new FormData(e),i.processData=!1,i.contentType=!1;else{if(C(e).find(":file").length)return;i.data=C(e).serializeArray()}h(C.extend({},i,n)),t.preventDefault()}function h(u){u=C.extend(!0,{},C.ajaxSettings,h.defaults,u),C.isFunction(u.url)&&(u.url=u.url());var n,i=u.target,c=g(u.url).hash,p=u.context=b(u.container);function d(t,e,n){(n=n||{}).relatedTarget=i;t=C.Event(t,n);return p.trigger(t,e),!t.isDefaultPrevented()}u.data||(u.data={}),C.isArray(u.data)?u.data.push({name:"_pjax",value:p.selector}):u.data._pjax=p.selector,u.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",p.selector),!d("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(n=setTimeout(function(){d("pjax:timeout",[t,u])&&t.abort("timeout")},e.timeout),e.timeout=0);e=g(e.url);c&&(e.hash=c),u.requestUrl=a(e)},u.complete=function(t,e){n&&clearTimeout(n),d("pjax:complete",[t,e,u]),d("pjax:end",[t,u])},u.error=function(t,e,n){var i=w("",t,u),t=d("pjax:error",[t,e,n,u]);"GET"==u.type&&"abort"!==e&&t&&f(i.url)},u.success=function(t,e,n){var i=h.state,o="function"==typeof C.pjax.defaults.version?C.pjax.defaults.version():C.pjax.defaults.version,r=n.getResponseHeader("X-PJAX-Version"),s=w(t,n,u),a=g(s.url);if(c&&(a.hash=c,s.url=a.href),o&&r&&o!==r)f(s.url);else if(s.contents){if(h.state={id:u.id||m(),url:s.url,title:s.title,container:p.selector,fragment:u.fragment,timeout:u.timeout},(u.push||u.replace)&&window.history.replaceState(h.state,s.title,s.url),C.contains(u.container,document.activeElement))try{document.activeElement.blur()}catch(t){}s.title&&(document.title=s.title),d("pjax:beforeReplace",[s.contents,u],{state:h.state,previousState:i}),p.html(s.contents);var l,a=p.find("input[autofocus], textarea[autofocus]").last()[0],r=(a&&document.activeElement!==a&&a.focus(),(o=s.scripts)&&(l=C("script[src]"),o.each(function(){var t,e,n=this.src;l.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=C(this).attr("type"))&&(t.type=e),t.src=C(this).attr("src"),document.head.appendChild(t))})),u.scrollTo);"number"==typeof(r=c&&(i=decodeURIComponent(c.slice(1)),a=document.getElementById(i)||document.getElementsByName(i)[0])?C(a).offset().top:r)&&C(window).scrollTop(r),d("pjax:success",[t,e,n,u])}else f(s.url)},h.state||(h.state={id:m(),url:window.location.href,title:document.title,container:p.selector,fragment:u.fragment,timeout:u.timeout},window.history.replaceState(h.state,document.title)),y(h.xhr),h.options=u;var t,e,o=h.xhr=C.ajax(u);return 0<o.readyState&&(u.push&&!u.replace&&(t=h.state.id,e=v(p),S[t]=e,_.push(t),x(j,0),x(_,h.defaults.maxCacheLength),window.history.pushState(null,"",u.requestUrl)),d("pjax:start",[o,u]),d("pjax:send",[o,u])),h.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return h(C.extend(n,l(t,e)))}function f(t){window.history.replaceState(null,"",h.state.url),window.location.replace(t)}function i(t){A||y(h.xhr);var e,n=h.state,t=t.state;if(t&&t.container){if(A&&T==t.url)return;if(n){if(n.id===t.id)return;e=n.id<t.id?"forward":"back"}var i,o,r,s,a=S[t.id]||[],l=C(a[0]||t.container),a=a[1];l.length?(n&&(o=e,s=n.id,r=v(l),S[s]=r,r="forward"===o?(i=_,j):(i=j,_),i.push(s),(s=r.pop())&&delete S[s],x(i,h.defaults.maxCacheLength)),o=C.Event("pjax:popstate",{state:t,direction:e}),l.trigger(o),r={id:t.id,url:t.url,container:l,push:!1,fragment:t.fragment,timeout:t.timeout,scrollTo:!1},a?(l.trigger("pjax:start",[null,r]),(h.state=t).title&&(document.title=t.title),s=C.Event("pjax:beforeReplace",{state:t,previousState:n}),l.trigger(s,[a,r]),l.html(a),l.trigger("pjax:end",[null,r])):h(r),l[0].offsetHeight):f(location.href)}A=!1}function o(t){var e,n=C.isFunction(t.url)?t.url():t.url,i=t.type?t.type.toUpperCase():"GET",o=C("<form>",{method:"GET"===i?"GET":"POST",action:n,style:"display:none"}),r=("GET"!==i&&"POST"!==i&&o.append(C("<input>",{type:"hidden",name:"_method",value:i.toLowerCase()})),t.data);if("string"==typeof r)C.each(r.split("&"),function(t,e){e=e.split("=");o.append(C("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(C.isArray(r))C.each(r,function(t,e){o.append(C("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof r)for(e in r)o.append(C("<input>",{type:"hidden",name:e,value:r[e]}));C(document.body).append(o),o.submit()}function y(t){t&&t.readyState<4&&(t.onreadystatechange=C.noop,t.abort())}function m(){return(new Date).getTime()}function v(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function a(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function g(t){var e=document.createElement("a");return e.href=t,e}function s(t){return t.href.replace(/#.*/,"")}function l(t,e){return t&&e?e.container=t:e=C.isPlainObject(t)?t:{container:t},e.container&&(e.container=b(e.container)),e}function b(t){if((t=C(t)).length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return C("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function u(t,e){return t.filter(e).add(t.find(e))}function c(t){return C.parseHTML(t,document,!0)}function w(t,e,n){var i,o,r={},s=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return r.url=e?a(g(e)):n.requestUrl,s?(o=C(c(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),i=C(c(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):o=i=C(c(t)),0!==i.length&&(r.title=u(o,"title").last().text(),n.fragment?(e="body"===n.fragment?i:u(i,n.fragment).first()).length&&(r.contents="body"===n.fragment?e:e.contents(),r.title||(r.title=e.attr("title")||e.data("title"))):s||(r.contents=i),r.contents&&(r.contents=r.contents.not(function(){return C(this).is("title")}),r.contents.find("title").remove(),r.scripts=u(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title)&&(r.title=C.trim(r.title)),r}function x(t,e){for(;t.length>e;)delete S[t.shift()]}function p(){return C("meta").filter(function(){var t=C(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function d(){C.fn.pjax=t,C.pjax=h,C.pjax.enable=C.noop,C.pjax.disable=k,C.pjax.click=r,C.pjax.submit=e,C.pjax.reload=n,C.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:p},C(window).on("popstate.pjax",i)}function k(){C.fn.pjax=function(){return this},C.pjax=o,C.pjax.enable=d,C.pjax.disable=C.noop,C.pjax.click=C.noop,C.pjax.submit=C.noop,C.pjax.reload=function(){window.location.reload()},C(window).off("popstate.pjax",i)}var C,A,T,E,S,j,_;C=jQuery,A=!0,T=window.location.href,(E=window.history.state)&&E.container&&(h.state=E),"state"in window.history&&(A=!1),S={},j=[],_=[],C.inArray("state",C.event.props)<0&&C.event.props.push("state"),C.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(C.support.pjax?d:k)()}.apply(t,arguments)})}(this),define("core/browser-api",["require","jquery","jquery-cookie"],function(t){"use strict";var e=t("jquery");return t("jquery-cookie"),{navigator:navigator,WebSocket:WebSocket,window:window,document:document,cookies:{setCookie:e.cookie},download:function(t,e){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},requestFullScreen:function(t){var e=t.requestFullScreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;e&&e.call(t)},exitFullScreen:function(){var t=document.exitFullscreen||document.mozExitFullscreen||document.webkitExitFullscreen;t&&t.call(document)},fullScreenElement:function(){return document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement},isPreloadSupported:function(){try{return document.createElement("link").relList.supports("preload")}catch(t){return!1}}}}),define("core/sensitive-paths",["require","jquery"],function(t){"use strict";var i=t("jquery");return{isSensitivePath:function(t){var e=i("body").data("sensitive-path-regex"),e=new RegExp(e),n=document.createElement("a"),t=(n.href=t,n.pathname);return e.test(t)}}}),define("core/partial-refresh",["require","jquery","lodash","jquery-pjax","core/browser-api","core/sensitive-paths"],function(t){"use strict";var a=t("jquery"),l=t("lodash"),i=(t("jquery-pjax"),t("core/browser-api")),o=t("core/sensitive-paths");return function(t,e,r){var s=this,n="#content";a.pjax.defaults.timeout=1e4,a.pjax.defaults.maxCacheLength=0,s.start=function(){e.subscribe("player.track.playing",s.setPlayerActive),e.subscribe("player.track.paused",s.setPlayerInactive),e.subscribe("player.track.stopped",s.setPlayerInactive),e.subscribe("ads.requested",s.setUntrusted),s.$container=a(n),t.on("click.partial-refresh",n+" a",function(t){var e,n,i,o;t.isDefaultPrevented()||(e=a(t.currentTarget).attr("href"),i=s.isSensitiveUrl(e),o=-1!==l.indexOf(r,e),n=i&&s.untrusted&&s.playerActive,i=i&&s.untrusted||o,n?(o=-1!==e.indexOf("?")?"&":"?",s.openInNewWindow(e+o+"playerActive=1"),t.preventDefault()):i&&(s.loadUrl(e),t.preventDefault()))}),t.pjax('a:not(a[target="_blank"])',n),t.on("pjax:beforeSend.partial-refresh",function(t,e){s.untrusted&&e.setRequestHeader("PJAX-CONTEXT-HAS-ADS","true"),s.beforeSend()}),t.on("click.partial-refresh","form:not([data-no-partial-refresh]) [type=submit][name][value]",function(t){var t=a(t.target),e=(t=t.is("[type=submit][name][value]")?t:t.parents("[type=submit][name][value]")).parents("form"),n=a('<input type="hidden" data-partial-refresh-submit-value />');n.attr({name:t.attr("name"),value:t.attr("value")}),e.append(n)}),t.on("submit.partial-refresh",function(t){t.currentTarget=t.target,a(t.target).is("[data-no-partial-refresh]")||t.isDefaultPrevented()||(a.pjax.submit(t,n),a("[data-partial-refresh-submit-value]").remove())}),t.on("pjax:beforeReplace.partial-refresh",function(t,e){s.beforeReplace(e)}),t.on("pjax:end.partial-refresh",function(t,e,n){e||s.afterReplace()}),t.on("pjax:success.partial-refresh",function(){s.afterReplace()}),t.on("pjax:error.partial-refresh",function(t,e,n,i,o){t.preventDefault(),o.success(e.responseText,e.status,e)})},s.isSensitiveUrl=function(t){return o.isSensitivePath(t)},s.setPlayerActive=function(){s.playerActive=!0},s.setPlayerInactive=function(){s.playerActive=!1},s.setUntrusted=function(){s.untrusted=!0},s.openInNewWindow=function(t){i.window.open(t)},s.loadUrl=function(t){i.window.location.assign(t)},s.beforeSend=function(){e.publish("partialRefresh.beforeSend",s.$container)},s.beforeReplace=function(t){s.removePageSpecificStyles(),s.replaceStylesheets(t),s.updateHeadTags(t),e.publish("partialRefresh.beforeReplace",s.$container)},s.afterReplace=function(){e.publish("partialRefresh.afterReplace",s.$container),s.updateBodyClass(),s.updateHtmlLang()},s.updateHeadTags=function(t){a("head [data-replaceable-head-tag]").remove(),t&&(t=t.filter(".js-replacement-header-tags"),t=a(t.text()),a("head").append(t))},s.updateBodyClass=function(){var t=(t=a("[data-body-class]",s.$container).data("body-class"))||"";/js-focus-visible/.test(document.body.className)&&(t+=" js-focus-visible"),a(document.body).attr("class",t)},s.updateHtmlLang=function(){var t=a("[data-html-lang]",s.$container).data("html-lang");t&&a("html").attr("lang",t)},s.stop=function(){a(document).off(".partial-refresh"),a(document).off(".pjax")},s.replaceContent=function(t){a.pjax({url:t,container:n})},s.replaceStylesheets=function(t){var i;t&&(i=t).each(function(t,e){var n;e&&"LINK"===e.tagName&&a(e).is("[data-stylesheet-name]")&&(e=i.splice(t,1)[0],e=a(t=e),t=a(t).data("stylesheetName"),(n=a("[data-stylesheet-name="+t+"]")).length&&n.attr("href")!==e.attr("href")&&e.on("load",function(){n.remove()}),a("head").append(e))})},s.removePageSpecificStyles=function(){a("[data-stylesheet-name=page-specific]").remove()}}}),!function(n,i){"use strict";var e,o,r,s,a,l,u,t;function c(t){return o[e]=p.apply(i,t),e++}function p(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(i,e):new Function(""+t)()}}function d(t){if(r)setTimeout(p(d,t),0);else{var e=o[t];if(e){r=!0;try{e()}finally{h(t),r=!1}}}}function h(t){delete o[t]}function f(){function t(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(e)&&d(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),a=function(){var t=c(arguments);return n.postMessage(e+t,"*"),t}}n.setImmediate||(e=1,r=!(o={}),s=n.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&t.setTimeout?t:n,"[object process]"==={}.toString.call(n.process)?a=function(){var t=c(arguments);return process.nextTick(p(d,t)),t}:!function(){var t,e;if(n.postMessage&&!n.importScripts)return t=!0,e=n.onmessage,n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}()?a=n.MessageChannel?((u=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(){var t=c(arguments);return u.port2.postMessage(t),t}):s&&"onreadystatechange"in s.createElement("script")?(l=s.documentElement,function(){var t=c(arguments),e=s.createElement("script");return e.onreadystatechange=function(){d(t),e.onreadystatechange=null,l.removeChild(e),e=null},l.appendChild(e),t}):function(){var t=c(arguments);return setTimeout(p(d,t),0),t}:f(),t.setImmediate=a,t.clearImmediate=h)}("undefined"==typeof self?"undefined"==typeof global?this:global:self),define("set-immediate",function(){}),define("core/event-mediator",["jquery","set-immediate"],function(t){"use strict";function e(){this.subscribers={},this.mostRecentMessage={},this.DOM_READY_EVENT="domReady",this.domReady=!1,this.nextSubscriptionId=0,this.PROCESS_NONE="none",this.PROCESS_HEAD="head",window.lfmDomReadyCallback=function(){this.domReady=!0,this.publish(this.DOM_READY_EVENT,!0)}.bind(this),window.lfmDomReady&&window.lfmDomReadyCallback(),t(document).on("keyup",function(t){this.publish("keyup",t)}.bind(this))}return e.prototype.subscribe=function(t,e,n){if(void 0===n&&(n=this.PROCESS_HEAD),"function"!=typeof e)throw new Error("Invalid Argument - callback must be a function");var i=this.nextSubscriptionId++;return this.subscribers[t]||(this.subscribers[t]={}),this.subscribers[t][i]=e,n===this.PROCESS_HEAD&&void 0!==this.mostRecentMessage[t]&&(n=this.mostRecentMessage[t],this.triggerSubscription(e,n)),{id:i,event:t}},e.prototype.triggerSubscription=function(t,e,...n){setImmediate(function(t,e,...n){t(e,...n)}.bind(this,t,e,...n))},e.prototype.publish=function(t,e,...n){if(this.mostRecentMessage[t]=void 0===e?null:e,this.subscribers[t])for(var i in this.subscribers[t])this.subscribers[t].hasOwnProperty(i)&&(i=this.subscribers[t][i],this.triggerSubscription(i,e,...n))},e.prototype.unsubscribe=function(t){t&&"object"==typeof t&&"object"==typeof this.subscribers[t.event]&&delete this.subscribers[t.event][t.id]},e.prototype.reset=function(){this.mostRecentMessage={}},e}),!function(e,n){"object"==typeof module&&module.exports?module.exports=function(t){return t=t||require("lodash"),n(t)}:"function"==typeof define&&define.amd?define("machina",["lodash"],function(t){return n(t,e)}):e.machina=n(e._,e)}(this,function(a,t,l){function e(t){a.extend(this,t),a.defaults(this,p.getDefaultOptions()),this.initialize.apply(this,arguments),h.emit("newfsm",this),this.initialState&&this.transition(this.initialState)}var n,o,r,i,u=[].slice,s="transition",c="handler",p={makeFsmNamespace:(n=0,function(){return"fsm."+n++}),getDefaultOptions:function(){return{initialState:"uninitialized",eventListeners:{"*":[]},states:{},eventQueue:[],namespace:p.makeFsmNamespace(),targetReplayState:"",state:l,priorState:l,_priorAction:"",_currentAction:""}}},d=(a.deepExtend||(o={"*":function(t,e,n){t[e]=n},object:function(t,e,n){t[e]=i({},t[e]||{},n)},array:function(n,i,t){n[i]=[],a.each(t,function(t,e){o[r(t)](n[i],e,t)},this)}},r=function(t){t=t;t=a.isArray(t)?"array":a.isDate(t)?"date":a.isRegExp(t)?"regex":typeof t;return o[t]?t:"*"},i=function(n){return a.each(u.call(arguments,1),function(t){a.each(t,function(t,e){o[r(t)](n,e,t)})}),n},a.mixin({deepExtend:i})),a.extend(e.prototype,{initialize:function(){},emit:function(t){var e=arguments;this.eventListeners["*"]&&a.each(this.eventListeners["*"],function(t){try{t.apply(this,u.call(e,0))}catch(t){console&&void 0!==console.log&&console.log(t.toString())}},this),this.eventListeners[t]&&a.each(this.eventListeners[t],function(t){try{t.apply(this,u.call(e,1))}catch(t){console&&void 0!==console.log&&console.log(t.toString())}},this)},handle:function(t){var e,n,i,o,r,s;this.inExitHandler||(o=this.states,r=this.state,s=u.call(arguments,0),this.currentActionArgs=s,o[r][t]||o[r]["*"]||this["*"]?(i="*"===(e=o[r][t]?t:"*"),o=o[r][e]?(n=o[r][e],r+"."+e):(n=this["*"],"*"),this._currentAction||(this._currentAction=o),this.emit.call(this,"handling",{inputType:t,args:s.slice(1)}),a.isFunction(n)&&(n=n.apply(this,i?s:s.slice(1))),a.isString(n)&&this.transition(n),this.emit.call(this,"handled",{inputType:t,args:s.slice(1)}),this._priorAction=this._currentAction,this._currentAction="",this.processQueue(c)):this.emit.call(this,"nohandler",{inputType:t,args:s.slice(1)}),this.currentActionArgs=l)},transition:function(t){var e;this.inExitHandler||t===this.state||(e=this.state,this.states[t]?(e&&this.states[e]&&this.states[e]._onExit&&(this.inExitHandler=!0,this.states[e]._onExit.call(this),this.inExitHandler=!1),this.targetReplayState=t,this.priorState=e,this.state=t,this.emit.call(this,"transition",{fromState:this.priorState,action:this._currentAction,toState:t}),this.states[t]._onEnter&&this.states[t]._onEnter.call(this),this.targetReplayState===t&&this.processQueue(s)):this.emit.call(this,"invalidstate",{state:this.state,attemptedState:t}))},processQueue:function(t){t=a.filter(this.eventQueue,t===s?function(t){return t.type===s&&(!t.untilState||t.untilState===this.state)}:function(t){return t.type===c},this);this.eventQueue=a.difference(this.eventQueue,t),a.each(t,function(t){this.handle.apply(this,t.args)},this)},clearQueue:function(t,e){var n;t?(t===s?n=function(t){return t.type===s&&(!e||t.untilState===e)}:t===c&&(n=function(t){return t.type===c}),this.eventQueue=a.filter(this.eventQueue,n)):this.eventQueue=[]},deferUntilTransition:function(t){this.currentActionArgs&&(t={type:s,untilState:t,args:this.currentActionArgs},this.eventQueue.push(t),this.emit.call(this,"deferred",{state:this.state,queuedArgs:t}))},deferUntilNextHandler:function(){var t;this.currentActionArgs&&(t={type:c,args:this.currentActionArgs},this.eventQueue.push(t),this.emit.call(this,"deferred",{state:this.state,queuedArgs:t}))},on:function(t,e){var n=this;return n.eventListeners[t]||(n.eventListeners[t]=[]),n.eventListeners[t].push(e),{eventName:t,callback:e,off:function(){n.off(t,e)}}},off:function(t,e){t?this.eventListeners[t]&&(this.eventListeners[t]=e?a.without(this.eventListeners[t],e):[]):this.eventListeners={}}}),e.prototype.trigger=e.prototype.emit,["states","initialState"]),h=(e.extend=function(t,e){n=this,e=e,i={},o=(t=t)&&t.hasOwnProperty("constructor")?t.constructor:function(){var t=u.call(arguments,0);t[0]=t[0]||{};var e=t[0].states||{},e=a.deepExtend(a.cloneDeep(i),{states:e});e.initialState=t[0].initialState||this.initialState,a.extend(t[0],e),n.apply(this,t)},a.deepExtend(o,n),r.prototype=n.prototype,o.prototype=new r,t&&(a.extend(o.prototype,t),a.deepExtend(i,a.transform(t,function(t,e,n){-1!==d.indexOf(n)&&(t[n]=e)}))),e&&a.deepExtend(o,e),(o.prototype.constructor=o).__super__=n.prototype;var n,i,o,t=o;function r(){}return t.extend=this.extend,t},{Fsm:e,utils:p,on:function(t,e){return this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),e},off:function(t,e){this.eventListeners[t]&&(this.eventListeners[t]=a.without(this.eventListeners[t],e))},trigger:function(t){var e=arguments,n=this.eventListeners[t]||[];n&&n.length&&a.each(n,function(t){t.apply(null,u.call(e,1))})},eventListeners:{newFsm:[]}});return h.emit=h.trigger,h}),define("player/provider-player",["require","machina","lodash","debug"],function(t){"use strict";function e(n,t){function e(e){return function(t){t.provider===n&&e.call(i,t.message)}}var i=this;this.providerName=n,this.eventMediator=t,this.stateManager=new(r.extend({providerName:n,publish:this.publish.bind(this)})),t.subscribe("player.provider.proxy.ready",e(this.onPlayerReady)),t.subscribe("player.provider.proxy.stopped",e(this.onPlayerStopped)),t.subscribe("player.provider.proxy.finished",e(this.onPlayerFinished)),t.subscribe("player.provider.proxy.playing",e(this.onPlayerPlaying)),t.subscribe("player.provider.proxy.paused",e(this.onPlayerPaused)),t.subscribe("player.provider.proxy.error",e(this.onPlayerError)),t.subscribe("player.provider.proxy.unavailable",e(this.onPlayerUnavailable)),t.subscribe("player.provider.proxy.positionChanged",e(this.onPlayerPositionChanged))}var n=t("machina"),i=t("lodash"),o=t("debug"),r=n.Fsm.extend({eventListeners:{transition:[function(t){o.info(this.providerName+" player provider transition:",t.fromState,"->",t.toState)}]},initialState:"PlayerUninitialised",states:{PlayerUninitialised:{playerReady:function(t){this.player=t,this.transition("PlayerInitialised")},trackRequested:function(){this.clearQueue(),this.deferUntilTransition("PlayerInitialised")},stopTrack:function(){this.clearQueue(),this.publish("player.provider.stopped")},error:"PlayerError"},PlayerInitialised:{trackRequested:"PlayerTuning",error:"PlayerError"},PlayerStopped:{_onEnter:function(){"PlayerUnavailable"!=this.priorState&&this.publish("player.provider.stopped")},trackRequested:"PlayerTuning",error:"PlayerError"},PlayerFinished:{_onEnter:function(){this.publish("player.provider.finished",this.currentTrack)},trackRequested:"PlayerTuning",error:"PlayerError"},PlayerTuning:{_onEnter:function(){this.currentTrack=this.currentActionArgs[1],this.player.play(this.currentTrack),this.publish("player.provider.tuning")},trackPlaying:"PlayerPlaying",stopTrack:function(){this.player.stop(),this.transition("PlayerStopped")},trackUnavailable:"PlayerUnavailable",error:"PlayerError"},PlayerUnavailable:{_onEnter:function(){this.transition("PlayerStopped"),this.publish("player.provider.unavailable")}},PlayerPlaying:{_onEnter:function(){this.player.resume(),this.publish("player.provider.playing",i.extend(this.currentTrack,{duration:this.player.getDuration()}))},trackRequested:function(){this.deferUntilTransition(),this.transition("PlayerPaused")},stopTrack:function(){this.player.stop()},trackPaused:"PlayerPaused",trackStopped:"PlayerStopped",trackFinished:"PlayerFinished",error:"PlayerError"},PlayerPaused:{_onEnter:function(){this.player.pause(),this.publish("player.provider.paused")},trackRequested:function(){this.deferUntilTransition(),this.transition("PlayerStopped")},stopTrack:function(){this.player.stop()},trackPlaying:"PlayerPlaying",trackStopped:"PlayerStopped",trackFinished:"PlayerFinished",error:"PlayerError"},PlayerError:{_onEnter:function(){var t=this.currentActionArgs[1];o.error("Player error:",t.toString()),alert(t),this.transition("PlayerStopped")}}}});return e.prototype={constructor:e,publish:function(t,e){var n={provider:this.providerName};void 0!==e&&(n.message=e),this.eventMediator.publish(t,n)},playTrack:function(t){this.stateManager.handle("trackRequested",t)},resumeTrack:function(){this.stateManager.handle("trackPlaying")},pauseTrack:function(){this.stateManager.handle("trackPaused")},stopTrack:function(){this.stateManager.handle("stopTrack")},switchDevice:function(){this.stateManager.player.switchDevice()},onPlayerReady:function(t){this.stateManager.handle("playerReady",t)},onPlayerStopped:function(){this.stateManager.handle("trackStopped")},onPlayerFinished:function(){this.stateManager.handle("trackFinished")},onPlayerPlaying:function(){this.stateManager.handle("trackPlaying")},onPlayerPaused:function(){this.stateManager.handle("trackPaused")},onPlayerError:function(t){this.stateManager.handle("error",t)},onPlayerUnavailable:function(){this.stateManager.handle("trackUnavailable")},onPlayerPositionChanged:function(t){this.publish("player.provider.positionChanged",t)}},e}),define("player/media-player",["require","lodash","machina","debug"],function(t){"use strict";function e(t,e){function n(e){return function(t){i.stateManager.currentPlayer&&t.provider===i.stateManager.currentPlayer.providerName&&e.call(i,t.message)}}var i=this;this.players=t,this.eventMediator=e,this.stateManager=new(r.extend({eventMediator:e,players:this.players})),e.subscribe("player.provider.playing",n(this.onPlaying)),e.subscribe("player.provider.paused",n(this.onPaused)),e.subscribe("player.provider.stopped",n(this.onStopped)),e.subscribe("player.provider.finished",n(this.onFinished)),e.subscribe("player.provider.unavailable",n(this.onUnavailable)),e.subscribe("player.provider.positionChanged",n(this.onPositionChanged))}var n=t("lodash"),i=t("machina"),o=t("debug"),r=i.Fsm.extend({eventListeners:{transition:[function(t){o.info("Player transition:",t.fromState,"->",t.toState)}]},initialState:"Ready",states:{Ready:{_onEnter:function(){this.queued&&this.transition("Tuning")},playQueued:"Tuning"},Tuning:{_onEnter:function(){var t=this.queued;delete this.queued,this.currentPlayer=this.findBestAvailablePlayer(t,this.preferredProvider),t=this.augmentWithAffiliate(t),this.eventMediator.publish("player.track.tuning",t),this.currentPlayer.playTrack(t)},playQueued:"Stopping",playing:"Playing",stopped:"Stopped",unavailable:"Unavailable"},Stopping:{_onEnter:function(){this.currentPlayer.stopTrack()},stopped:"Stopped"},Playing:{_onEnter:function(){this.eventMediator.publish("player.track.playing",this.currentActionArgs[1])},pause:function(){this.currentPlayer.pauseTrack()},playQueued:"Stopping",paused:"Paused",stopped:"Stopped",finished:"Finished"},Paused:{_onEnter:function(){this.eventMediator.publish("player.track.paused")},resume:function(){this.currentPlayer.resumeTrack()},playQueued:"Stopping",playing:"Playing",stopped:"Stopped",finished:"Finished"},Stopped:{_onEnter:function(){this.eventMediator.publish("player.track.stopped"),this.transition("Ready")}},Unavailable:{_onEnter:function(){this.eventMediator.publish("player.track.unavailable"),this.transition("Ready")}},Finished:{_onEnter:function(){this.eventMediator.publish("player.track.finished",this.currentActionArgs[1]),this.transition("Ready")}}},findAvailablePlayers:function(e){return n.filter(this.players,function(t){return e[t.providerName+"Id"]})},findBestAvailablePlayer:function(t,e){t=this.findAvailablePlayers(t);return e&&n.find(t,function(t){return t.providerName==e})||t[0]},augmentWithAffiliate:function(t){(t=n.clone(t)).affiliate=this.currentPlayer.providerName;var e=this.findAvailablePlayers(t);return t.availableAffiliates=n.map(e,"providerName"),t}});return e.prototype={playTrack:function(t,e){this.stateManager.queued=t,e&&(this.stateManager.preferredProvider=e),this.stateManager.handle("playQueued")},pauseTrack:function(){this.stateManager.handle("pause")},resumeTrack:function(){this.stateManager.handle("resume")},switchDevice:function(){this.stateManager.currentPlayer.switchDevice()},onPlaying:function(t){this.stateManager.handle("playing",t)},onPaused:function(){this.stateManager.handle("paused")},onStopped:function(){this.stateManager.handle("stopped")},onFinished:function(t){this.stateManager.handle("finished",t)},onUnavailable:function(){this.stateManager.handle("unavailable")},onPositionChanged:function(t){this.eventMediator.publish("player.track.positionChanged",t)}},e}),define("player/queue",[],function(){"use strict";function t(){this.items=[],this.pointer=0}return t.prototype={add:function(t){this.items.push(t)},clear:function(){this.items=[],this.pointer=0},replaceRemaining:function(t){this.clearRemaining(),this.items=this.items.concat(t)},current:function(){return this.items[this.pointer]},next:function(){if(!this.isLast())return this.items.length&&(this.pointer=Math.min(this.items.length-1,this.pointer+1)),this.current()},previous:function(){return this.pointer=Math.max(0,this.pointer-1),this.current()},removeCurrent:function(){this.items.splice(this.pointer,1)},isLast:function(){return!this.items.length||this.pointer===this.items.length-1},isEmpty:function(){return 0===this.items.length},clearRemaining:function(){var t=this.pointer+1;this.items.splice(t,this.items.length-t)}},t}),define("player/player",["require","player/queue"],function(t){"use strict";function e(t,e){this.mediaPlayer=t,this.playQueue=new n,this.eventMediator=e,this.eventMediator.subscribe("player.track.finished",this.onFinished.bind(this)),this.eventMediator.subscribe("player.track.unavailable",this.onUnavailable.bind(this)),this.eventMediator.subscribe("player.track.positionChanged",this.onPositionChanged.bind(this))}var n=t("player/queue");return e.prototype={RESTART_TIME_LIMIT:5,queue:function(t,e=!1){e&&this.playQueue.clear(),this.playQueue.replaceRemaining(t),this.eventMediator.publish("player.track.added")},play:function(t){this.mediaPlayer.playTrack(this.playQueue.current(),t)},pause:function(){this.mediaPlayer.pauseTrack()},resume:function(){this.mediaPlayer.resumeTrack()},next:function(){var t=this.playQueue.next();t&&this.mediaPlayer.playTrack(t)},previous:function(){var t=this.position<this.RESTART_TIME_LIMIT?this.playQueue.previous():this.playQueue.current();t&&this.mediaPlayer.playTrack(t)},isLast:function(){return this.playQueue.isLast()},switchDevice:function(){this.mediaPlayer.switchDevice()},onPositionChanged:function(t){this.position=t},onUnavailable:function(){this.playQueue.removeCurrent();var t=this.playQueue.current();t&&this.mediaPlayer.playTrack(t)},onFinished:function(){this.next()}},e}),define("core/form",[],function(){"use strict";return{readFormData:function(t){return t.serializeArray().reduce(e,{})}};function e(t,e){return t[e.name]=e.value,t}}),!function(t){define("jquery-popup-overlay",["jquery"],function(){return function(){var d,h,f,o,y,r,m,v,g,b,w,a,x,k,s;d=jQuery,y=d(window),r={},m=[],v=[],b=[],w=g=null,a=/(iPad|iPhone|iPod)/.test(navigator.userAgent),x={_init:function(t){var e=d(t),n=e.data("popupoptions");v[t.id]=!1,m[t.id]=0,e.data("popup-initialized")||(e.attr("data-popup-initialized","true"),x._initonce(t)),n.autoopen&&setTimeout(function(){x.show(t,0)},0)},_initonce:function(n){var t,e,i=d(n),o=d("body"),r=i.data("popupoptions"),s=(g=parseInt(o.css("margin-right"),10),w=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,r.scrolllock&&void 0===h&&(t=(s=d('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),h=t.innerWidth()-t.height(99).innerWidth(),s.remove()),i.attr("id")||i.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),i.addClass("popup_content"),r.background&&!d("#"+n.id+"_background").length&&(o.append('<div id="'+n.id+'_background" class="popup_background"></div>'),(e=d("#"+n.id+"_background")).css({opacity:0,visibility:"hidden",backgroundColor:r.color,position:"fixed",top:0,right:0,bottom:0,left:0}),r.setzindex&&!r.autozindex&&e.css("z-index","100000"),r.transition)&&e.css("transition",r.transition),o.append(n),i.wrap('<div id="'+n.id+'_wrapper" class="popup_wrapper" />'),(t=d("#"+n.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),a&&((e=d("#"+n.id+"_background")).css("cursor","pointer"),d(r.pagecontainer).css("cursor","pointer")),"overlay"==r.type&&!r.absolute&&r.background&&(t.css("overflow","auto"),t[0].style.WebkitOverflowScrolling="touch"),i.css({opacity:0,visibility:"hidden","pointer-events":"auto",display:"inline-block"}),r.setzindex&&!r.autozindex&&t.css("z-index","100001"),r.outline||i.css("outline","none"),r.transition&&(i.css("transition",r.transition),t.css("transition",r.transition)),i.attr("aria-hidden",!0),"overlay"==r.type&&(i.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),t.css({position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"}),t.append('<div class="popup_align" />'),d(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),i.attr("role","dialog"),r.openelement||"."+n.id+"_open");d(s).each(function(t,e){d(e).attr("data-popup-ordinal",t),e.id||d(e).attr("id","open_"+parseInt(1e8*Math.random(),10))}),i.attr("aria-labelledby")||i.attr("aria-label")||i.attr("aria-labelledby",d(s).attr("id")),"hover"==r.action?(r.keepfocus=!1,d(s).on("mouseenter",function(){x.show(n,d(this).data("popup-ordinal"))}),d(s).on("mouseleave",function(t){x.hide(n,t)})):d(document).on("click.jqp",s,function(t){t.preventDefault();var e=d(this).data("popup-ordinal");setTimeout(function(){x.show(n,e)},0)}),r.closebutton&&x.addclosebutton(n),r.detach?i.detach():i.hide()},show:function(t,e){var n=d(t);if(!n.data("popup-visible")){n.data("popup-initialized")||x._init(t),n.attr("data-popup-initialized","true");var i=d("body"),o=n.data("popupoptions"),r=d("#"+t.id+"_wrapper"),s=d("#"+t.id+"_background");if(k(t,e,o.beforeopen),v[t.id]=e,setTimeout(function(){b.push(t.id)},0),o.autozindex){for(var a=document.getElementsByTagName("*"),l=a.length,u=0,c=0;c<l;c++){var p=d(a[c]).css("z-index");"auto"!==p&&u<(p=parseInt(p,10))&&(u=p)}m[t.id]=u,o.background&&0<=m[t.id]&&d("#"+t.id+"_background").css({zIndex:m[t.id]+1}),0<=m[t.id]&&r.css({zIndex:m[t.id]+2})}o.detach&&r.prepend(t),n.show(),f=setTimeout(function(){r.css({visibility:"visible",opacity:1}),d("html").addClass("popup_visible").addClass("popup_visible_"+t.id),r.addClass("popup_wrapper_visible")},20),o.scrolllock&&(i.css("overflow","hidden"),i.height()>y.height())&&i.css("margin-right",g+h),n.css({visibility:"visible",opacity:1}),o.background&&(s.css({visibility:"visible",opacity:o.opacity}),setTimeout(function(){s.css({opacity:o.opacity})},0)),n.data("popup-visible",!0),x.reposition(t,e),n.data("focusedelementbeforepopup",document.activeElement),n.attr("tabindex",-1),setTimeout(function(){"closebutton"===o.focuselement?d("#"+t.id+" ."+t.id+"_close:first").focus():o.focuselement?d(o.focuselement).focus():!0!==o.focuselement&&!o.keepfocus||n.focus()},o.focusdelay),o.keepfocus&&d(o.pagecontainer).attr("aria-hidden",!0),n.attr("aria-hidden",!1),k(t,e,o.onopen),w?r.one("transitionend",function(){k(t,e,o.opentransitionend)}):k(t,e,o.opentransitionend),"tooltip"==o.type&&d(window).on("resize."+t.id,function(){x.reposition(t,e)})}},hide:function(t,e,n){var i,o,r,s,a,l=d.inArray(t.id,b);-1!==l&&(f&&clearTimeout(f),i=d("body"),o=d(t),r=o.data("popupoptions"),s=d("#"+t.id+"_wrapper"),a=d("#"+t.id+"_background"),o.data("popup-visible",!1),1===b.length?d("html").removeClass("popup_visible").removeClass("popup_visible_"+t.id):d("html").hasClass("popup_visible_"+t.id)&&d("html").removeClass("popup_visible_"+t.id),b.splice(l,1),s.hasClass("popup_wrapper_visible")&&s.removeClass("popup_wrapper_visible"),r.keepfocus&&!n&&setTimeout(function(){d(o.data("focusedelementbeforepopup")).is(":visible")&&o.data("focusedelementbeforepopup").focus()},0),s.css({visibility:"hidden",opacity:0}),o.css({visibility:"hidden",opacity:0}),r.background&&a.css({visibility:"hidden",opacity:0}),d(r.pagecontainer).attr("aria-hidden",!1),o.attr("aria-hidden",!0),k(t,v[t.id],r.onclose,e),w&&"0s"!==o.css("transition-duration")?o.one("transitionend",function(){o.data("popup-visible")||(r.detach?o.detach():o.hide()),r.scrolllock&&setTimeout(function(){d.grep(b,function(t){return d("#"+t).data("popupoptions").scrolllock}).length||i.css({overflow:"visible","margin-right":g})},10),k(t,v[t.id],r.closetransitionend)}):(r.detach?o.detach():o.hide(),r.scrolllock&&setTimeout(function(){d.grep(b,function(t){return d("#"+t).data("popupoptions").scrolllock}).length||i.css({overflow:"visible","margin-right":g})},10),k(t,v[t.id],r.closetransitionend)),"tooltip"==r.type)&&d(window).off("resize."+t.id)},toggle:function(t,e){d(t).data("popup-visible")?x.hide(t):setTimeout(function(){x.show(t,e)},0)},reposition:function(t,e){var n,i=d(t),o=i.data("popupoptions"),r=d("#"+t.id+"_wrapper");e=e||0,"tooltip"==o.type?(r.css({position:"absolute"}),n=(e=o.tooltipanchor?d(o.tooltipanchor):o.openelement?d(o.openelement).filter('[data-popup-ordinal="'+e+'"]'):d("."+t.id+'_open[data-popup-ordinal="'+e+'"]')).offset()||{left:0,top:0},"right"==o.horizontal?r.css("left",n.left+e.outerWidth()+o.offsetleft):"leftedge"==o.horizontal?r.css("left",n.left+o.offsetleft):"left"==o.horizontal?r.css("right",y.width()-n.left-o.offsetleft):"rightedge"==o.horizontal?r.css("right",y.width()-n.left-e.outerWidth()-o.offsetleft):r.css("left",n.left+e.outerWidth()/2-i.outerWidth()/2-parseFloat(i.css("marginLeft"))+o.offsetleft),"bottom"==o.vertical?r.css("top",n.top+e.outerHeight()+o.offsettop):"bottomedge"==o.vertical?r.css("top",n.top+e.outerHeight()-i.outerHeight()+o.offsettop):"top"==o.vertical?r.css("bottom",y.height()-n.top-o.offsettop):"topedge"==o.vertical?r.css("bottom",y.height()-n.top-i.outerHeight()-o.offsettop):r.css("top",n.top+e.outerHeight()/2-i.outerHeight()/2-parseFloat(i.css("marginTop"))+o.offsettop)):"overlay"==o.type&&(o.horizontal?r.css("text-align",o.horizontal):r.css("text-align","center"),o.vertical?i.css("vertical-align",o.vertical):i.css("vertical-align","middle"),o.absolute&&r.css({position:"absolute",top:window.scrollY}),o.background||(r.css({"pointer-events":"none"}),o.absolute)||s(t)||(i.css("overflow","auto"),i[0].style.WebkitOverflowScrolling="touch",i.css("max-height","calc(100% - "+i.css("margin-top")+" - "+i.css("margin-bottom")+")")))},addclosebutton:function(t){var e=d(t).data("popupoptions").closebuttonmarkup?d(r.closebuttonmarkup).addClass(t.id+"_close"):'<button class="popup_close '+t.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">×</span></button>';d(t).data("popup-initialized")&&d(t).append(e)}},k=function(t,e,n){var i,o=d(t).data("popupoptions");void 0!==o&&(o=o.openelement||"."+t.id+"_open",o=d(o+'[data-popup-ordinal="'+e+'"]'),"function"==typeof n)&&(i=[].slice.call(arguments,3),o=[t,o].concat(i),n.apply(d(t),o))},s=function(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},d(document).on("keydown",function(t){var e;b.length&&(e=document.getElementById(b[b.length-1]),d(e).data("popupoptions").escape)&&27==t.keyCode&&x.hide(e,t)}),d(document).on("mousedown",function(t){o=t.target}),d(document).on("click",function(t){var e,n,i;b.length&&(e=b[b.length-1],n=document.getElementById(e),i=d(n).data("popupoptions").closeelement?d(n).data("popupoptions").closeelement:"."+n.id+"_close",d(t.target).closest(i).length&&(t.preventDefault(),x.hide(n,t)),d(n).data("popupoptions"))&&d(n).data("popupoptions").blur&&!d(t.target).closest(d(n).data("popupoptions").blurignore).length&&!d(t.target).closest("#"+e).length&&!d(o).closest("#"+e).length&&2!==t.which&&d(t.target).is(":visible")&&(d(n).data("popupoptions").background?(x.hide(n,t),t.preventDefault()):x.hide(n,t,!0))}),d(document).on("keydown",function(t){var e,n,i,o;b.length&&9==t.which&&(e=document.getElementById(b[b.length-1]),d(e).data("popupoptions").keepfocus)&&(n=d(e).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),o=d(":focus"),i=n.length,o=n.index(o),0===i?(d(e).focus(),t.preventDefault()):t.shiftKey?0===o&&(n.get(i-1).focus(),t.preventDefault()):o==i-1&&(n.get(0).focus(),t.preventDefault()))}),d.fn.popup=function(i){return this.each(function(){var t,e=d(this),n=d.extend(!0,{},d.fn.popup.defaults);i&&"tooltip"===i.type&&(n.background=!1),"object"==typeof i?(t=d.extend({},n,e.data("popupoptions"),i),e.data("popupoptions",t),r=e.data("popupoptions"),x._init(this)):"string"==typeof i?(e.data("popupoptions")||(e.data("popupoptions",n),r=e.data("popupoptions")),x[i].call(this,this)):(e.data("popupoptions")||(e.data("popupoptions",n),r=e.data("popupoptions")),x._init(this))})},d.fn.popup.destroyall=function(){for(var t=0;t<b.length;t++)d("#"+b[t]).popup("hide");d(".popup_wrapper").remove(),d(".popup_background").remove(),d(document).off("click.jqp")},d.fn.popup.defaults={type:"overlay",absolute:!1,autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,blurignore:null,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}.apply(t,arguments)})}(this),define("components/modal",["require","jquery","core/ajax","core/form","jquery-popup-overlay","jquery-cookie"],function(t){"use strict";function e(t){this.app=t,this.closeTimeout}var a=t("jquery"),l=t("core/ajax"),r=t("core/form");t("jquery-popup-overlay"),t("jquery-cookie");return e.prototype.open=function(t,e){this.close(),this.request&&this.request.abort();var n=e&&e.actions,i=e&&e.onclose,o=e&&e.onopen,r=e&&e.post,s=e&&e.get,e=e&&e.onmessage,n=this.onLoadContent.bind(this,n,i,o,e);this.request=r?l.post(t,null,r,n):l.get(t,null,s,n),this.app.eventMediator.publish("modal.loading")},e.prototype.onLoadContent=function(t,e,n,i,o,r){this.close(),this.app.eventMediator.publish("modal.loadingComplete");var r=a(r),s=r.find("[data-modal-message]");if(s.length&&i&&i(s.text()),r.find("[data-modal-dont-show]").length)return this.followModalRedirect(r);this.show(r,t,e,n,i)},e.prototype.close=function(){a(".popup_content").popup("hide")},e.prototype.show=function(t,n,e,i,o){this.app.eventMediator.publish("modal.show");var r=a(".js-modal-template").html(),s=a(r),r=(s.appendTo("body"),s.find("[js-modal-body]").replaceWith(t),s.find("[data-modal-type]").data("modal-type")),t=(r&&(r=r.split(",")).forEach(function(t){s.addClass("modal-dialog--"+t)}),n&&s.on("click submit",function(t){var e=a(t.target).data("modal-action"),e=n[e];e&&(t.preventDefault(),e(t))}),s.on("submit","form[data-modal-form]",this.onModalFormSubmit.bind(this,n,e,o)),s.on("submit","form[data-modal-form-pure]",this.onSimpleModalSubmit.bind(this,n,e,o)),{autoopen:!0,detach:!0,closeelement:".js-close",setzindex:!1,opacity:.8,pagecontainer:"#content",onclose:this.onClose.bind(this,e),onopen:function(){this.app.moduleLoader.startAllModules(s),i&&i()}.bind(this)}),r=s.find('input[type="text"], input[type="url"]');r.length&&(t.focuselement=r[0]),s.popup(t),s.find("[data-modal-autoclose]").length&&this.autoClose(4e3),s.find("[data-modal-close-immediately]").length&&this.autoClose(0)},e.prototype.onSimpleModalSubmit=function(t,e,n,i){this.close()},e.prototype.onModalFormSubmit=function(t,e,n,i){i.preventDefault();var i=a(i.target),o=i.attr("action"),i=r.readFormData(i);this.app.eventMediator.publish("modal.loading"),l.post(o,null,i,this.onLoadContent.bind(this,t,e,null,n))},e.prototype.autoClose=function(t){this.closeTimeout=setTimeout(function(){this.app.eventMediator.publish("modal.close"),this.close()}.bind(this),t)},e.prototype.onClose=function(t,e,n,i){t&&t(e,n,i),this.app.eventMediator.publish("modal.close"),clearTimeout(this.closeTimeout);t=a(e),t.length&&this.app.moduleLoader.stopAllModules(t),n=i&&a(i.target).closest("a"),e=n&&n.attr("href");if(!e)return this.followModalRedirect(t)},e.prototype.followModalRedirect=function(t){t=t.find("[data-modal-redirect-on-close]").data("modalRedirectOnClose");t&&this.app.loadUrl(t)},e}),!function(){var t,n,e=this;if("function"==typeof require)try{var i=require("crypto").randomBytes,s=i&&function(){return i(16)}}catch(t){}!s&&e.crypto&&crypto.getRandomValues&&(t=new Uint8Array(16),s=function(){return crypto.getRandomValues(t),t}),s||(n=new Array(16),s=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n});for(var a="function"==typeof Buffer?Buffer:Array,o=[],r={},l=0;l<256;l++)o[l]=(l+256).toString(16).substr(1),r[o[l]]=l;function c(t,e){e=e||0;return o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[+e]]}var u=s(),p=[1|u[0],u[1],u[2],u[3],u[4],u[5]],d=16383&(u[6]<<8|u[7]),h=0,f=0;function y(t,e,n){var i=e&&n||0,o=("string"==typeof t&&(e="binary"==t?new a(16):null,t=null),(t=t||{}).random||(t.rng||s)());if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;r++)e[i+r]=o[r];return e||c(o)}var m,v=y;v.v1=function(t,e,n){var i=e&&n||0,o=e||[],n=null!=(t=t||{}).clockseq?t.clockseq:d,r=null!=t.msecs?t.msecs:(new Date).getTime(),s=null!=t.nsecs?t.nsecs:f+1;if((a=r-h+(s-f)/1e4)<0&&null==t.clockseq&&(n=n+1&16383),1e4<=(s=(a<0||h<r)&&null==t.nsecs?0:s))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=r,d=n;for(var a=(1e4*(268435455&(r+=122192928e5))+(f=s))%4294967296,s=(o[i++]=a>>>24&255,o[i++]=a>>>16&255,o[i++]=a>>>8&255,o[i++]=255&a,r/4294967296*1e4&268435455),l=(o[i++]=s>>>8&255,o[i++]=255&s,o[i++]=s>>>24&15|16,o[i++]=s>>>16&255,o[i++]=n>>>8|128,o[i++]=255&n,t.node||p),u=0;u<6;u++)o[i+u]=l[u];return e||c(o)},v.v4=y,v.parse=function(t,e,n){var i=e&&n||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[i+o++]=r[t])});o<16;)e[i+o++]=0;return e},v.unparse=c,v.BufferClass=a,"function"==typeof define&&define.amd?define("uuid",[],function(){return v}):"undefined"!=typeof module&&module.exports?module.exports=v:(m=e.uuid,v.noConflict=function(){return e.uuid=m,v},e.uuid=v)}.call(this),define("app-config",[],function(){"use strict";return{"partial-refresh":{"non-pjax-urls":[]}}}),define("core/experiment",["require"],function(t){"use strict";function e(t){this.app=t,this.eventMediator=t.eventMediator}return e.prototype.start=function(){this.eventMediator.subscribe("partialRefresh.beforeReplace",this.activate.bind(this)),this.activate()},e.prototype.activate=function(){dataLayer.push({event:"optimize.activate"})},e}),window.addEventListener("hashchange",function(t){var e=document.getElementById(location.hash.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1,e.className+=" skiplink-polyfill-target"),e.focus())},!1),define("skiplink-polyfill",function(){}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("whatInput",[],e):"object"==typeof exports?exports.whatInput=e():t.whatInput=e()}(this,function(){return i=[function(t,e){t.exports=function(){"use strict";var i,e,o=[],n=!1,r=null,s=["button","input","select","textarea"],t=b(),a=[16,17,18,91,93],l={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},u=(l[b()]="mouse",[]),c={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},p={2:"touch",3:"touch",4:"mouse"};function d(t){window.clearTimeout(e),f(t),n=!0,e=window.setTimeout(function(){n=!1},650)}function h(t){n||f(t)}function f(t){var e=m(t),n=l[t.type];"pointer"===n&&(n="number"==typeof(t=t).pointerType?p[t.pointerType]:"pen"===t.pointerType?"touch":t.pointerType),r!==n&&(t=document.activeElement.nodeName.toLowerCase(),!i.hasAttribute("data-whatinput-formswitching")&&!i.hasAttribute("data-whatinput-formtyping")&&r&&-1<s.indexOf(t)||-1<a.indexOf(e)||y(n)),"keyboard"===n&&(t=e,-1===o.indexOf(c[t]))&&c[t]&&o.push(c[t])}function y(t){r=t,i.setAttribute("data-whatinput",r),-1===u.indexOf(r)&&u.push(r)}function m(t){return t.keyCode||t.which}function v(t){t=m(t),t=o.indexOf(c[t]);-1!==t&&o.splice(t,1)}function g(){i=document.body,window.PointerEvent?(i.addEventListener("pointerdown",h),i.addEventListener("pointermove",h)):window.MSPointerEvent?(i.addEventListener("MSPointerDown",h),i.addEventListener("MSPointerMove",h)):(i.addEventListener("mousedown",h),i.addEventListener("mousemove",h),"ontouchstart"in window&&i.addEventListener("touchstart",d)),i.addEventListener(t,h),i.addEventListener("keydown",d),i.addEventListener("keyup",d),document.addEventListener("keyup",v)}function b(){return t="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?g():document.addEventListener("DOMContentLoaded",g)),{ask:function(){return r},keys:function(){return o},types:function(){return u},set:y}}()}],o={},n.m=i,n.c=o,n.p="",n(0);function n(t){var e;return(o[t]||(e=o[t]={exports:{},id:t,loaded:!1},i[t].call(e.exports,e,e.exports,n),e.loaded=!0,e)).exports}var i,o}),!function(t){("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define("focus-visible",t):t()}(function(){"use strict";function t(){var o=!0,e=!1,n=null,r={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function a(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function t(t){o=!1}function i(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){"html"!==t.target.nodeName.toLowerCase()&&(o=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",function(t){s(document.activeElement)&&a(document.activeElement),o=!0},!0),document.addEventListener("mousedown",t,!0),document.addEventListener("pointerdown",t,!0),document.addEventListener("touchstart",t,!0),document.addEventListener("focus",function(t){var e,n,i;s(t.target)&&(o||(e=t.target,n=e.type,"INPUT"==(i=e.tagName)&&r[n]&&!e.readOnly)||"TEXTAREA"==i&&!e.readOnly||e.isContentEditable)&&a(t.target)},!0),document.addEventListener("blur",function(t){s(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(e=!0,window.clearTimeout(n),n=window.setTimeout(function(){e=!1,window.clearTimeout(n)},100),(t=t.target).hasAttribute("data-focus-visible-added"))&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added"))},!0),document.addEventListener("visibilitychange",function(t){"hidden"==document.visibilityState&&(e&&(o=!0),i())},!0),i(),document.body.classList.add("js-focus-visible")}function e(){i||(i=!0,n())}var n,i;"undefined"!=typeof document&&(n=t,0<=["interactive","complete"].indexOf(document.readyState)?n():(i=!1,document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)))}),define("core/app",["require","tracking/tealium","core/consent-manager","components/cbsi-player","core/dom-require/module-loader","core/partial-refresh","core/event-mediator","player/provider-player","player/media-player","player/player","components/modal","uuid","app-config","core/browser-api","jquery","core/media-size-v2","core/experiment","skiplink-polyfill","whatInput","focus-visible"],function(t){"use strict";var e=t("tracking/tealium"),n=t("core/consent-manager"),i=t("components/cbsi-player"),o=t("core/dom-require/module-loader"),r=t("core/partial-refresh"),s=t("core/event-mediator"),a=t("player/provider-player"),l=t("player/media-player"),u=t("player/player"),c=t("components/modal"),p=t("uuid"),d=t("app-config"),h=t("core/browser-api"),f=t("jquery"),y=t("core/media-size-v2"),m=t("core/experiment");t("skiplink-polyfill"),t("whatInput"),t("focus-visible");const v={US:"aw",CA:"aw",GB:"uk",AU:"au",NZ:"au",SG:"asia",MY:"asia",TH:"asia",ID:"asia",PH:"asia",HK:"asia",IN:"asia",VN:"asia",NU:"row"};var g={start:function(){var t=f("body");g.viewGuid=p(),g.eventMediator=new s,g.consentManager=new n,new e(g).start(),g.isPlayerSupported()&&(g.cbsiplayer=new i(g,t.data("cbsi-player-config")),t=[new a("spotify",g.eventMediator),new a("youtube",g.eventMediator)],t=new l(t,g.eventMediator),g.player=new u(t,g.eventMediator)),g.fontFamily=f("body").css("fontFamily"),g.modal=new c(this),g.moduleLoader=new o(g),g.moduleLoader.start(),g.experiment=new m(g),g.experiment.start(),document.addEventListener("visibilitychange",function(){g.eventMediator.publish("app.visibilityChanged")}),h.cookies.setCookie("lfmjs","1",{expires:100}),g.isPersistentPlayerSupported()&&g.isPartialRefreshSupported()&&(g.partialRefresh=new r(f(document),g.eventMediator,d["partial-refresh"]["non-pjax-urls"]),g.eventMediator.subscribe("partialRefresh.beforeReplace",function(t){g.moduleLoader.stopAllModules(t)}),g.eventMediator.subscribe("partialRefresh.afterReplace",function(t){g.eventMediator.reset(),g.moduleLoader.startAllModules(t),g.pageTransitionComplete(!0)}),g.partialRefresh.start()),g.eventMediator.subscribe("page.updated",function(){g.pageTransitionComplete(!1)})},pageTransitionComplete:function(t){g.viewGuid=p(),g.eventMediator.publish("page.transitionComplete",{fullPage:t})},isVisible:function(){return!0!==document.hidden},isPlayerSupported:function(){return f("body").data("player-supported")},isPersistentPlayerSupported:function(){return!y.isMobile()},isMobile:function(){return!!y.isMobile()},isPartialRefreshSupported:function(){return f("body").data("partial-refresh-supported")},supportedLanguages:function(){let t=[];return f("head").find("[hreflang]").each(function(){t.push(f(this).attr("hreflang"))}),t},geo:function(){var t="adRegionPerm",e=this.getFromQuery("adRegion");return e?(this.setCookie(t,e),e.toUpperCase()):(e=this.getCookie(t))?e.toUpperCase():(t=this.getCookie("GeoIP"))?t.toUpperCase():"NU"},adNetwork:function(){var t="adNetworkPerm",e=this.getFromQuery("adNetwork");return e?(this.setCookie(t,e),e):this.getCookie(t)||f("[data-ads-network]").eq(0).data("ads-network")},adTargeting:function(){const i=f("[data-ads-targeting]").eq(0).data("ads-targeting");var t=h.document.location.search.substr(1);return new URLSearchParams(t).forEach((t,e)=>{var n="adTargeting_";e.startsWith(n)&&(e=e.replace(n,""),i[e]=t)}),i},setCookie:function(t,e){h.cookies.setCookie(t,e,{expires:100})},getCookie:function(t){const e=t+"=";t=document.cookie.split("; ").filter(t=>t.startsWith(e))[0];return t&&t.replace(e,"")},getFromQuery:function(t){var e=h.document.location.search.substr(1);return new URLSearchParams(e).get(t)},countryCode:function(){var t=this.geo();return v[t]},googleMapsApiKey:function(){return f("body").data("google-maps-api-key")},loadUrl:function(t){g.partialRefresh?g.partialRefresh.replaceContent(t):window.location.href=t},adsEnabled:function(){return 0<f("body").find("[data-ads-beacon]").length},lang:function(){var t=this.langPath();return t||"en"},langPath:function(){var t=window.location.pathname.match("^/(..)/");if(t)return t[1]},facebookAppId:function(){return f("body").data("facebook-app-id")}};return g}),require(["require-config"],function(){"use strict";require(["lodash"],function(e){Function.prototype.bind=Function.prototype.bind||function(){var t=Array.prototype.slice.call(arguments,0);return e.bind.apply(null,[this].concat(t))}}),require(["es6-promise"],function(t){t.polyfill(),require(["core/app"],function(t){t.start()})})}),define("init",function(){}),define("shim/rel-preload",["require","core/browser-api"],function(t){"use strict";function e(t){this.$el=t}var n=t("core/browser-api");return e.prototype.start=function(){n.isPreloadSupported()||(this.$el.attr("media","none"),this.$el.attr("rel","stylesheet"))},e}),define("dev/grid-overlay",["jquery"],function(n){"use strict";return function(e,t){this.start=function(){window.lfmGridOverlay=function(){var t=n(".dev-grid-overlay",e);t.length&&t.is(".dev-grid-overlay--baseline")?t.remove():t.length?t.addClass("dev-grid-overlay--baseline"):e.append('<div class="dev-grid-overlay"></div>')}}}}),define("dev/toggle-version",["jquery"],function(i){"use strict";function t(){}return t.prototype.start=function(){window.lfmToggleVersion=function(){i("body").is(".anhv1")?this.switchDefaultStylesheet("anhv1-defaults","anhv2-defaults"):this.switchDefaultStylesheet("anhv2-defaults","anhv1-defaults"),i("body").toggleClass("anhv1 anhv2")}.bind(this)},t.prototype.switchDefaultStylesheet=function(t,e){var n=i('link[href*="'+t+'.less"]');n.attr("href",n.attr("href").replace(t,e))},t}),define("dev/debug-log",["jquery"],function(n){"use strict";return function(t,e){this.start=function(){window.lfmDebugLog=function(){n(".debug-log",t).toggleClass("debug-log--show")}}}}),define("dev/debug-image-analysis",["jquery"],function(e){"use strict";return function(t){this.start=function(){window.lfmImageAnalysis=function(){e(".debug-image-analysis",t).toggleClass("debug-image-analysis--show")}}}}),define("dev/js-log",[],function(){"use strict";return function(){this.start=function(){window.lfmJsLog=function(){var t=[];window.debug.setCallback(function(){t.push([].slice.call(arguments))},!0),console.log(JSON.stringify(t,null,2))}}}}),define("dev/ads-toggle",[],function(){"use strict";function t(){}return t.prototype.start=function(){window.lfmAdsToggle=function(){var t=new URL(window.location.href),e=t.searchParams;null===e.get("no-ads")?e.set("no-ads","true"):e.delete("no-ads"),window.location.href=t.toString()}},t}),define("stats/tooltip",["require","jquery"],function(t){"use strict";function e(){}var n=t("jquery");return e.prototype.start=function(){this.$el=n("<div />").addClass("user-dashboard-tooltip").appendTo(document.body),this.hide()},e.prototype.stop=function(){this.$el.remove()},e.prototype.show=function(t,e,n){this.$el.html(n),this.$el.show(),this.move(t,e)},e.prototype.move=function(t,e){t={of:n.Event("mousemove",{pageX:t,pageY:e}),my:"left+10 top+10",collision:"flipfit",within:document.body};this.$el.position(t)},e.prototype.hide=function(){this.$el.hide()},e}),define("core/colours",["require"],function(t){"use strict";return{scarlet:"#B90000",postbox:"#D92323",persianRed:"#CF2B2B",tangerine:"#E63900",mandy:"#E95656",fire:"#FF6600",carrot:"#FF9900",merigold:"#FFBB00",sunflower:"#FFC900",pistachio:"#8FBF00",fern:"#009966",noCloudsSky:"#99D8FF",breazy:"#BFE7FF",turquoise:"#00AFBF",azure:"#0066FF",indigo:"#3636D9",mammmis:"#004b7A",racingBlue:"#0065A3",violet:"#9900FF",magenta:"#CC0099",mineshaft:"#222222",summerRose:"#F4AAAA",bubblyBuzz:"#E89696",dust:"#EEEEEE",cumulus:"#F3F3F3",platinum:"#F9F9F9",white:"#FFFFFF"}}),!function(){"use strict";var p,e;function l(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||o(),this.isIntersecting=!!t.intersectionRect;var t=this.boundingClientRect,t=t.width*t.height,e=this.intersectionRect,e=e.width*e.height;this.intersectionRatio=t?Number((e/t).toFixed(4)):this.isIntersecting?1:0}function t(t,e){var n,i,o,e=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(e.root&&1!=e.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,o=null,function(){o=o||setTimeout(function(){n(),o=null},i)}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(e.rootMargin),this.thresholds=this._initThresholds(e.threshold),this.root=e.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function n(t,e,n,i){"function"==typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function i(t,e,n,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function d(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?e.width&&e.height?e:{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}:o()}function o(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){t=t.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}"object"==typeof window&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(p=window.document,e=[],t.prototype.THROTTLE_TIMEOUT=100,t.prototype.POLL_INTERVAL=null,t.prototype.USE_MUTATION_OBSERVER=!0,t.prototype.observe=function(e){var t=this._observationTargets.some(function(t){return t.element==e});if(!t){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},t.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},t.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},t.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},t.prototype._initThresholds=function(t){t=t||[0];return(t=Array.isArray(t)?t:[t]).sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||1<t)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},t.prototype._parseRootMargin=function(t){t=(t||"0px").split(/\s+/).map(function(t){t=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(t)return{value:parseFloat(t[1]),unit:t[2]};throw new Error("rootMargin must be specified in pixels or percent")});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},t.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(window,"resize",this._checkForIntersections,!0),n(p,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(p,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},t.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(window,"resize",this._checkForIntersections,!0),i(p,"scroll",this._checkForIntersections,!0),this._domObserver)&&(this._domObserver.disconnect(),this._domObserver=null)},t.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),a=s?this._getRootRect():o();this._observationTargets.forEach(function(t){var e=t.element,n=d(e),i=this._rootContainsTarget(e),o=t.entry,r=s&&i&&this._computeTargetAndRootIntersection(e,a),t=t.entry=new l({time:window.performance&&performance.now&&performance.now(),target:e,boundingClientRect:n,rootBounds:a,intersectionRect:r});o?s&&i?this._hasCrossedThreshold(o,t)&&this._queuedEntries.push(t):o&&o.isIntersecting&&this._queuedEntries.push(t):this._queuedEntries.push(t)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},t.prototype._computeTargetAndRootIntersection=function(t,e){if("none"!=window.getComputedStyle(t).display){for(var n,i,o,r,s=d(t),a=h(t),l=!1;!l;){var u=null,c=1==a.nodeType?window.getComputedStyle(a):{};if("none"==c.display)return;if(a==this.root||a==p?(l=!0,u=e):a!=p.body&&a!=p.documentElement&&"visible"!=c.overflow&&(u=d(a)),u&&(c=u,u=s,r=o=i=n=void 0,n=Math.max(c.top,u.top),i=Math.min(c.bottom,u.bottom),o=Math.max(c.left,u.left),c=Math.min(c.right,u.right),r=i-n,!(s=0<=(u=c-o)&&0<=r&&{top:n,bottom:i,left:o,right:c,width:u,height:r})))break;a=h(a)}return s}},t.prototype._getRootRect=function(){var t,e;return e=this.root?d(this.root):(e=p.documentElement,t=p.body,{top:0,left:0,right:e.clientWidth||t.clientWidth,width:e.clientWidth||t.clientWidth,bottom:e.clientHeight||t.clientHeight,height:e.clientHeight||t.clientHeight}),this._expandRectByRootMargin(e)},t.prototype._expandRectByRootMargin=function(n){var t=this._rootMarginValues.map(function(t,e){return"px"==t.unit?t.value:t.value*(e%2?n.width:n.height)/100}),t={top:n.top-t[0],right:n.right+t[1],bottom:n.bottom+t[2],left:n.left-t[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},t.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==n||r==i||r<n!=r<i)return!0}},t.prototype._rootIsInDom=function(){return!this.root||r(p,this.root)},t.prototype._rootContainsTarget=function(t){return r(this.root||p,t)},t.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},t.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=t,window.IntersectionObserverEntry=l))}(),define("intersection-observer",function(){}),define("shim/on-screen",["require"],function(e){"use strict";const i=new Promise(t=>{"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?t():e(["intersection-observer"],()=>{t()})});return class{constructor(t,e,n){i.then(()=>{this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&(e(),this.destroy())},n),this.observer.observe(t)})}destroy(){i.then(()=>{this.observer.disconnect()})}}}),define("charts/listener-trend",["require","jquery","lodash","highcharts","stats/tooltip","core/colours","shim/on-screen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var s=t("jquery"),a=t("lodash"),r=t("highcharts"),n=t("stats/tooltip"),l=t("core/colours"),i=t("shim/on-screen");return e.prototype.start=function(){this.tooltip=new n,this.tooltip.start(),this.isVisible=!1,this.onScreen=new i(this.$el.get(0),this.moduleVisible.bind(this),{threshold:1/3})},e.prototype.stop=function(){this.onScreen.destroy()},e.prototype.moduleVisible=function(){this.isVisible||(this.onScreen.destroy(),this.onVisible(),this.isVisible=!0)},e.prototype.onVisible=function(){var t=this.getTableData(),e=s("<div/>").attr("class","highcharts-container");this.$el.append(e),this.drawGraph(e,t)},e.prototype.drawGraph=function(t,e){var n=e.map(function(t){return{labelText:['<span class="text-light">',t.date.trim(),":</span> ",t.valueComma].join(""),x:t.timestamp,y:t.value}}),i={},o=(e.forEach(function(t){i[t.timestamp]=t.month}),Math.listenerTrendEasing=s.easing.easeInOutCubic,this);new r.Chart({series:[{data:n}],chart:{type:"area",renderTo:t.get(0),events:{load:this.centerLabels.bind(this),redraw:this.centerLabels.bind(this)},marginTop:0,marginBottom:30,marginRight:0,marginleft:0,spacingBottom:0,spacingTop:0,spacingLeft:0,spacingRight:0},plotOptions:{series:{color:l.postbox,fillOpacity:.1,lineWidth:2,animation:{duration:1e3,easing:"listenerTrendEasing"},point:{events:{mouseOver:function(){var t=o.pointPosition(this);o.tooltip.show(t.x,t.y,this.labelText)},mouseOut:function(){o.tooltip.hide()}}},marker:{fillColor:"#ffffff",lineColor:l.postbox,lineWidth:1,radius:3},states:{hover:{lineWidth:2,halo:{size:0}}}}},xAxis:{type:"datetime",units:[["month",[1]]],labels:{formatter:function(){return i[this.value]},style:{fontSize:"12px",fontFamily:s("body").css("fontFamily"),color:"#999"}},alternateGridColor:l.platinum,lineWidth:0,tickWidth:0,minPadding:0,maxPadding:0},yAxis:{visible:!1},tooltip:{enabled:!1},title:{text:""},legend:{enabled:!1},credits:{enabled:!1}})},e.prototype.getTableData=function(){function t(t,n){return t.find("["+n+"]").map(function(t,e){return s(e).attr(n)}).toArray()}var e=a.pluck(this.$el.find(".js-date"),"textContent"),n=t(this.$el,"datetime").map(function(t){return+new Date(t)}),i=t(this.$el,"data-month-string"),o=t(this.$el,"data-value").map(function(t){return parseInt(t,10)}),r=a.pluck(this.$el.find(".js-value"),"textContent");return a.zip(e,n,i,o,r).map(function(t){return{date:t[0],timestamp:t[1],month:t[2],value:t[3],valueComma:t[4]}})},e.prototype.centerLabels=function(){this.$el.find(".highcharts-xaxis-labels text").toArray().forEach(function(t,e,n){var i=s(t);e===n.length-1?i.hide():(n=s(n[e+1]),e=parseFloat(i.attr("x")),i=parseFloat(n.attr("x")),s(t).attr("x",e+(i-e)/2))})},e.prototype.pointPosition=function(t){var e=t.series.chart.chartBackground.element,e=s(e).offset();return{x:e.left+t.plotX,y:e.top+t.plotY}},e}),define("components/ajax-form",["require","jquery","core/ajax","core/form"],function(t){"use strict";function e(t,e){this.$el=t,this.eventMediator=e.eventMediator}var i=t("jquery"),s=t("core/ajax"),o=t("core/form");return e.prototype={start:function(){this.$el.on("mouseout.ajax-form focus.ajax-form","[data-ajax-form-sets-state]:visible",this.resetHover.bind(this)),this.$el.on("click.ajax-form",'[data-ajax-form] button[type="submit"]',this.buttonClick.bind(this))},stop:function(){this.$el.off(".ajax-form")},buttonClick:function(t){t.preventDefault();var e=i(t.currentTarget),n=e.closest("form"),t=this.getStateTarget(t);this.abortRequest(t),this.sendRequest(n,e,t),t.removeAttr("data-ajax-form-success")},sendRequest:function(t,e,n){var i,o,r=t.attr("method").toLowerCase();s[r]&&(i=e.data("ajaxFormSetsState"),o=t.attr("action"),t=this.serializeForm(t,e),this.setState(n,i),n.addClass("ajax-form-disable-hover"),e=s[r](o,{},t,function(t,e){t||e&&!e.result?this.fail(n):(n.data("response",e),this.success(n))}.bind(this)),n.data("request",e))},abortRequest:function(t){var e=t.data("request");e&&(this.resetState(t),e.abort())},success:function(t){t.data("request",!1),t.attr("data-ajax-form-success",""),this.eventMediator.publish("ajaxform.success",t.data("response")),t.data("ajax-form-reload")&&window.location.reload()},fail:function(t){t.data("request",!1),this.resetState(t),t.removeClass("ajax-form-disable-hover")},resetState:function(t){t.attr("data-ajax-form-state",t.data("ajaxFormOldState"))},setState:function(t,e){t.data("ajaxFormOldState",t.attr("data-ajax-form-state")),t.attr("data-ajax-form-state",e)},resetHover:function(t){if(t.relatedTarget===t.currentTarget||t.currentTarget.contains(t.relatedTarget))return!1;this.getStateTarget(t).removeClass("ajax-form-disable-hover")},getStateTarget:function(t){return i(t.currentTarget).closest("[data-ajax-form-state]")},serializeForm:function(t,e){var t=o.readFormData(t),n=e.attr("name");return n&&(t[n]=e.val()),t}},e}),define("components/toggle-form",["require","core/ajax","core/form"],function(t){"use strict";function e(t){this.$el=t}var o=t("core/ajax"),n=t("core/form");return e.prototype.hasAction=function(){return!(!this.$el||!this.$el.attr("action"))},e.prototype.submit=function(){var i=n.readFormData(this.$el);return this.hasAction()?new Promise(function(e,n){var t=o.post(this.$el.attr("action"),null,i);t.then(function(t){(t&&!1===t.result?n:e)(t)}),t.catch(n)}.bind(this)):Promise.resolve()},e}),define("components/toggle-button",["require","jquery","components/toggle-form"],t=>{"use strict";const e=t("jquery"),u=t("components/toggle-form"),c="data-button-disabled";function p(t){return e("[data-toggle-button-group-id="+t+"]")}function d(t){return p(t).find("button[type=submit]")}function h(t){return p(t).find("form")}function f(t,e){t=d(t);e?t.attr(c,!0):t.removeAttr(c)}return function(t,n){var e=!!t.attr(c);if(!e){const r=function(t){t=t.closest("[data-toggle-button]");return t.attr("data-toggle-button-group-id")}(t),{currentState:s,nextState:a}=function(t){const e=p(t),n=e.eq(0),i=n.attr("data-toggle-button-current-state"),o=JSON.parse(n.attr("data-toggle-button-states")),r=o.findIndex(t=>t.name===i),s=(r+1)%o.length;return{currentState:o[r],nextState:o[s]}}(r),l=t=>{return e=r,t=t,n=p(e),e=d(e),n.attr("data-toggle-button-current-state",t.name),e.text(t.button_text),void e.attr("data-analytics-action",t.analytics_action);var e,n};f(r,!0),l(a);var e=r,t=t=>{n.publish(s.event,t);var t=r,e=a;(t=h(t)).attr("action",e.url),t.find("input[name=action]").val(e.action)},i=t=>{n.publish(s.event,t),l(s)},o=()=>f(r,!1);e=h(e),(e=(e=new u(e.eq(0))).submit()).then(t),e.catch(i),e.finally(o)}}}),define("components/toggle-buttons",["require","jquery","components/toggle-button"],function(t){"use strict";function e(t,e){this.app=e,this.$body=n(document.body)}var n=t("jquery"),i=t("components/toggle-button");return e.prototype.start=function(){this.$body.on("click.toggle-buttons","[data-toggle-button] button[type=submit]",this.handleClick.bind(this))},e.prototype.stop=function(){this.$body.off(".toggle-buttons")},e.prototype.handleClick=function(t){t.preventDefault(),i(n(t.target),this.app.eventMediator)},e}),define("components/show-alert",["require","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var n=t("jquery");return e.prototype={start:function(){this.okCopy=this.$el.attr("data-show-alert-ok-copy"),n("body").on("click.show-alert","[data-show-alert]",this.clickHandler.bind(this))},stop:function(){n("body").off(".show-alert")},clickHandler:function(t){t=n(t.currentTarget).attr("data-show-alert");this.app.modal.show(this.modalBody(t,this.okCopy))},modalBody:function(t,e){return'<div class="modal-body" data-modal-type="narrow,left-aligned"><p>'+t+'</p><ul class="modal-buttons"><li class="modal-button"><button class="btn-primary js-close" data-modal-action="ok">'+e+"</button></li></ul></div>"}},e}),define("components/alert-dismissable",["require","jquery","jquery-cookie","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var n=t("jquery"),i=(t("jquery-cookie"),t("core/ajax"));return e.prototype={start:function(){this.$el.on("click",".js-alert-dismissable-close",n.proxy(this.close,this))},close:function(t,e){t.preventDefault();t=n(t.currentTarget);this.makeAjaxCall(t),this.$el.slideUp(e)},makeAjaxCall:function(t){i.get(t.attr("href"))},stop:function(){this.$el.off("click",".js-alert-dismissable-close")}},e}),define("components/bookmark-notification",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e,this.eventMediator=e.eventMediator,this.$el=n("body")}var n=t("jquery");return e.prototype.start=function(){this.subscription=this.eventMediator.subscribe("bookmark.added",this.bookmarked.bind(this),!0)},e.prototype.stop=function(){this.eventMediator.unsubscribe(this.subscription)},e.prototype.bookmarked=function(t){t.showNotification&&this.app.modal.open(t.notificationUrl)},e}),define("components/confirm-dialog",[],function(){"use strict";return function(e,n,i,o,r){return new Promise(function(t){e.modal.show('<div class="modal-body" data-modal-type="narrow,left-aligned"><h2 id="modal-label" class="modal-title">'+n+"</h2><p>"+i+'</p><ul class="modal-buttons"><li class="modal-button"><button class="btn-cancel js-close">'+r+'</button></li><li class="modal-button"><button class="btn-primary js-close" data-modal-action="ok">'+o+"</button></li></ul></div>",{ok:t})}.bind(this))}}),define("components/confirm",["require","components/confirm-dialog","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var n=t("components/confirm-dialog"),i=t("jquery");return e.prototype={start:function(){this.$el.on("submit.confirm",this.submitHandler.bind(this))},stop:function(){this.$el.off(".confirm")},submitHandler:function(t){this.$target=i(t.target),this.$target.is("[data-confirm-message]")&&!this.$target.data("confirmed")&&(t.preventDefault(),e.openConfirmDialog(this.$target,this.app).then(this.resumeSubmit.bind(this)))},resumeSubmit:function(){this.$target.data("confirmed",!0),this.$target.appendTo("body"),this.$target.trigger("submit")}},e.openConfirmDialog=function(t,e){return n(e,t.attr("data-confirm-title"),t.attr("data-confirm-message"),t.attr("data-confirm-ok"),t.attr("data-confirm-cancel"))},e}),define("components/disclose-base",["require","jquery","lodash"],function(t){"use strict";function e(){this.$body=i(document.body)}var i=t("jquery"),o=t("lodash");return e.prototype={selector:"[data-disclose]",eventNamespace:".disclose",start:function(){this.$body.on("click"+this.eventNamespace,this.selector,this.toggleHandler.bind(this)),this.$body.on("click"+this.eventNamespace,".js-disclose-close",this.closeButtonHandler.bind(this))},stop:function(){this.$body.off(this.eventNamespace)},eventName:function(t){return t+this.eventNamespace},open:function(t){this.toggle(t,!0)},close:function(t){this.toggle(t,!1)},toggle:function(t,e){var n=this.discloseBody(t),i=this.isOpen(n);n.toggleClass("disclose-hide",!e),t.attr("aria-expanded",e?"true":"false"),t.toggleClass("disclose-active",e),e&&!i?this.opened(t,n):!e&&i&&this.closed(t,n)},toggleHandler:function(t){t.preventDefault();var t=i(t.target).closest(this.selector),e=this.discloseBody(t);this.isOpen(e)?this.close(t):this.open(t)},closeButtonHandler:function(t){var e=this.toggleForDiscloseBodyChild(t.target);e&&(t.preventDefault(),this.close(e))},opened:function(t,e){e.trigger("disclose-shown"),this.discloseBody(t).on("disclose-close",this.close.bind(this,t))},closed:function(t,e){e.trigger("disclose-hidden"),this.discloseBody(t).off("disclose-close")},isOpen:function(t){return!t.is(".disclose-hide")},discloseBody:function(t){return i("#"+t.attr("aria-controls"))},toggleForDiscloseBodyChild:function(t){var e,n,t=i(t).parents("[id]").get();if(o(t).find(function(t){return n=i(t).attr("id"),(e=i(this.selector+'[aria-controls="'+n+'"]')).length},this))return e}},e}),!function(t){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],t):t(jQuery)}(function(k){k.ui=k.ui||{};var i,C,A,o,r,s,a,l,n;k.ui.version="1.12.1";function T(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function E(t,e){return parseInt(k.css(t,e),10)||0}C=Math.max,A=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,n=k.fn.position,k.position={scrollbarWidth:function(){var t,e,n;return void 0!==i?i:(n=(e=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>")).children()[0],k("body").append(e),t=n.offsetWidth,e.css("overflow","scroll"),t===(n=n.offsetWidth)&&(n=e[0].clientWidth),e.remove(),i=t-n)},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),e="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:e?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),n=k.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:!n&&!i?k(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(p){if(!p||!p.of)return n.apply(this,arguments);p=k.extend({},p);var d,h,f,y,m,t,v=k(p.of),g=k.position.getWithinInfo(p.within),b=k.position.getScrollInfo(g),w=(p.collision||"flip").split(" "),x={},e=9===(e=(t=v)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};return v[0].preventDefault&&(p.at="left top"),h=e.width,f=e.height,m=k.extend({},y=e.offset),k.each(["my","at"],function(){var t,e,n=(p[this]||"").split(" ");(n=1===n.length?o.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]:n)[0]=o.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=s.exec(n[0]),e=s.exec(n[1]),x[this]=[t?t[0]:0,e?e[0]:0],p[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===p.at[0]?m.left+=h:"center"===p.at[0]&&(m.left+=h/2),"bottom"===p.at[1]?m.top+=f:"center"===p.at[1]&&(m.top+=f/2),d=T(x.at,h,f),m.left+=d[0],m.top+=d[1],this.each(function(){var n,t,s=k(this),a=s.outerWidth(),l=s.outerHeight(),e=E(this,"marginLeft"),i=E(this,"marginTop"),o=a+e+E(this,"marginRight")+b.width,r=l+i+E(this,"marginBottom")+b.height,u=k.extend({},m),c=T(x.my,s.outerWidth(),s.outerHeight());"right"===p.my[0]?u.left-=a:"center"===p.my[0]&&(u.left-=a/2),"bottom"===p.my[1]?u.top-=l:"center"===p.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],n={marginLeft:e,marginTop:i},k.each(["left","top"],function(t,e){k.ui.position[w[t]]&&k.ui.position[w[t]][e](u,{targetWidth:h,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:o,collisionHeight:r,offset:[d[0]+c[0],d[1]+c[1]],my:p.my,at:p.at,within:g,elem:s})}),p.using&&(t=function(t){var e=y.left-u.left,n=e+h-a,i=y.top-u.top,o=i+f-l,r={target:{element:v,left:y.left,top:y.top,width:h,height:f},element:{element:s,left:u.left,top:u.top,width:a,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:o<0?"top":0<i?"bottom":"middle"};h<a&&A(e+n)<h&&(r.horizontal="center"),f<l&&A(i+o)<f&&(r.vertical="middle"),C(A(e),A(n))>C(A(i),A(o))?r.important="horizontal":r.important="vertical",p.using.call(this,t,r)}),s.offset(k.extend(u,{using:t}))})},k.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,i=i.width,r=t.left-e.collisionPosition.marginLeft,s=o-r,a=r+e.collisionWidth-i-o;e.collisionWidth>i?0<s&&a<=0?(n=t.left+s+e.collisionWidth-i-o,t.left+=s-n):t.left=!(0<a&&s<=0)&&a<s?o+i-e.collisionWidth:o:0<s?t.left+=s:0<a?t.left-=a:t.left=C(t.left-r,t.left)},top:function(t,e){var n,i=e.within,i=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,s=i-r,a=r+e.collisionHeight-o-i;e.collisionHeight>o?0<s&&a<=0?(n=t.top+s+e.collisionHeight-o-i,t.top+=s-n):t.top=!(0<a&&s<=0)&&a<s?i+o-e.collisionHeight:i:0<s?t.top+=s:0<a?t.top-=a:t.top=C(t.top-r,t.top)}},flip:{left:function(t,e){var n=e.within,i=n.offset.left+n.scrollLeft,o=n.width,n=n.isWindow?n.scrollLeft:n.offset.left,r=t.left-e.collisionPosition.marginLeft,s=r-n,r=r+e.collisionWidth-o-n,a="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,l="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,u=-2*e.offset[0];s<0?((o=t.left+a+l+u+e.collisionWidth-o-i)<0||o<A(s))&&(t.left+=a+l+u):0<r&&(0<(i=t.left-e.collisionPosition.marginLeft+a+l+u-n)||A(i)<r)&&(t.left+=a+l+u)},top:function(t,e){var n=e.within,i=n.offset.top+n.scrollTop,o=n.height,n=n.isWindow?n.scrollTop:n.offset.top,r=t.top-e.collisionPosition.marginTop,s=r-n,r=r+e.collisionHeight-o-n,a="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,l="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];s<0?((o=t.top+a+l+u+e.collisionHeight-o-i)<0||o<A(s))&&(t.top+=a+l+u):0<r&&(0<(i=t.top-e.collisionPosition.marginTop+a+l+u-n)||A(i)<r)&&(t.top+=a+l+u)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}};k.ui.position;k.ui.focusable=function(t,e){var n,i,o,r=t.nodeName.toLowerCase();return"area"===r?(o=(n=t.parentNode).name,!(!t.href||!o||"map"!==n.nodeName.toLowerCase())&&0<(n=k("img[usemap='#"+o+"']")).length&&n.is(":visible")):(/^(input|select|textarea|button|object)$/.test(r)?(i=!t.disabled)&&(o=k(t).closest("fieldset")[0])&&(i=!o.disabled):i="a"===r&&t.href||e,i&&k(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(k(t)))},k.extend(k.expr[":"],{focusable:function(t){return k.ui.focusable(t,null!=k.attr(t,"tabindex"))}});k.ui.focusable,k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},k.extend(k.expr[":"],{tabbable:function(t){var e=k.attr(t,"tabindex"),n=null!=e;return(!n||0<=e)&&k.ui.focusable(t,n)}});var c,p,u,d,t,h,f,y,m,e,v,g,b,w,x,S,D,L,I,O,j,_="ui-effects-",P="ui-effects-style",q="ui-effects-animated",H=k;function $(t,e,n){var i=y[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function z(i){var o=h(),r=o._rgba=[];return i=i.toLowerCase(),v(t,function(t,e){var n=e.re.exec(i),n=n&&e.parse(n),e=e.space||"rgba";if(n)return n=o[e](n),o[f[e].cache]=n[f[e].cache],r=o._rgba=n._rgba,!1}),r.length?("0,0,0,0"===r.join()&&c.extend(r,u.transparent),o):u[i]}function M(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function F(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(o[k.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(o[e]=i[e]);return o}function R(t,e,n,i){return t={effect:t=k.isPlainObject(t)?(e=t).effect:t},k.isFunction(e=null==e?{}:e)&&(i=e,n=null,e={}),"number"!=typeof e&&!k.fx.speeds[e]||(i=n,n=e,e={}),k.isFunction(n)&&(i=n,n=null),e&&k.extend(t,e),n=n||e.duration,t.duration=k.fx.off?0:"number"==typeof n?n:n in k.fx.speeds?k.fx.speeds[n]:k.fx.speeds._default,t.complete=i||e.complete,t}function N(t){return!t||"number"==typeof t||k.fx.speeds[t]||"string"==typeof t&&!k.effects.effect[t]||k.isFunction(t)||"object"==typeof t&&!t.effect}function B(t,e){var n=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?n:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}k.effects={effect:{}},d=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=(c=H).Color=function(t,e,n,i){return new c.Color.fn.parse(t,e,n,i)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},y={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=h.support={},e=c("<p>")[0],v=c.each,e.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=-1<e.style.backgroundColor.indexOf("rgba"),v(f,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),(h.fn=c.extend(h.prototype,{parse:function(o,t,e,n){if(o===p)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=c(o).css(t),t=p);var r=this,i=c.type(o),s=this._rgba=[];return t!==p&&(o=[o,t,e,n],i="array"),"string"===i?this.parse(z(o)||u._default):"array"===i?(v(f.rgba.props,function(t,e){s[e.idx]=$(o[e.idx],e)}),this):"object"===i?(o instanceof h?v(f,function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}):v(f,function(t,n){var i=n.cache;v(n.props,function(t,e){if(!r[i]&&n.to){if("alpha"===t||null==o[t])return;r[i]=n.to(r._rgba)}r[i][e.idx]=$(o[t],e,!0)}),r[i]&&c.inArray(null,r[i].slice(0,3))<0&&(r[i][3]=1,n.from)&&(r._rgba=n.from(r[i]))}),this):void 0},is:function(t){var o=h(t),r=!0,s=this;return v(f,function(t,e){var n,i=o[e.cache];return i&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],v(e.props,function(t,e){if(null!=i[e.idx])return r=i[e.idx]===n[e.idx]})),r}),r},_space:function(){var n=[],i=this;return v(f,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var t=(u=h(t))._space(),e=f[t],n=0===this.alpha()?h("transparent"):this,a=n[e.cache]||e.to(n._rgba),l=a.slice(),u=u[e.cache];return v(e.props,function(t,e){var n=e.idx,i=a[n],o=u[n],r=y[e.type]||{};null!==o&&(null===i?l[n]=o:(r.mod&&(o-i>r.mod/2?i+=r.mod:i-o>r.mod/2&&(i-=r.mod)),l[n]=$((o-i)*s+i,e)))}),this[t](l)},blend:function(t){var e,n,i;return 1===this._rgba[3]?this:(e=this._rgba.slice(),n=e.pop(),i=h(t)._rgba,h(c.map(e,function(t,e){return(1-n)*i[e]+n*t})))},toRgbaString:function(){var t="rgba(",e=c.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=c.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),t=e&&e<3?Math.round(100*t)+"%":t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+c.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=h.fn,f.hsla.to=function(t){var e,n,i,o,r,s,a,l;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/255,n=t[1]/255,i=t[2]/255,t=t[3],o=(l=Math.max(e,n,i))-(a=Math.min(e,n,i)),s=.5*(r=l+a),a=a===l?0:e===l?60*(n-i)/o+360:n===l?60*(i-e)/o+120:60*(e-n)/o+240,l=0==o?0:s<=.5?o/r:o/(2-r),[Math.round(a)%360,l,s,null==t?1:t])},f.hsla.from=function(t){var e,n,i;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/360,i=t[1],n=t[2],t=t[3],i=2*n-(n=n<=.5?n*(1+i):n+i-n*i),[Math.round(255*M(i,n,e+1/3)),Math.round(255*M(i,n,e)),Math.round(255*M(i,n,e-1/3)),t])},v(f,function(a,t){var r=t.props,s=t.cache,l=t.to,u=t.from;h.fn[a]=function(t){var e,n,i,o;return l&&!this[s]&&(this[s]=l(this._rgba)),t===p?this[s].slice():(n=c.type(t),i="array"===n||"object"===n?t:arguments,o=this[s].slice(),v(r,function(t,e){t=i["object"===n?t:e.idx];null==t&&(t=o[e.idx]),o[e.idx]=$(t,e)}),u?((e=h(u(o)))[s]=o,e):h(o))},v(r,function(r,s){h.fn[r]||(h.fn[r]=function(t){var e=c.type(t),n="alpha"===r?this._hsla?"hsla":"rgba":a,i=this[n](),o=i[s.idx];return"undefined"===e?o:("function"===e&&(t=t.call(this,o),e=c.type(t)),null==t&&s.empty?this:("string"===e&&(e=d.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),i[s.idx]=t,this[n](i)))})})}),(h.hook=function(t){t=t.split(" ");v(t,function(t,r){c.cssHooks[r]={set:function(t,e){var n,i,o="";if("transparent"!==e&&("string"!==c.type(e)||(n=z(e)))){if(e=h(n||e),!m.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&i&&i.style;)try{o=c.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},c.fx.step[r]=function(t){t.colorInit||(t.start=h(t.elem,r),t.end=h(t.end),t.colorInit=!0),c.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),c.cssHooks.borderColor={expand:function(n){var i={};return v(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},u=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},x=["add","remove","toggle"],S={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){k.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(H.style(t.elem,e,t.end),t.setAttr=!0)}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.effects.animateClass=function(o,t,e,n){var r=k.speed(t,e,n);return this.queue(function(){var n=k(this),t=n.attr("class")||"",e=(e=r.children?n.find("*").addBack():n).map(function(){return{el:k(this),start:F(this)}}),i=function(){k.each(x,function(t,e){o[e]&&n[e+"Class"](o[e])})};i(),e=e.map(function(){return this.end=F(this.el[0]),this.diff=function(t,e){var n,i,o={};for(n in e)i=e[n],t[n]===i||S[n]||!k.fx.step[n]&&isNaN(parseFloat(i))||(o[n]=i);return o}(this.start,this.end),this}),n.attr("class",t),e=e.map(function(){var t=this,e=k.Deferred(),n=k.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),k.when.apply(k,e.get()).done(function(){i(),k.each(arguments,function(){var e=this.el;k.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(n[0])})})},k.fn.extend({addClass:(w=k.fn.addClass,function(t,e,n,i){return e?k.effects.animateClass.call(this,{add:t},e,n,i):w.apply(this,arguments)}),removeClass:(b=k.fn.removeClass,function(t,e,n,i){return 1<arguments.length?k.effects.animateClass.call(this,{remove:t},e,n,i):b.apply(this,arguments)}),toggleClass:(g=k.fn.toggleClass,function(t,e,n,i,o){return"boolean"==typeof e||void 0===e?n?k.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,o):g.apply(this,arguments):k.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,o){return k.effects.animateClass.call(this,{add:e,remove:t},n,i,o)}}),k.expr&&k.expr.filters&&k.expr.filters.animated&&(k.expr.filters.animated=(D=k.expr.filters.animated,function(t){return!!k(t).data(q)||D(t)})),!1!==k.uiBackCompat&&k.extend(k.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(_+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,o=e.length;i<o;i++)null!==e[i]&&(n=t.data(_+e[i]),t.css(e[i],n))},setMode:function(t,e){return e="toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return n.wrap(t),n[0]!==o&&!k.contains(n[0],o)||k(o).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(k.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),k.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!k.contains(t[0],e)||k(e).trigger("focus")),t}}),k.extend(k.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),k.effects.effect[t]=n,k.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){var i;return 0===e?{height:0,width:0,outerHeight:0,outerWidth:0}:(i="horizontal"!==n?(e||100)/100:1,n="vertical"!==n?(e||100)/100:1,{height:t.height()*n,width:t.width()*i,outerHeight:t.outerHeight()*n,outerWidth:t.outerWidth()*i})},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();1<e&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(P,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(P)||"",t.removeData(P)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),e=(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=k("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(_+"placeholder",e)),t.css({position:n,left:i.left,top:i.top}),e},removePlaceholder:function(t){var e=_+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){k.effects.restoreStyle(t),k.effects.removePlaceholder(t)},setTransition:function(i,t,o,r){return r=r||{},k.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(r[e]=n[0]*o+n[1])}),r}}),k.fn.extend({effect:function(){function t(t){var e=k(this),n=k.effects.mode(e,a)||r;e.data(q,!0),l.push(n),r&&("show"===n||n===r&&"hide"===n)&&e.show(),r&&"none"===n||k.effects.saveStyle(e),k.isFunction(t)&&t()}var i=R.apply(this,arguments),o=k.effects.effect[i.effect],r=o.mode,e=i.queue,n=e||"fx",s=i.complete,a=i.mode,l=[];return k.fx.off||!o?a?this[a](i.duration,s):this.each(function(){s&&s.call(this)}):!1===e?this.each(t).each(u):this.queue(n,t).queue(n,u);function u(t){var e=k(this);function n(){k.isFunction(s)&&s.call(e[0]),k.isFunction(t)&&t()}i.mode=l.shift(),!1===k.uiBackCompat||r?"none"===i.mode?(e[a](),n()):o.call(e[0],i,function(){e.removeData(q),k.effects.cleanUp(e),"hide"===i.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),n()):o.call(e[0],i,n)}},show:(O=k.fn.show,function(t){var e;return N(t)?O.apply(this,arguments):((e=R.apply(this,arguments)).mode="show",this.effect.call(this,e))}),hide:(I=k.fn.hide,function(t){var e;return N(t)?I.apply(this,arguments):((e=R.apply(this,arguments)).mode="hide",this.effect.call(this,e))}),toggle:(L=k.fn.toggle,function(t){var e;return N(t)||"boolean"==typeof t?L.apply(this,arguments):((e=R.apply(this,arguments)).mode="toggle",this.effect.call(this,e))}),cssUnit:function(t){var n=this.css(t),i=[];return k.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):B(this.css("clip"),this)},transfer:function(t,e){var n=k(this),i=k(t.to),o="fixed"===i.css("position"),r=k("body"),s=o?r.scrollTop():0,r=o?r.scrollLeft():0,a=i.offset(),a={top:a.top-s,left:a.left-r,height:i.innerHeight(),width:i.innerWidth()},i=n.offset(),l=k("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:i.top-s,left:i.left-r,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(a,t.duration,t.easing,function(){l.remove(),k.isFunction(e)&&e()})}}),k.fx.step.clip=function(t){t.clipInit||(t.start=k(t.elem).cssClip(),"string"==typeof t.end&&(t.end=B(t.end,t.elem)),t.clipInit=!0),k(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},j={},k.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){j[t]=function(t){return Math.pow(t,e+2)}}),k.extend(j,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),k.each(j,function(t,e){k.easing["easeIn"+t]=e,k.easing["easeOut"+t]=function(t){return 1-e(1-t)},k.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});k.effects}),define("components/disclose-autoclose-v2",["require","jquery-ui","jquery","components/disclose-base","whatInput"],function(t){"use strict";t("jquery-ui");function e(){i.apply(this,arguments)}var n=t("jquery"),i=t("components/disclose-base"),o=t("whatInput"),r=n.ui.keyCode.ESCAPE,s=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-autoclose]",e.prototype.eventNamespace=".disclose-autoclose",i.prototype);return e.prototype.opened=function(t,e){s.opened.call(this,t,e),this.$body.on(this.toggleEventName("click",t),this.outsideClickHandler.bind(this,t,e)),this.$body.on(this.toggleEventName("focusin",t),this.outsideFocusHandler.bind(this,t,e)),this.$body.on(this.toggleEventName("keydown",t),this.outsideKeydownHandler.bind(this,t))},e.prototype.toggleEventName=function(t,e){e=this.uniqueEventNamespace(e);return this.eventName(t)+e},e.prototype.closed=function(t,e){s.closed.call(this,t,e);e=this.uniqueEventNamespace(t);this.$body.off(e)},e.prototype.uniqueEventNamespace=function(t){t=t.attr("aria-controls");return this.eventNamespace+"-for-"+t},e.prototype.outsideKeydownHandler=function(t,e){this.keyboardDisabled(e.target)||e.which===r&&(this.close(t),t.focus())},e.prototype.outsideFocusHandler=function(t,e,n){"mouse"===o.ask()||!n.relatedTarget||this.elementContains(t,n.target)||this.elementContains(e,n.target)||this.close(t)},e.prototype.outsideClickHandler=function(t,e,n){this.elementContains(t,n.target)||this.elementContains(e,n.target)||this.close(t)},e.prototype.elementContains=function(t,e){return t[0]===e||t.has(e).length},e.prototype.keyboardDisabled=function(t){return!!n(t).is(".js-disclose-disable-keyboard")||0<n(t).parents(".js-disclose-disable-keyboard").length},e}),define("components/media-size-aware-elements",["require","core/media-size-v2"],function(t){"use strict";function e(t,e){this.eventMediator=t,this.elements=[],this.onChange=e}var n=t("core/media-size-v2");return e.prototype.start=function(){this.subscription=this.eventMediator.subscribe("mediaSize.change",this.resize.bind(this))},e.prototype.stop=function(){this.eventMediator.unsubscribe(this.subscription)},e.prototype.add=function(t,e){-1===this.indexOf(t)&&(this.elements.push({el:t,metadata:e}),this.onChange(t,n.getMediaSize(),e))},e.prototype.remove=function(t){t=this.indexOf(t);return-1!==t&&(this.elements.splice(t,1),!0)},e.prototype.update=function(t){var e=this.indexOf(t);-1!==e&&(e=this.elements[e].metadata,this.onChange(t,n.getMediaSize(),e))},e.prototype.resize=function(e){this.elements.forEach(function(t){this.onChange(t.el,e.size,t.metadata)}.bind(this))},e.prototype.indexOf=function(t){for(var e=0;e<this.elements.length;e++)if(this.elements[e].el===t)return e;return-1},e}),define("components/full-bleed-absolute",[],function(){"use strict";return{adjust:function(t){var e=t.offset().left,n=-1*e,e=e+t.outerWidth()-document.body.offsetWidth,i=parseFloat(t.css("left")),o=parseFloat(t.css("right"));t.css({left:i+n,right:o+e})},reset:function(t){t.css({left:"",right:""})}}}),!function(n){define("jss",[],function(){return function(){a=/((?:\.|#)[^\.\s#]+)((?:\.|#)[^\.\s#]+)/g,l=/(::)(before|after|first-line|first-letter|selection)/,u=/([^:])(:)(before|after|first-line|first-letter|selection)/,e.prototype={get:function(t){if(!this.defaultSheet)return{};if(t)return o(c(this.defaultSheet,t));var e=function(t){for(var e=t.cssRules||t.rules||[],n={},i=0;i<e.length;i++){var o=h(e[i].selectorText);n[o]||(n[o]=[]),n[o].push({sheet:t,index:i,style:e[i].style})}return n}(this.defaultSheet);for(t in e)e[t]=o(e[t]);return e},getAll:function(t){for(var e={},n=0;n<this.sheets.length;n++)i(e,o(c(this.sheets[n],t)));return e},set:function(t,e){this.defaultSheet||(this.defaultSheet=this._createSheet()),e=function(t){var e,n={};for(e in t)n[e.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})]=t[e];return n}(e);var n=c(this.defaultSheet,t);n.length||(n=[p(this.defaultSheet,t)]);for(var i=0;i<n.length;i++){l=a=o=s=r=void 0;var o,r=n[i],s=e;for(o in s){var a=s[o],l=a.indexOf(" !important");r.style.removeProperty(o),0<l?r.style.setProperty(o,a.substr(0,l),"important"):r.style.setProperty(o,a)}}},remove:function(t){if(this.defaultSheet){if(t){for(var e,n,i=c(this.defaultSheet,t),o=0;o<i.length;o++)e=i[o],n=void 0,(n=e.sheet).deleteRule?n.deleteRule(e.index):n.removeRule&&n.removeRule(e.index);return i.length}this._removeSheet(this.defaultSheet),delete this.defaultSheet}},_createSheet:function(){var t=this.doc.createElement("style");return t.type="text/css",t.rel="stylesheet",this.head.appendChild(t),this._getSheetForNode(t)},_getSheetForNode:function(t){for(var e=0;e<this.sheets.length;e++)if(t===this._getNodeForSheet(this.sheets[e]))return this.sheets[e];return null},_getNodeForSheet:function(t){return t.ownerNode||t.owningElement},_removeSheet:function(t){t=this._getNodeForSheet(t);t.parentNode.removeChild(t)}},(t=new e(document)).forDocument=function(t){return new e(t)};var s,a,l,u,t;function c(t,e){var n=t.cssRules||t.rules||[],i=[];e=e.toLowerCase();for(var o=0;o<n.length;o++){var r=n[o].selectorText;!r||r!=e&&r!=function(t){var e="",n=0;for(;null!=(match=a.exec(t))&&""!==match[0];)e=(e=(e+=t.substring(n,match.index))+t.substr(match.index+match[1].length,match[2].length))+t.substr(match.index,match[1].length),n=match.index+match[0].length;return e+=t.substr(n)}(e)&&r!=function(t){if(l.exec(t))return f(t);return t}(e)||i.push({sheet:t,index:o,style:n[o].style})}return i}function p(t,e){var n=t.cssRules||t.rules||[],i=n.length;return function(t,e,n,i){var o,r;if(l.exec(e))r=f(o=e);else{if(!u.exec(e))return!1;o=h(e),r=e}s||(d(t,o,i),n.length<=i&&(s=!0));s&&d(t,r,i);return!0}(t,e,n,i)||d(t,e,i),{sheet:t,index:i,style:n[i].style}}function d(t,e,n){t.insertRule?t.insertRule(e+" { }",n):t.addRule(e,null,n)}function h(t){return t.replace(u,function(t,e,n,i){return e+"::"+i})}function f(t){return t.replace(l,function(t,e,n){return":"+n})}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function o(t){for(var e={},n=0;n<t.length;n++)i(e,function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=t[function(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})}(t[n])];return e}(t[n].style));return e}function e(t){this.doc=t,this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.sheets=this.doc.styleSheets||[]}return"undefined"!=typeof module&&module.exports&&(module.exports=t),n.jss=t}.apply(n,arguments)})}(this),define("components/dropdown-position",["require","lib/jss/jss.0.6","jquery-ui"],function(t){"use strict";t("lib/jss/jss.0.6"),t("jquery-ui");var s={ARROW_WIDTH:36,position:function(t,e,n,i){var o="center",r=t.data("dropdown-layout-align"),r=("right"===r?o="right+"+n:"left"===r&&(o="left-"+n),"top+"+i),n=e.data("dropdown-layout-at")||"center bottom",i={of:e,my:o+" "+r,at:n,collision:"flipfit none",within:document.body,using:this.applyPosition};t.position(i),s.positionArrow(t,e,n)},applyPosition:function(t,e){t.top=Math.round(t.top),e.element.element.css(t)},positionArrow:function(t,e,n){var n=n.split(" ")[0],n="right"===n.substr(0,5)?(i=parseInt(n.substr(5),10),e.offset().left+e.outerWidth()+i):"left"===n.substr(0,4)?(i=parseInt(n.substr(4),10),e.offset().left+i):e.offset().left+e.outerWidth()/2,i=n-t.offset().left-s.ARROW_WIDTH/2,e=t.attr("id"),n={left:i+"px"};jss.remove("#"+e+"::before"),jss.remove("#"+e+" > *::before"),jss.set("#"+e+":before",n),jss.set("#"+e+" > *:before",n)}};return s}),define("components/dropdown-layout",["require","jquery","components/media-size-aware-elements","components/full-bleed-absolute","components/dropdown-position"],function(t){"use strict";function e(t){this.elements=new n(t,this.onChange.bind(this))}var i=t("jquery"),n=t("components/media-size-aware-elements"),o=t("components/full-bleed-absolute"),r=t("components/dropdown-position");return e.prototype.HORIZONTAL_OFFSET=20,e.prototype.VERTICAL_OFFSET=10,e.prototype.start=function(){this.elements.start()},e.prototype.stop=function(){this.elements.stop()},e.prototype.opened=function(t,e){this.elements.add(t.get(0),e)},e.prototype.closed=function(t){this.elements.remove(t.get(0))&&o.reset(t)},e.prototype.updated=function(t){this.elements.update(t.get(0))},e.prototype.onChange=function(t,e,n){t=i(t);"xs"===e?t.is("[data-disable-full-bleed]")||o.adjust(t):t.css({left:"auto",right:"auto"}),r.position(t,n,this.HORIZONTAL_OFFSET,this.VERTICAL_OFFSET)},e}),define("components/disclose-dropdown-v2",["require","jquery-ui","jquery","components/disclose-autoclose-v2","components/dropdown-layout"],function(t){"use strict";t("jquery-ui");function e(t,e){n.apply(this,arguments),this.dropdownLayout=new i(e.eventMediator)}var r=t("jquery"),n=t("components/disclose-autoclose-v2"),i=t("components/dropdown-layout"),o=r.ui.keyCode.DOWN,s=r.ui.keyCode.UP,a=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-dropdown]",e.prototype.eventNamespace=".disclose-dropdown",n.prototype);return e.prototype.start=function(){a.start.call(this),this.dropdownLayout.start(),this.$body.on(this.eventName("keydown"),this.selector,this.toggleKeydownHandler.bind(this))},e.prototype.stop=function(){a.stop.call(this),this.dropdownLayout.stop()},e.prototype.linkClicked=function(t,e,n){var n=r(n.target),i=n.is("button, a"),o=n.is(".js-disclose-dont-close"),n=0<n.closest(".js-disclose-dont-close").length;!i||o||n||this.close(t)},e.prototype.opened=function(t,e){a.opened.call(this,t,e),this.dropdownLayout.opened(e,t),e.on(this.eventName("keydown"),this.targetKeydownHandler.bind(this,e)),e.on(this.eventName("click"),this.linkClicked.bind(this,t,e))},e.prototype.closed=function(t,e){a.closed.call(this,t,e),this.dropdownLayout.closed(e),e.off(this.eventNamespace)},e.prototype.toggleKeydownHandler=function(t){-1===[s,o].indexOf(t.which)||(t.preventDefault(),t=r(t.target),this.isOpen(this.discloseBody(t)))||this.keyboardOpen(t)},e.prototype.keyboardOpen=function(t){this.open(t);t=this.discloseBody(t);this.focusFirstItem(t)},e.prototype.focusFirstItem=function(t){t.find(":tabbable").eq(0).focus()},e.prototype.targetKeydownHandler=function(t,e){var n,i;this.keyboardDisabled(e.target)||-1!==[s,o].indexOf(e.which)&&(e.preventDefault(),n=t.find(":tabbable").not(function(t,e){return this.keyboardDisabled(e)}.bind(this)).get(),i=e.which===o?-1:1,n.some(function(t,e){if(n[e+i]===document.activeElement)return r(t).focus(),!0}))},e}),define("components/disclose-dropdown-location-picker-v2",["require","components/disclose-dropdown-v2"],function(t){"use strict";function e(){n.apply(this,arguments)}var n=t("components/disclose-dropdown-v2"),i=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-dropdown-location-picker]",e.prototype.eventNamespace=".disclose-dropdown-location-picker",n.prototype);return e.prototype.opened=function(t,e){i.opened.call(this,t,e),this.$body.on(this.eventName("mousedown"),".pac-container",this.autocompleteMousedownHandler.bind(this,e))},e.prototype.autocompleteMousedownHandler=function(){this.autocompleteClicked=!0},e.prototype.outsideClickHandler=function(t,e,n){this.autocompleteClicked?this.autocompleteClicked=!1:i.outsideClickHandler.call(this,t,e,n)},e}),define("components/disclose-hover-v3",["require","components/disclose-dropdown-v2","jquery","whatInput"],function(t){"use strict";function e(){n.apply(this,arguments)}var n=t("components/disclose-dropdown-v2"),r=t("jquery"),s=t("whatInput"),a=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-hover]",e.prototype.eventNamespace=".disclose-hover",e.prototype.CLOSE_DELAY=500,n.prototype);return e.prototype.start=function(){a.start.call(this),this.$body.on("mouseover"+this.eventNamespace,this.selector,this.toggleOverHandler.bind(this)),this.$body.on("mouseleave"+this.eventNamespace,this.selector,this.toggleLeaveHandler.bind(this))},e.prototype.toggleHandler=function(t){var e=r(t.target).closest(this.selector),n=e.is("a"),i=s.ask(),o=e.is("[data-disclose-hover--allow-enter-open]"),e=e.is("[data-disclose-hover--prevent-enter-open]");"touch"!==i||n||a.toggleHandler.call(this,t),"keyboard"!==i||e||n&&!o||a.toggleHandler.call(this,t)},e.prototype.opened=function(t,e){a.opened.call(this,t,e),e.on("mouseleave"+this.eventNamespace,this.discloseBodyLeaveHandler.bind(this,t)),e.on("mouseover"+this.eventNamespace,this.discloseBodyOverHandler.bind(this,t))},e.prototype.closed=function(t,e){a.closed.call(this,t,e),e.off(this.eventNamespace)},e.prototype.open=function(t){this.$body.find(this.selector).each(function(t,e){this.close(r(e))}.bind(this)),a.open.call(this,t)},e.prototype.toggleOverHandler=function(t){"mouse"===s.ask()&&(t=r(t.target).closest(this.selector),clearTimeout(t.data("closeTimeout")),this.open(t))},e.prototype.toggleLeaveHandler=function(t){var e=r(t.target).closest(this.selector),n=this.discloseBody(e);this.elementContains(n,t.relatedTarget)||e.data("closeTimeout",setTimeout(this.close.bind(this,e),this.CLOSE_DELAY))},e.prototype.discloseBodyOverHandler=function(t){clearTimeout(t.data("closeTimeout"))},e.prototype.discloseBodyLeaveHandler=function(t,e){this.elementContains(t,e.relatedTarget)||t.data("closeTimeout",setTimeout(this.close.bind(this,t),this.CLOSE_DELAY))},e}),define("components/disclose-lazy-buylinks",["require","core/ajax","components/disclose-dropdown-v2"],function(t){"use strict";function e(t){n.apply(this,arguments),this.$el=t,this.requests={}}var r=t("core/ajax"),n=t("components/disclose-dropdown-v2"),s=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-lazy-buylinks]",e.prototype.eventNamespace=".lazy-buylink",n.prototype);return e.prototype.open=function(t){var e,n,i=t.data("openedWithKeyboard"),o=(t.data("openedWithKeyboard",void 0),this.discloseBody(t));o.data("hasBuylinks")||(e=t.data("lazyBuylinkUrl"),n=o.attr("id"),this.requests[n]=r.get(e,null,null,this.responseHandler.bind(this,i,t,o))),s.open.call(this,t)},e.prototype.keyboardOpen=function(t){t.data("openedWithKeyboard",!0),s.keyboardOpen.call(this,t)},e.prototype.close=function(t){var e=t.attr("aria-controls");this.requests[e].abort(),s.close.call(this,t)},e.prototype.responseHandler=function(t,e,n,i,o){i||(n.find("[data-lazy-buylinks-loading]").replaceWith(o),n.data("hasBuylinks",!0),this.dropdownLayout.updated(n),t&&e[0]===document.activeElement&&this.focusFirstItem(n))},e}),define("components/disclose-collapsing-nav-v2",["require","components/disclose-dropdown-v2"],function(t){"use strict";function e(t,e){this.app=e,n.apply(this,arguments)}var n=t("components/disclose-dropdown-v2"),i=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-collapsing-nav]",e.prototype.eventNamespace=".disclose-collapsing-nav",n.prototype);return e.prototype.start=function(){i.start.call(this),this.updateSubscription=this.app.eventMediator.subscribe("collapsingNav.beforeUpdate",this.close.bind(this))},e.prototype.stop=function(){i.stop.call(this),this.app.eventMediator.unsubscribe(this.updateSubscription)},e}),define("components/disclose-artwork",["require","jquery","components/disclose-autoclose-v2"],function(t){"use strict";function e(t,e){this.app=e,i.apply(this,arguments)}var n=t("jquery"),i=t("components/disclose-autoclose-v2"),o=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-artwork]",e.prototype.eventNamespace=".disclose-artwork",i.prototype);return e.prototype.opened=function(t,e){o.opened.call(this,t,e),e.on(this.eventName("click"),this.discloseClickHandler.bind(this))},e.prototype.closed=function(t,e){o.closed.call(this,t,e),e.off(this.eventNamespace)},e.prototype.discloseClickHandler=function(t){t=n(t.delegateTarget).attr("id"),t=n(this.selector+'[aria-controls="'+t+'"]');this.close(t)},e}),define("components/disclose-remove",["require","components/disclose-base"],function(t){"use strict";function e(){n.apply(this,arguments)}var n=t("components/disclose-base"),i=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-remove]",e.prototype.eventNamespace=".disclose-remove",n.prototype);return e.prototype.opened=function(t,e){i.opened.call(this,t,e),t.remove()},e}),define("components/disclose-search",["require","jquery-ui","components/disclose-autoclose-v2"],function(t){"use strict";t("jquery-ui");function e(){n.apply(this,arguments)}var n=t("components/disclose-autoclose-v2"),i=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-search]",e.prototype.eventNamespace=".disclose-search",n.prototype);return e.prototype.opened=function(t,e){i.opened.call(this,t,e),this.focusFirstItem(e)},e.prototype.focusFirstItem=function(t){t.find(":tabbable").eq(0).focus()},e}),define("components/disclose-select",["require","jquery","components/disclose-dropdown-v2"],function(t){"use strict";function e(){n.apply(this,arguments)}var i=t("jquery"),n=t("components/disclose-dropdown-v2"),o=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-select]",e.prototype.eventNamespace=".disclose-select",n.prototype);return e.prototype.linkClicked=function(t,e,n){o.linkClicked.apply(this,arguments);n=i(n.target),t.text(n.text()),t=this.findSelectedClass(e);e.find("."+t).removeClass(t),n.addClass(t)},e.prototype.findSelectedClass=function(t){var e;return t.find("a, button").each(function(){var t=i(this).attr("class"),t=/[^\s]*--selected/.exec(t);if(t)return e=t[0],!1}),e},e}),define("components/edit-scrobble",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e,this.$el=n("body")}var n=t("jquery");return e.prototype.start=function(){this.$el.on("submit.edit-scrobble","[data-edit-scrobble]",function(t){t.preventDefault();var t=n(t.currentTarget),e=t.attr("action"),t={post:t.serialize(),onmessage:this.onmessage.bind(this,t)};this.app.modal.open(e,t)}.bind(this))},e.prototype.stop=function(){this.$el.off(".edit-scrobble")},e.prototype.onmessage=function(t,e){var n=-1!==e.indexOf("data-edit-scrobble-bulk"),t=t.parents("[data-scrobble-row]");n?(n=t.attr("data-edit-scrobble-id"),this.$el.find("[data-edit-scrobble-id="+n+"]").toArray().forEach(this.replaceRow.bind(this,e))):this.replaceRow(e,t[0])},e.prototype.replaceRow=function(t,e){e=n(e),t=n(t).find("[data-scrobble-row]");t.addClass("chartlist-row--flash"),t.addClass(e.attr("class")),t.find(".chartlist-timestamp").replaceWith(e.find(".chartlist-timestamp")),t.find("input[name=timestamp]").replaceWith(e.find("input[name=timestamp]")),e.replaceWith(t)},e}),define("core/math-v2",[],function(){"use strict";return{lerp:function(t,e,n){return t+n*(e-t)},mod:function(t,e){return(t%e+e)%e},sign:function(t){return t<0?-1:1},polarToCartesian:function(t,e){return[e*Math.cos(t),e*Math.sin(t)]}}}),define("components/features-footer",["require","jquery","core/math-v2"],function(t){"use strict";function e(t){this.$el=t}var n=t("jquery"),i=t("core/math-v2");return e.prototype.SLIDE_GESTURE_LENGTH_PERCENT=10,e.prototype.start=function(){this.$el.on("click.features-footer",".js-features-footer-next",this.nextClicked.bind(this)),this.$el.on("click.features-footer",".js-features-footer-previous",this.previousClicked.bind(this)),this.$el.on("touchstart.features-footer",this.touchStarted.bind(this)),this.$el.on("touchmove.features-footer",this.touchMoved.bind(this)),this.$el.on("touchend.features-footer",this.touchEnded.bind(this)),this.$itemsContainer=n(".js-features-footer-items",this.$el),this.$currentTarget=this.$itemsContainer.children().eq(0),this.$dots=n(".js-features-footer-dot",this.$el),this.currentDotIndex=0},e.prototype.stop=function(){this.$el.off(".features-footer")},e.prototype.nextClicked=function(){this.transitionNext()},e.prototype.previousClicked=function(){this.transitionPrevious()},e.prototype.touchStarted=function(t){this.touchStartX=this.touchX(t),this.swiping=!1,this.disableAnimation()},e.prototype.touchMoved=function(t){this.swiping||("swipe"===(t=this.decodeGesture(t)).type?(this.swiped(t),this.swiping=!0):this.dragged(t))},e.prototype.touchEnded=function(){this.enableAnimation(),this.$itemsContainer.css("left",0)},e.prototype.swiped=function(t){"left"===t.direction?this.transitionNext():this.transitionPrevious()},e.prototype.dragged=function(t){this.$itemsContainer.css("left",t.delta)},e.prototype.transitionNext=function(){var t=this.nextItem();this.transitionTo(t),this.shiftDot(1)},e.prototype.transitionPrevious=function(){var t=this.previousItem();this.transitionTo(t),this.shiftDot(-1)},e.prototype.transitionTo=function(t){var e=t.position().left,n=parseInt(this.$itemsContainer.css("left"),10);this.disableAnimation(),this.$itemsContainer.css("left",n+e),this.moveItemToFirstInDom(t),t.position(),this.enableAnimation(),this.$itemsContainer.css("left",0),this.$currentTarget=t},e.prototype.moveItemToFirstInDom=function(t){var e=this.$itemsContainer.children(),t=e.index(t);this.$itemsContainer.append(e.slice(0,t)),this.$itemsContainer.children().each(function(t,e){t=t<3;n(e).attr("aria-hidden",t?"false":"true"),n(e).find("a:not(.js-link-block-cover-link)").attr("tabindex",t?"0":"-1")})},e.prototype.shiftDot=function(t){this.currentDotIndex=i.mod(this.currentDotIndex+t,this.$dots.length),this.$dots.each(function(t,e){n(e).toggleClass("features-footer-dot--active",t===this.currentDotIndex)}.bind(this))},e.prototype.nextItem=function(){var t=this.$currentTarget.next();return t.length?t:this.$itemsContainer.children().eq(0)},e.prototype.previousItem=function(){var t=this.$currentTarget.prev();return t.length?t:this.$itemsContainer.children().eq(-1)},e.prototype.enableAnimation=function(){this.$el.removeClass("features-footer-disable-transition")},e.prototype.disableAnimation=function(){this.$el.addClass("features-footer-disable-transition")},e.prototype.touchX=function(t){return t.originalEvent.touches[0].clientX-this.$el[0].getBoundingClientRect().left},e.prototype.decodeGesture=function(t){t=this.touchX(t)-this.touchStartX;return 100/this.$el.width()*Math.abs(t)>=this.SLIDE_GESTURE_LENGTH_PERCENT?{type:"swipe",direction:0<i.sign(t)?"right":"left"}:{type:"drag",delta:t}},e}),define("components/form-field",[],function(){"use strict";function t(t,e,n){this.$input=t,this.messages=e,this.validator=n}return t.prototype.stop=function(){this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=void 0},t.prototype.focusHandler=function(){this.messages.show(this.messages.HELP)},t.prototype.blurHandler=function(){this.messages.hide(this.messages.HELP)},t.prototype.validate=function(){return new Promise(function(t,e){this.messages.showValidating(),this.validator.validate(this.$input.val(),this.validationHandler.bind(this,t,e))}.bind(this))},t.prototype.validationHandler=function(t,e,n,i){this.messages.hideValidating(),(n||!i?e:i.valid?(this.messages.show(this.messages.SUCCESS,i),t):(this.messages.show(this.messages.ERROR,i),e))()},t}),define("components/live-validate-form-field",["require","components/form-field"],function(t){"use strict";function e(t,e,n,i){o.call(this,t,e,n),this.validationDelay=i,this.lastValue=t.val()}var o=t("components/form-field");return((e.prototype=Object.create(o.prototype)).constructor=e).prototype.inputHandler=function(){this.hasChanged()&&(this.validator.cancel(),this.messages.hideValidating(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(this.updated.bind(this),this.validationDelay))},e.prototype.changeHandler=function(){(this.updateTimeout||this.hasChanged())&&this.updated()},e.prototype.updated=function(){this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=void 0,this.validate()},e.prototype.hasChanged=function(){var t=this.$input.val(),e=t!==this.lastValue;return this.lastValue=t,e},e}),!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(S){var e=Object.prototype.toString,j=Array.isArray||function(t){return"[object Array]"===e.call(t)};function u(t){return"function"==typeof t}function _(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"==typeof t&&e in t}var n=RegExp.prototype.test;var i=/\S/;function P(t){return!n.call(i,t)}var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var q=/\s*/,$=/\s+/,M=/\s*=/,R=/\s*\}/,N=/#|\^|\/|>|\{|&|=|!/;function r(t,e){if(!t)return[];var n,i,o,r=[],s=[],a=[],l=!1,u=!1;function c(t){if("string"==typeof t&&(t=t.split($,2)),!j(t)||2!==t.length)throw new Error("Invalid tags: "+t);n=new RegExp(_(t[0])+"\\s*"),i=new RegExp("\\s*"+_(t[1])),o=new RegExp("\\s*"+_("}"+t[1]))}c(e||S.tags);for(var p,d,h,f,y,m,v=new D(t);!v.eos();){if(p=v.pos,h=v.scanUntil(n))for(var g=0,b=h.length;g<b;++g)if(P(f=h.charAt(g))?a.push(s.length):u=!0,s.push(["text",f,p,p+1]),p+=1,"\n"===f){if(l&&!u)for(;a.length;)delete s[a.pop()];else a=[];u=l=!1}if(!v.scan(n))break;if(l=!0,d=v.scan(N)||"name",v.scan(q),"="===d?(h=v.scanUntil(M),v.scan(M),v.scanUntil(i)):"{"===d?(h=v.scanUntil(o),v.scan(R),v.scanUntil(i),d="&"):h=v.scanUntil(i),!v.scan(i))throw new Error("Unclosed tag at "+v.pos);if(y=[d,h,p,v.pos],s.push(y),"#"===d||"^"===d)r.push(y);else if("/"===d){if(!(m=r.pop()))throw new Error('Unopened section "'+h+'" at '+p);if(m[1]!==h)throw new Error('Unclosed section "'+m[1]+'" at '+p)}else"name"===d||"{"===d||"&"===d?u=!0:"="===d&&c(h)}if(m=r.pop())throw new Error('Unclosed section "'+m[1]+'" at '+v.pos);for(var w,x=function(t){for(var e,n,i=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}(s),k=[],C=k,A=[],T=0,E=x.length;T<E;++T)switch((w=x[T])[0]){case"#":case"^":C.push(w),A.push(w),C=w[4]=[];break;case"/":A.pop()[5]=w[2],C=0<A.length?A[A.length-1][4]:k;break;default:C.push(w)}return k}function D(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function t(){this.cache={}}D.prototype.eos=function(){return""===this.tail},D.prototype.scan=function(t){var t=this.tail.match(t);return t&&0===t.index?(t=t[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t):""},D.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e,n=this.cache;if(n.hasOwnProperty(t))e=n[t];else{for(var i,o,r=this,s=!1;r;){if(0<t.indexOf("."))for(e=r.view,i=t.split("."),o=0;null!=e&&o<i.length;)o===i.length-1&&(s=a(e,i[o])),e=e[i[o++]];else e=r.view[t],s=a(r.view,t);if(s)break;r=r.parent}n[t]=e}return e=u(e)?e.call(this.view):e},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,e){var n=this.cache,i=n[t];return i=null==i?n[t]=r(t,e):i},t.prototype.render=function(t,e,n){var i=this.parse(t),e=e instanceof s?e:new s(e);return this.renderTokens(i,e,n,t)},t.prototype.renderTokens=function(t,e,n,i){for(var o,r,s,a="",l=0,u=t.length;l<u;++l)s=void 0,"#"===(r=(o=t[l])[0])?s=this.renderSection(o,e,n,i):"^"===r?s=this.renderInverted(o,e,n,i):">"===r?s=this.renderPartial(o,e,n,i):"&"===r?s=this.unescapedValue(o,e):"name"===r?s=this.escapedValue(o,e):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},t.prototype.renderSection=function(t,e,n,i){var o=this,r="",s=e.lookup(t[1]);if(s){if(j(s))for(var a=0,l=s.length;a<l;++a)r+=this.renderTokens(t[4],e.push(s[a]),n,i);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)r+=this.renderTokens(t[4],e.push(s),n,i);else if(u(s)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(e.view,i.slice(t[3],t[5]),function(t){return o.render(t,e,n)}))&&(r+=s)}else r+=this.renderTokens(t[4],e,n,i);return r}},t.prototype.renderInverted=function(t,e,n,i){var o=e.lookup(t[1]);if(!o||j(o)&&0===o.length)return this.renderTokens(t[4],e,n,i)},t.prototype.renderPartial=function(t,e,n){return n&&null!=(t=u(n)?n(t[1]):n[t[1]])?this.renderTokens(this.parse(t),e,n,t):void 0},t.prototype.unescapedValue=function(t,e){e=e.lookup(t[1]);if(null!=e)return e},t.prototype.escapedValue=function(t,e){e=e.lookup(t[1]);if(null!=e)return S.escape(e)},t.prototype.rawValue=function(t){return t[1]},S.name="mustache.js",S.version="2.3.0",S.tags=["{{","}}"];var l=new t;return S.clearCache=function(){return l.clearCache()},S.parse=function(t,e){return l.parse(t,e)},S.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(j(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return l.render(t,e,n)},S.to_html=function(t,e,n,i){t=S.render(t,e,n);if(!u(i))return t;i(t)},S.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return o[t]})},S.Scanner=D,S.Context=s,S.Writer=t,S}),define("components/field-messages",["require","jquery","mustache"],function(t){"use strict";function e(t,e,n){this.$group=t.parents(".js-form-group"),this.$controls=t.parents(".js-form-group-controls"),this.templates=e,this.options=n||{}}var n=t("jquery"),i=t("mustache");return e.prototype.SHOW_HELP_CLASS="form-validation--show-help-text",e.prototype.ERROR_STATE_CLASS="has-error",e.prototype.SUCCESS_STATE_CLASS="has-success",e.prototype.HELP="help",e.prototype.SUCCESS="success",e.prototype.ERROR="error",e.prototype.show=function(t,e){if(t===this.HELP){if(!!this.messages().length)return;this.showHelp()}t===this.SUCCESS&&(this.clear(),this.showSuccess(e)),t===this.ERROR&&(this.clear(),this.showError(e)),this.lastState=[].slice.call(arguments)},e.prototype.hide=function(t){t===this.HELP&&this.hideHelp()},e.prototype.clear=function(){this.$group.removeClass(this.ERROR_STATE_CLASS),this.$group.removeClass(this.SUCCESS_STATE_CLASS),this.$controls.removeClass(this.SHOW_HELP_CLASS),this.messages().remove()},e.prototype.showValidating=function(){var t;this.clear(),!1!==this.options.showValidation&&(t=n(i.render(this.templates.validating)),this.$controls.append(t))},e.prototype.hideValidating=function(){this.clear(),this.lastState&&this.show.apply(this,this.lastState)},e.prototype.showSuccess=function(t){!1!==this.options.showSuccess&&(this.$group.addClass(this.SUCCESS_STATE_CLASS),t=n(i.render(this.templates.success,t)),this.$controls.append(t))},e.prototype.showError=function(t){this.$group.addClass(this.ERROR_STATE_CLASS);t=n(i.render(this.templates.error,t));this.$controls.append(t)},e.prototype.showHelp=function(){this.$controls.addClass(this.SHOW_HELP_CLASS)},e.prototype.hideHelp=function(){this.$controls.removeClass(this.SHOW_HELP_CLASS)},e.prototype.messages=function(){return this.$controls.find(".js-form-group-success, .js-form-group-error, .js-form-group-validating")},e}),define("components/form-validation.js",["require","jquery","core/ajax","components/live-validate-form-field","components/field-messages"],function(t){"use strict";function n(t,e,n){this.name=t,this.$fields=e,this.endpoint=n}function e(t){this.$el=t,this.endpoint=t.data("validation-endpoint"),this.templates={success:this.$el.find(".js-field-success-template").text(),error:this.$el.find(".js-field-errors-template").text(),validating:this.$el.find(".js-field-validating-template").text()}}var i=t("jquery"),o=t("core/ajax"),r=t("components/live-validate-form-field"),s=t("components/field-messages");n.prototype.validate=function(t,e){var n=this.$fields.serialize();this.request&&this.request.abort(),this.request=o.post(this.endpoint,null,n,this.responseHandler.bind(this,e))},n.prototype.responseHandler=function(t,e,n){t(e,n&&n[this.name])},n.prototype.cancel=function(){this.request&&this.request.abort()};return e.prototype.VALIDATION_DELAY=2e3,e.prototype.start=function(){this.createFields(),this.bindEvents()},e.prototype.stop=function(){this.$el.off(".form-validation"),i.each(this.fields,function(){this.stop()})},e.prototype.createFields=function(){this.fields={},this.$el.find("input[name]").each(function(t,e){var e=i(e),n=e.attr("name");this.fields[n]=this.createField(e)}.bind(this))},e.prototype.createField=function(t){var e=new s(t,this.templates);return new r(t,e,new n(t.attr("name"),this.$el,this.endpoint),this.VALIDATION_DELAY)},e.prototype.bindEvents=function(){this.$el.on("focusin.form-validation",this.fieldHandler.bind(this,"focusHandler")),this.$el.on("focusout.form-validation",this.fieldHandler.bind(this,"blurHandler")),this.$el.on("change.form-validation",this.fieldHandler.bind(this,"changeHandler")),this.$el.on(["keyup.form-validation","contextmenu.form-validation","input.form-validation"].join(" "),this.fieldHandler.bind(this,"inputHandler"))},e.prototype.fieldHandler=function(t,e){e=i(e.target).attr("name"),e=this.fields[e];e&&e[t]()},e}),define("components/focus-controls",["require","jquery"],function(t){"use strict";function e(){this.$body=n(document.body)}var n=t("jquery");return e.prototype={namespace:".focus-controls",container:".js-focus-controls-container",start:function(){this.$body.on("focusin"+this.namespace,this.container,this.focusin.bind(this)),this.$body.on("focusout"+this.namespace,this.container,this.focusout.bind(this)),this.$body.on("mouseenter"+this.namespace,this.container,this.focusin.bind(this)),this.$body.on("mouseleave"+this.namespace,this.container,this.mouseleave.bind(this)),this.$body.addClass("enable-focus-controls")},stop:function(){this.$body.off(this.namespace),this.$body.removeClass("enable-focus-controls")},focusin:function(t){this.parentOrSelf(t.target,this.container).addClass("show-focus-controls")},focusout:function(t){this.parentOrSelf(t.target,this.container).removeClass("show-focus-controls")},mouseleave:function(t){t=this.parentOrSelf(t.target,this.container);t.find(".focus-control .disclose-active").length||t.removeClass("show-focus-controls")},parentOrSelf:function(t,e){t=n(t);return t.is(e)?t:t.parents(e)}},e}),define("components/async-content",["require","jquery","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.moduleLoader=e}var n=t("jquery"),i=t("core/ajax");return e.prototype.load=function(t){this.abort(),this.$el.addClass("async-content-loading"),this.request=i.get(t.url,null,t.data,this.responded.bind(this,t.errorMessage,t.callback))},e.prototype.stop=function(){this.abort(),this.moduleLoader.stopAllModules(this.$el)},e.prototype.abort=function(){this.request&&this.request.abort()},e.prototype.responded=function(t,e,n,i){n?this.failed(t):(this.succeeded(i),e&&e())},e.prototype.failed=function(t){t&&(this.$el.removeClass("async-content-loading"),t=n("<p></p>").text(t).addClass("async-content-error-message"),this.$el.append(t),this.$el.addClass("async-content-failed"))},e.prototype.succeeded=function(t){this.$el.html(t),this.$el.removeClass("async-content-loading"),this.$el.addClass("async-content-loaded"),this.moduleLoader.startAllModules(this.$el)},e}),define("components/lazy-load-v3",["require","components/async-content","shim/on-screen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.asyncContent=new n(t,e.moduleLoader)}var n=t("components/async-content"),i=t("shim/on-screen");return e.prototype.scrollContainer=null,e.prototype.start=function(){this.$el.is("[data-lazy-load-inverted-bg]")&&this.$el.addClass("inverted-bg"),this.$el.is("[data-lazy-load-when-on-screen]")?this.onScreen=new i(this.$el.get(0),this.entered.bind(this),{root:this.scrollContainer}):this.load(),this.$el.addClass("async-content-loading")},e.prototype.stop=function(){this.asyncContent.stop(),this.onScreen&&this.onScreen.destroy()},e.prototype.load=function(){var t=this.$el.data("lazy-load-content"),e=this.$el.data("lazy-load-error-message");this.asyncContent.load({url:t,errorMessage:e})},e.prototype.entered=function(){this.onScreen.destroy(),this.load()},e}),define("components/lazy-filter",["require","jquery","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var o=t("jquery"),i=t("core/ajax");return e.prototype.start=function(){this.id=this.$el.attr("data-lazy-filter-options"),this.$options=o("#"+this.id),this.$options.on("click.lazy-filter","a",this.clickHandler.bind(this))},e.prototype.stop=function(){this.request&&this.request.abort(),this.app.moduleLoader.stopAllModules(this.$el)},e.prototype.clickHandler=function(t){t.preventDefault();var t=o(t.target).attr("data-partial-href"),n=this.update.bind(this);this.request=i.get(t,null,null,function(t,e){n(e)})},e.prototype.update=function(t){var e=o(t),n=o("[data-lazy-filter-more-link="+this.id+"]"),i=e.find("[data-lazy-filter-more-link]").attr("href"),n=(n.attr("href",i),this.dataAttributeValues(e,"data-lazy-filter-show-element")),i=(n&&o("#"+n).removeClass("hidden"),this.dataAttributeValues(e,"data-lazy-filter-hide-element"));i&&o("#"+i).addClass("hidden"),this.$el.html(t),this.app.moduleLoader.startAllModules(this.$el)},e.prototype.dataAttributeValues=function(t,e){return t.find(`[${e}]`).addBack(`[${e}]`).attr(e)},e}),define("components/link-block",["require","jquery"],function(t){"use strict";function e(t){this.$el=t}var i=t("jquery");return e.prototype.start=function(){this.$el.on("mouseover.link-block, touchstart.link-block",".js-link-block-cover-link",this.mouseOverHandler.bind(this)),this.$el.on("mouseout.link-block, touchend.link-block",".js-link-block-cover-link",this.mouseOutHandler.bind(this,".link-block-target")),i(window).on("blur.link-block, pagehide.link-block",function(){this.removeHover(this.$el.find(".js-link-block"))}.bind(this)),this.$el.on("mouseover.link-block, touchstart.link-block, focusin.link-block",".link-block-target",this.mouseOverHandler.bind(this)),this.$el.on("mouseout.link-block, touchend.link-block, focusout.link-block",".link-block-target",this.mouseOutHandler.bind(this,".js-link-block-cover-link"))},e.prototype.stop=function(){i(window).off(".link-block"),this.$el.off(".link-block")},e.prototype.mouseOverHandler=function(t){this.addHover(i(t.target))},e.prototype.mouseOutHandler=function(t,e){var n=i(e.target),e=i(e.relatedTarget);n.closest(".js-link-block").get(0)==e.closest(".js-link-block").get(0)&&e.closest(t).length||this.removeHover(n)},e.prototype.addHover=function(t){t.closest(".js-link-block").addClass("link-block--hover")},e.prototype.removeHover=function(t){t.closest(".js-link-block").removeClass("link-block--hover")},e}),define("components/listening-report-modal-button",["require","jquery"],function(t){"use strict";function e(t,e){this.$el=t}t("jquery");return e.prototype.start=function(){var t=document.createElement("button");t.type="submit",t.tabIndex="-1",t.ariaHidden="true",t.classList.add("js-link-block-cover-link"),t.classList.add("link-block-cover-link"),this.$el[0].classList.add("link-block"),this.$el[0].classList.add("js-link-block"),this.$el.append(t)},e}),define("components/logout-form",["require","jquery"],function(t){"use strict";function e(t,e){this.$el=t}t("jquery");return e.prototype.start=function(){this.$el.on("click.logout-form",".js-logout-button",this.logout.bind(this))},e.prototype.stop=function(){this.$el.off(".logout-form")},e.prototype.logout=function(t){t.preventDefault(),this.$el.submit()},e}),!function(t){define("bootstrap",["jquery"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(o){"use strict";function n(t){t=t.attr("data-target")||(t=t.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(t)}function r(i){return this.each(function(){var t=o(this),e=t.data("bs.collapse"),n=o.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new s(this,n)),"string"==typeof i&&e[i]()})}function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,e),this.$trigger=o('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()}s.VERSION="3.3.5",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(i=t.data("bs.collapse"))&&i.transitioning)){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(r.call(t,"hide"),i||t.data("bs.collapse",null));var n=this.dimension(),e=(this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!o.support.transition)return e.call(this);var i=o.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[n](this.$element[0][i])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t,e=o.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented())return e=this.dimension(),this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,t=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},o.support.transition?void this.$element[e](0).one("bsTransitionEnd",o.proxy(t,this)).emulateTransitionEnd(s.TRANSITION_DURATION):t.call(this)}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return o(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(t,e){e=o(e);this.addAriaAndCollapsedClass(n(e),e)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=o.fn.collapse;o.fn.collapse=r,o.fn.collapse.Constructor=s,o.fn.collapse.noConflict=function(){return o.fn.collapse=t,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=o(this),t=(e.attr("data-target")||t.preventDefault(),n(e)),e=t.data("bs.collapse")?"toggle":e.data();r.call(t,e)})}(jQuery)}.apply(t,arguments)})}(this),define("components/masthead",["require","jquery","lodash","bootstrap"],function(t){"use strict";t("jquery"),t("lodash"),t("bootstrap");return function(t){}}),define("components/open-modal",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e}var n=t("jquery");return e.prototype.start=function(){n("body").on("click.open-modal","[data-open-modal]",this.open.bind(this)),n("body").on("click.open-modal","[data-close-modal]",this.close.bind(this))},e.prototype.stop=function(){n("body").off("click.open-modal")},e.prototype.open=function(t){var e;t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(e=n(t.currentTarget),t.preventDefault(),e.data("modal-el")?this.app.modal.show(n(e.data("modal-el")).prop("outerHTML")):this.app.modal.open(e.data("open-modal")||e.attr("href")))},e.prototype.close=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.preventDefault(),this.app.modal.close())},e}),define("components/form-loading",[],function(){"use strict";return{loading:function(t){t=t.find("[type=submit]");t.attr("disabled",!0),t.addClass("btn--loading")},done:function(t){t=t.find("[type=submit]");t.attr("disabled",!1),t.removeClass("btn--loading")}}}),define("components/prevent-resubmit-v2",["require","jquery","components/form-loading"],function(t){"use strict";function e(){this.$el=n("body"),this.submitted=!1}var n=t("jquery"),i=t("components/form-loading");return e.prototype={selector:"[data-prevent-resubmit]",start:function(){this.$el.on("submit.preventResubmit",this.selector,this.submitHandler.bind(this)),this.$el.on("prevent-resubmit-done.preventResubmit",this.selector,this.doneHandler.bind(this))},stop:function(){this.$el.off(".preventResubmit")},submitHandler:function(t){var e=n(t.target);e.data("prevent-resubmit-submitted")?t.preventDefault():(i.loading(e),e.data("prevent-resubmit-submitted",!0))},doneHandler:function(t){t=n(t.target);t.data("prevent-resubmit-submitted",!1),i.done(t)}},e}),define("components/collapsing-nav-v2",["require","jquery","uuid"],function(t){"use strict";function e(t,e){this.$el=t,this.eventMediator=e.eventMediator}var s=t("jquery"),i=t("uuid");return e.prototype={start:function(){var t="nav-"+i(),e=(this.$list=this.$el.find(".js-navlist-items"),this.$tabs=this.$list.find("li"),this.$list.parent()),n=s("<div></div>").addClass("disclose-hide").addClass("navlist-hidden-list-wrap").attr("id",t),t=(this.$el.is("[collapsing-nav-no-more-wrap]")||(e=s("<div></div>").addClass("navlist-more-wrap"),this.$list.after(e)),this.$button=s("<button></button>").text(this.$el.data("moreString")).attr("aria-expanded",!1).attr("aria-controls",t).attr("data-disclose-collapsing-nav",!0).addClass("navlist-more"),e.append(this.$button),this.$list.clone());t.find("[data-tour-name]").remove(),t.add(t.find("*")).removeAttr("class"),t.addClass("navlist-hidden-list"),n.append(t),e.append(n),this.$hiddenTabs=t.find("li"),s(window).on("resize.collapsing-nav",this.resizeHandler.bind(this)),this.recommendedNextSubscription=this.eventMediator.subscribe("recommendednext.started",this.resizeHandler.bind(this)),this.$list.css("position","relative"),this.updateMoreMenu()},stop:function(){s(window).off(".collapsing-nav"),this.eventMediator.unsubscribe(this.recommendedNextSubscription)},updateMoreMenu:function(){var i=this,o=(this.eventMediator.publish("collapsingNav.beforeUpdate",this.$button),this.hideButton(),this.$tabs.removeClass("navlist-item--hidden"),this.$tabs.map(function(){var t=s(this);return Math.floor(t.position().left+t.outerWidth(!0))}).get()),r=this.$el.width();o[o.length-1]>r?(this.showButton(),r-=this.$button.outerWidth(!0)):this.hideButton(),this.$tabs.each(function(t){var e=s(this),n=i.$hiddenTabs.eq(t);o[t]>r?(e.addClass("navlist-item--hidden"),n.removeClass("navlist-more-item--hidden")):(e.removeClass("navlist-item--hidden"),n.addClass("navlist-more-item--hidden"))})},showButton:function(){this.$button.removeClass("navlist-more--hidden"),this.$el.addClass("navlist--more-visible")},hideButton:function(){this.$button.addClass("navlist-more--hidden"),this.$el.removeClass("navlist--more-visible")},resizeHandler:function(){this.updateMoreMenu()}},e}),define("components/primary-nav",["require","jquery","lodash","components/collapsing-nav-v2"],function(t){"use strict";function e(){o.apply(this,arguments)}var n=t("jquery"),i=t("lodash"),o=t("components/collapsing-nav-v2"),r=(e.prototype=Object.create(o.prototype),o.prototype);return(e.prototype.constructor=e).prototype.start=function(){r.start.call(this);var t=i.debounce(this.updateMoreMenu.bind(this),100);n(window).resize(t)},e}),define("components/submit-to-modal",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e}var n=t("jquery");return e.prototype.start=function(){n("body").on("submit.submit-to-modal","[data-submit-to-modal]",function(t){t.preventDefault();var t=n(t.currentTarget),e=!1,e=t.attr("action")?t.attr("action"):t.data("modal-action"),t={post:t.serialize()};this.app.modal.open(e,t)}.bind(this))},e.prototype.stop=function(){n("body").off(".submit-to-modal")},e}),define("components/spotify-scrobbling-prompt",[],function(){"use strict";function t(t,e){this.$el=t,this.app=e}return t.prototype.start=function(){this.subscription=this.app.eventMediator.subscribe("player.spotify.connected",this.connected.bind(this))},t.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.subscription)},t.prototype.connected=function(t){t.show_scrobbling_prompt&&this.$el.removeClass("masthead-popup--hidden")},t}),define("social/auth-window",["require","core/ajax","core/browser-api","jquery"],function(t){"use strict";var e=t("core/ajax"),s=t("core/browser-api"),a=t("jquery");function l(t,i,o){return new Promise(function(e,n){i.location=t,s.window.addEventListener("message",function(t){t.origin===window.location.protocol+"//"+window.location.host&&((t=t.data&&t.data[o])&&!0===t.authenticated&&(i.close(),e(t)),t)&&!1===t.authenticated&&(i.close(),n(t))})})}function n(t,e){var n=a(s.window),i=s.window.screenLeft||s.window.screenX,o=s.window.screenTop||s.window.screenY,r=n.width(),n=n.height();return a.map({left:i+r/2-t/2,top:o+n/2-e/2,width:t,height:e},function(t,e){return[e,t].join("=")}).join(",")}function u(t,e){t.closed?e():setTimeout(u.bind({},t,e),500)}return{status:function(t,o){var r=s.window.open("","_blank",n(720,720));return new Promise(function(n,i){u(r,i),e.get(t,{},{},function(t,e){e.authenticated?(r.close(),n(e)):l(e.authenticationUrl,r,o).then(n).catch(i)})})},reauthenticate:function(t,o){var r=s.window.open("","_blank",n(720,720));return new Promise(function(n,i){u(r,i),e.get(t,{},{},function(t,e){l(e.authenticationUrl,r,o).then(n).catch(i)})})}}}),define("social/spotify-scrobbling",["require","social/auth-window"],function(t){"use strict";var e=t("social/auth-window");return{reauthenticate:function(){return e.reauthenticate("/social/spotify-scrobbling-reauthenticate","spotify_scrobbling_authentication")}}}),define("components/spotify-scrobbling-starter",["require","social/spotify-scrobbling"],function(t){"use strict";function e(t,e){this.$el=t,this.successPath=this.$el.data("spotify-scobbling-success-modal"),this.failPath=this.$el.data("spotify-scobbling-fail-modal"),this.modal=e.modal}var n=t("social/spotify-scrobbling");return e.prototype.start=function(){this.$el.on("click.spotify-scrobbling-starter",this.click.bind(this))},e.prototype.stop=function(){this.$el.off(".spotify-scrobbling-starter")},e.prototype.click=function(t){t.preventDefault(),n.reauthenticate().then(this.success.bind(this)).catch(this.fail.bind(this))},e.prototype.success=function(){this.modal.open(this.successPath)},e.prototype.fail=function(){this.modal.open(this.failPath)},e}),define("components/spotify-scrobbling-banner",["require","components/spotify-scrobbling-starter"],function(t){"use strict";function e(t,e){n.call(this,t,e)}var n=t("components/spotify-scrobbling-starter"),i=(e.prototype=Object.create(n.prototype),n.prototype);return(e.prototype.constructor=e).prototype.start=function(){this.$el.on("click.spotify-scrobbling-banner",".js-setup-spotify-scrobbling",this.click.bind(this))},e.prototype.stop=function(){this.$el.off(".spotify-scrobbling-banner")},e.prototype.success=function(){i.success.call(this),this.$el.remove()},e}),define("components/click-proxy",["require","jquery"],function(t){"use strict";function e(t,e){this.$body=n(document.body)}var n=t("jquery");return e.prototype.start=function(){this.$body.on("click.click-proxy","[data-click-proxy]",function(t){t.preventDefault();t=n(t.target).attr("data-click-proxy");n("#"+t).click()})},e.prototype.stop=function(){this.$body.off("click.click-proxy")},e}),define("core/media-size-events-v2",["require","core/media-size-v2","jquery"],function(t){"use strict";function e(t,e){this.eventMediator=e.eventMediator}var n=t("core/media-size-v2"),i=t("jquery");return e.prototype={resizeHandler:function(){var t=n.getMediaSize();this.lastSize!==t&&this.eventMediator.publish("mediaSize.change",{isMobile:n.isMobile(),size:n.getMediaSize()}),this.lastSize=t},start:function(){this.lastSize=n.getMediaSize(),i(window).on("resize.mediaSizeEvents",this.resizeHandler.bind(this))},stop:function(){i(window).off(".mediaSizeEvents")}},e}),!function(t,e){var n;"function"==typeof define&&define.amd?define("jquery-serialize-object",["exports","jquery"],e):"undefined"!=typeof exports?(n=require("jquery"),e(exports,n)):e(t,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,a){function e(i,e){function r(t,e,n){return t[e]=n,t}function n(t,e){for(var n,i,o=t.match(l.key);void 0!==(n=o.pop());)l.push.test(n)?(i=t.replace(/\[\]$/,""),void 0===s[i]&&(s[i]=0),e=r([],s[i]++,e)):l.fixed.test(n)?e=r([],n,e):l.named.test(n)&&(e=r({},n,e));return e}function t(){return o}var o={},s={};this.addPair=function(t){return l.validate.test(t.name)&&(t=n(t.name,"checkbox"===a('[name="'+(t=t).name+'"]',e).attr("type")&&"on"===t.value||t.value),o=i.extend(!0,o,t)),this},this.addPairs=function(t){if(!i.isArray(t))throw new Error("formSerializer.addPairs expects an Array");for(var e=0,n=t.length;e<n;e++)this.addPair(t[e]);return this},this.serialize=t,this.serializeJSON=function(){return JSON.stringify(o)}}var l={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return e.patterns=l,e.serializeObject=function(){return new e(a,this).addPairs(this.serializeArray()).serialize()},e.serializeJSON=function(){return new e(a,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==a.fn&&(a.fn.serializeObject=e.serializeObject,a.fn.serializeJSON=e.serializeJSON),t.FormSerializer=e}),!function(t,e){"function"==typeof define&&define.amd?define("autosize",["module","exports"],e):"undefined"!=typeof exports?e(module,exports):(e(e={exports:{}},e.exports),t.autosize=e.exports)}(this,function(t,e){"use strict";var n,i,c="function"==typeof Map?new Map:(n=[],i=[],{has:function(t){return-1<n.indexOf(t)},get:function(t){return i[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),i.push(e))},delete:function(t){t=n.indexOf(t);-1<t&&(n.splice(t,1),i.splice(t,1))}}),p=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){p=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function o(i){var n,o,r,t,s,e;function a(t){var e=i.style.width;i.style.width="0px",i.offsetWidth,i.style.width=e,i.style.overflowY=t}function l(){var t,e;0!==i.scrollHeight&&(t=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(i),e=document.documentElement&&document.documentElement.scrollTop,i.style.height="",i.style.height=i.scrollHeight+n+"px",o=i.clientWidth,t.forEach(function(t){t.node.scrollTop=t.scrollTop}),e)&&(document.documentElement.scrollTop=e)}function u(){l();var t=Math.round(parseFloat(i.style.height)),e=window.getComputedStyle(i,null),n="content-box"===e.boxSizing?Math.round(parseFloat(e.height)):i.offsetHeight;if(n<t?"hidden"===e.overflowY&&(a("scroll"),l(),n="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight):"hidden"!==e.overflowY&&(a("hidden"),l(),n="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight),r!==n){r=n;t=p("autosize:resized");try{i.dispatchEvent(t)}catch(t){}}}i&&i.nodeName&&"TEXTAREA"===i.nodeName&&!c.has(i)&&(r=o=n=null,t=function(){i.clientWidth!==o&&u()},s=function(e){window.removeEventListener("resize",t,!1),i.removeEventListener("input",u,!1),i.removeEventListener("keyup",u,!1),i.removeEventListener("autosize:destroy",s,!1),i.removeEventListener("autosize:update",u,!1),Object.keys(e).forEach(function(t){i.style[t]=e[t]}),c.delete(i)}.bind(i,{height:i.style.height,resize:i.style.resize,overflowY:i.style.overflowY,overflowX:i.style.overflowX,wordWrap:i.style.wordWrap}),i.addEventListener("autosize:destroy",s,!1),"onpropertychange"in i&&"oninput"in i&&i.addEventListener("keyup",u,!1),window.addEventListener("resize",t,!1),i.addEventListener("input",u,!1),i.addEventListener("autosize:update",u,!1),i.style.overflowX="hidden",i.style.wordWrap="break-word",c.set(i,{destroy:s,update:u}),"vertical"===(e=window.getComputedStyle(i,null)).resize?i.style.resize="none":"both"===e.resize&&(i.style.resize="horizontal"),n="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(n)&&(n=0),u())}function r(t){t=c.get(t);t&&t.destroy()}function s(t){t=c.get(t);t&&t.update()}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((a=function(t){return t}).destroy=function(t){return t},a.update=function(t){return t}):((a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.default=a,t.exports=e.default}),define("community/shout-alerts",["require","jquery"],function(t){"use strict";var s=t("jquery"),o={POSTING_MESSAGES:"POSTING",ACTION_MESSAGES:"ACTION",clearActionMessages:function(t,e){o.clearMessages(o.ACTION_MESSAGES,t,e)},displayActionErrorMessages:function(t,e,n,i){o.displayErrorMessages(o.ACTION_MESSAGES,t,e,n,i)},clearPostingMessages:function(t,e){o.clearMessages(o.POSTING_MESSAGES,t,e)},displayPostingErrorMessages:function(t,e,n,i){o.displayErrorMessages(o.POSTING_MESSAGES,t,e,n,i)},clearMessages:function(t,e,n){n=a(n,t);e.find(n).empty()},displayErrorMessages:function(t,e,n,i,o){var n=a(n,t),t=i&&i.errors?i.errors:[{message:o}],r=e.find(n);t.forEach(function(t){r.append(s('<p class="alert alert-danger" role="alert">'+t.message+"</p>"))})}},a=function(t,e){return e==o.POSTING_MESSAGES?'[data-shout-form-messages-for="'+t+'"]':'[data-shout-action-messages-for="'+t+'"]'};return o}),define("community/shoutbox",["require","jquery","jquery-cookie","jquery-serialize-object","components/confirm","core/ajax","uuid","autosize","community/shout-alerts"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var r=t("jquery"),i=(t("jquery-cookie"),t("jquery-serialize-object"),t("components/confirm")),o=t("core/ajax"),s=t("uuid"),a=t("autosize"),l=t("community/shout-alerts"),u="shout-more-replies-loading";return e.prototype.start=function(){this.replyTemplate=this.$el.find(".js-reply-template").html(),this.shoutFailedMessage=this.$el.data("shout-failed"),this.deleteFailedMessage=this.$el.data("delete-failed"),this.maxReplyDepth=parseInt(this.$el.data("max-reply-depth"),10),this.$el.on("change.comments keyup.comments paste.comments",".js-shout-input",this.updateCharCount.bind(this)),a(this.$el.find(".js-shout-input")),this.$el.on("submit.comments",".js-post-shout",this.postForm.bind(this)),this.$el.on("submit.comments",".js-delete-shout",this.deleteShout.bind(this)),this.$el.on("click.comments",".js-shout-reply",this.replyClicked.bind(this)),this.$el.on("click.comments",".js-shout-reply-cancel",this.replyCancelClicked.bind(this)),this.$el.on("click.comments",".js-more-replies",this.moreRepliesClicked.bind(this)),this.$el.find(".js-more-replies").data("in-progress",!1)},e.prototype.stop=function(){this.$el.off(".comments"),a.destroy(this.$el.find(".js-shout-input"))},e.prototype.updateCharCount=function(t){var t=r(t.target),e=t.val().length,t=t.parents("form"),n=t.find(".js-field-help-text"),t=(t.find(".js-char-count").html(e),t.find(".js-shout-input").attr("maxlength"));t&&(t=parseInt(t,10),n.toggleClass("shout-form-char-count--limit",t<=e))},e.prototype.postForm=function(t){t.preventDefault();var t=r(t.target),e=t.attr("action"),n=(l.clearPostingMessages(this.$el,e),t.serializeObject());o.post(e,null,n,this.postResponded.bind(this,t))},e.prototype.postResponded=function(t,e,n){t.trigger("prevent-resubmit-done"),e||"string"!=typeof n?(e=t.attr("action"),l.displayPostingErrorMessages(this.$el,e,n,this.shoutFailedMessage)):(e=this.container(t),this.updateList(e,n),(e=t.find(".js-shout-input")).val("").change(),a.update(e))},e.prototype.updateList=function(t,e){var n,i=t.is(".js-shout-list-item"),o=t.find(".js-shout-list").eq(0);o.length?(n=r(e).find(".js-shout-list-item"),i?o.append(n):o.prepend(n)):t.find(".js-shouts-insertion-hook").eq(0).replaceWith(e)},e.prototype.deleteShout=function(t){t.preventDefault();var n=r(t.target);i.openConfirmDialog(n,this.app).then(function(){var t=n.attr("action"),e=(l.clearActionMessages(this.$el,t),n.serializeObject());o.post(t,null,e,this.deleteResponded.bind(this,n))}.bind(this))},e.prototype.deleteResponded=function(t,e,n){!e&&n&&n.result?t.parents(".js-shout-list-item").first().remove():(e=t.attr("action"),l.displayActionErrorMessages(this.$el,e,n,this.deleteFailedMessage))},e.prototype.replyClicked=function(t){t.preventDefault();var t=r(t.target),e=this.addGetReplyUi(t);t.is(".shout-reply--open")?(this.hideReplyForm(e),this.replyButtonClose(t)):(this.showReplyForm(e,t),this.replyButtonCloseAll(e),this.replyButtonOpen(t,e))},e.prototype.replyCancelClicked=function(t){t=r(t.target).parents(".js-shout-reply-ui");this.hideReplyForm(t),this.replyButtonCloseAll(t)},e.prototype.addGetReplyUi=function(t){var e,n=this.container(t),i=(n=n.parents(".js-shouts-container").length>=this.maxReplyDepth?this.container(n):n).children(".js-shout-reply-ui");return i.length||(e=t.attr("href"),e=encodeURIComponent(e),e=this.replyTemplate.replace(/SHOUTS_URL/g,e),(i=r(e)).addClass("shout-reply-ui--hidden"),i.find("form").attr("action",t.attr("href")),i.find("[data-shout-form-messages-for]").attr("data-shout-form-messages-for",t.attr("href")),i.attr("id","reply-ui-"+s()),a(i.find(".js-shout-input")),n.append(i)),i},e.prototype.showReplyForm=function(t,e){t.removeClass("shout-reply-ui--hidden");var n=t.find("textarea");(n.length?n:(t.get(0).tabIndex=-1,t)).focus(),a.update(t.find(".js-shout-input")),this.replyButtonOpen(e,t)},e.prototype.hideReplyForm=function(t){t.addClass("shout-reply-ui--hidden")},e.prototype.replyButtonOpen=function(t,e){t.attr("aria-controls",e.attr("id")),t.attr("aria-expanded",!0),t.addClass("shout-reply--open")},e.prototype.replyButtonClose=function(t){t.attr("aria-expanded",!1),t.removeClass("shout-reply--open")},e.prototype.replyButtonCloseAll=function(t){t=t.attr("id"),t=this.$el.find("[aria-controls="+t+"]");this.replyButtonClose(t)},e.prototype.container=function(t){return t.parents(".js-shouts-container").eq(0)},e.prototype.moreRepliesClicked=function(t){t.preventDefault();var e,n,i,t=r(t.target);t.data("in-progress")||(t.data("in-progress",!0),t.addClass(u),e=t.attr("href"),n={},(i=t.is("[data-more-replies-after]"))&&(n.more="after"),o.get(e,null,n,this.moreRepliesLoaded.bind(this,t,i)))},e.prototype.moreRepliesLoaded=function(t,e,n,i){var o;t.data("in-progress",!1),t.removeClass(u),n||(i=(n=r("<div>"+i+"</div>")).find("ul:first > li"),o=t.siblings(".shout-list"),e?o.append(i):o.prepend(i),(o=n.find(e?"> [data-more-replies-after]":"> [data-more-replies-before]")).length?t.attr("href",o.attr("href")):t.remove())},e}),define("community/report",["require","jquery","core/ajax","community/shout-alerts","jquery-serialize-object"],function(t){"use strict";function e(t){this.$el=t}var i=t("jquery"),o=t("core/ajax"),r=t("community/shout-alerts");t("jquery-serialize-object");return e.prototype.start=function(){this.errorMessage=this.$el.data("report-failed"),this.$el.on("submit.report",".js-report",this.submitted.bind(this))},e.prototype.stop=function(){this.$el.off(".report")},e.prototype.submitted=function(t){t.preventDefault();var t=i(t.target),e=t.attr("action"),n=(r.clearActionMessages(this.$el,e),t.serializeObject());o.post(e,null,n,this.responded.bind(this,t))},e.prototype.responded=function(t,e,n){e||n&&!1===n.result?(e=t.attr("action"),r.displayActionErrorMessages(this.$el,e,n,this.errorMessage)):(e=t.parents(".js-shout"),t=i(n).find(".js-shout").eq(0),e.replaceWith(t))},e}),define("stats/image-converter",["require","html2canvas"],function(t){"use strict";const o=t("html2canvas");return{htmlToDataUrl:function(i,t=1){return new Promise(function(e,n){try{o(i,{useCORS:!0,scrollX:0,scrollY:0,scale:t}).then(function(t){e(t.toDataURL("image/png")),i.remove()})}catch(t){n(t),i.remove()}})}}}),define("labs/download-image",["require","jquery","stats/image-converter","core/browser-api"],function(t){"use strict";var o=t("jquery");const e=t("stats/image-converter"),i=t("core/browser-api");function n(t,e,n,i){this.modal=t,this.downloadSize="landscape",this.filename=n||"image",this.$container=o(e),this.sizes=i||{square:[1080,1080],landscape:[1440,900],portrait:[1080,1920]}}return n.prototype.openDownload=function(){this.modal.show(o("#labs-download-modal").prop("outerHTML"),{"download-image":this.downloader.bind(this)},null,()=>{o(document).on("click",".modal-dialog input[name=download-option]",t=>{o(".modal-dialog #download-preview").attr("class","").addClass(o(t.target).val()),this.downloadSize=o(t.target).val()})})},n.prototype.downloader=function(t){t.preventDefault(),this.showLoading(t.target);var t=o(t.target),e=`lastfm-${this.filename}-`+this.downloadSize;this.startConversion().then(this.startDownload.bind(this,t,e)).catch(this.hideLoading.bind(this))},n.prototype.startDownload=function(t,e,n){this.hideLoading(),i.download(n,e),t.addClass("share-download--success"),setTimeout(function(t){t.trigger("disclose-close"),t.removeClass("share-download--success")}.bind(this,t),2e3)},n.prototype.startConversion=function(){return this.conversion&&delete this.conversion,this.conversion=this.convertToDataUrl().catch(function(t){delete this.conversion}.bind(this)),this.conversion},n.prototype.convertToDataUrl=function(){return e.htmlToDataUrl(this.exportableElement.apply(this,this.sizes[this.downloadSize]),2)},n.prototype.shareDimensions=function(){this.$el.addClass("user-dashboard-module--measure");var t={width:this.$el.innerWidth(),height:this.$el.innerHeight(),mediaWidth:window.innerWidth};return this.$el.removeClass("user-dashboard-module--measure"),t},n.prototype.showLoading=function(t){o(t).addClass("modal-share-icon--loading btn-loading").attr("disabled","disabled")},n.prototype.hideLoading=function(){o(document).find(".modal-share-icon--loading").removeClass("modal-share-icon--loading").removeAttr("disabled")},n.prototype.exportableElement=function(t,e){var n=o(this.$container).clone().addClass("modal-screenshotable");return n.prependTo("body"),t&&n.innerWidth(t),e&&n.innerHeight(e),n.css({position:"fixed",top:0,left:"-9999px",overflow:"hidden","padding-top":"90px"}),n.addClass(this.downloadSize),n.get(0)},n}),define("labs/base",[],function(){"use strict";function t(t,e){this.$el=t,this.$splash=this.$el.find(".labs-splash"),this.$experimentContainer=this.$el.find(".experiment-container"),this.$headerIcons=this.$el.find(".lab-header-inner"),this.$hamburgerIcons=this.$el.find(".hamburger-wrap"),this.eventMediator=e.eventMediator}return t.prototype={launch:function(){this.$splash.hide(),this.$experimentContainer.addClass("experiment-container--show"),this.showHeader(),this.eventMediator.publish("labs.launch")},showHeader:function(){this.$headerIcons.css("visibility","visible"),this.$hamburgerIcons.css("visibility","visible")},hideHeader:function(){this.$headerIcons.css("visibility","hidden"),this.$hamburgerIcons.css("visibility","hidden")},reset:function(t=""){this.$splash.show(),t&&this.$splash.find(".error-message").text(t),this.$experimentContainer.removeClass("experiment-container--show"),this.hideHeader()}},t}),define("labs/pixel-grid",["require","jquery","core/ajax","labs/download-image","./base","stats/tooltip"],function(t){"use strict";let i=t("jquery");const e=t("core/ajax"),n=t("labs/download-image"),o=t("./base"),r=t("stats/tooltip");function s(t,e){this.$el=t,this.app=e,this.data=i("#"+this.$el.data("scrobbleDataContainer")).html(),this.eventMediator=this.app.eventMediator,this.labsBase=new o(i(document.body),this.app),this.$download=i(document.body).find(".lab-header-item.download"),this.endpoint=this.$el.data("chartEndpoint"),this.dateRanges=this.$el.data("dateRanges"),this.isSubscriber="True"===t.data("isSubscriber"),this.eventMediator.subscribe("labs.changeColor",this.changeColour.bind(this)),this.eventMediator.subscribe("labs.launch",this.launch.bind(this)),this.tooltip=new r,this.tooltip.start(),this.activeState="True"===this.$el.data("activeState"),this.loadingState="loading",this.$launchButton=i(".btn-launch"),this.$mobileOptionsContainer=i(".lab-header-mobile-container"),this.$pixelContainer=i("#"+this.$el.data("pixelGridContainer")),this.dateRanges.length<=1?this.size="big-size":this.size="small-size",this.$pixelContainer.addClass(this.size),this.schemeIndex=0,this.schemeMax=5,this.tooltipHTML=(t,e,n)=>{return`<div class="pixel-grid-tooltip"><div class="tooltip-date">${t}</div>
                    <div class="tooltip-scrobbles">${e}</div>
                    ${n&&0<n.length?(t=>{let e="<hr />";return t.map(t=>{e+=`
                        <div class="tooltip-milestone">${t.position}</div>
                        <div class="tooltip-milestone-track">${t.track}</div>
                    `}),e})(n):""}
                </div>`}}return s.prototype.start=function(){this.activeState?this.load():(this.$launchButton.removeClass("btn--loading").prop("disabled",!1),this.$launchButton.on("click",()=>{"none"!==window.getComputedStyle(this.$el[0]).display&&this.load()}))},s.prototype.stop=function(){this.tooltip.stop(),i("zoom").off("click"),this.$launchButton.off("click"),this.$download.off("click"),this.eventMediator.unsubscribe("labs.changeColor")},s.prototype.zoom=function(){this.$pixelContainer.children().first().focus(),"big-size"===this.size?(this.$pixelContainer.removeClass("big-size"),this.$pixelContainer.addClass("small-size"),this.size="small-size"):(this.$pixelContainer.removeClass("small-size"),this.$pixelContainer.addClass("big-size"),this.size="big-size")},s.prototype.load=function(){this.labsBase.launch()},s.prototype.launch=function(){this.$el.addClass("pixel-grid--loading"),this.$el.prepend(this.$pixelContainer),this.eventMediator.publish("labs.initColor",this.schemeMax),this.eventMediator.subscribe("labs.changeColor",this.changeColour.bind(this)),this.fetchData(this.endpoint),this.isSubscriber&&i("#milestone-toggle").on("click",()=>{this.$pixelContainer.toggleClass("show-milestones")}),this.$el.on("mouseover focus",".pixel",t=>{var e=t.target.dataset;this.tooltip.show(t.target.offsetLeft+10,t.target.offsetTop+10,this.tooltipHTML(e.date,e.scrobbles,JSON.parse(e.milestones)))}),this.$el.on("mouseout blur",".pixel",()=>{this.tooltip.hide()}),i(".lab-header").addClass("pixel-grid-color"),this.$mobileOptionsContainer.addClass("pixel-grid-color"),i(".zoom").on("click",this.zoom.bind(this)),this.$download.on("click",this.openDownloadModal.bind(this))},s.prototype.drawGraph=function(n,t){t.forEach(t=>{var e=i("<button/>").attr({class:"pixel scheme"+this.schemeIndex+" "+this.getColour(t.value),"data-date":t.date,"data-scrobbles":t.count,"data-milestones":t.milestones?JSON.stringify(t.milestones):"","data-track":t.track||""});t.milestones&&0<t.milestones.length&&e.addClass("milestone"),n.append(e),n.addClass("show-milestones")}),this.$pixels=i(".pixel"),this.dateRanges.shift(),0<this.dateRanges.length?this.fetchData(this.endpoint):(this.loadingState="loaded",this.$el.removeClass("pixel-grid--loading"),this.$pixels.each(function(t){i(this).css({transition:"background-color 0.1s ease, min-width 0.25s ease, min-height 0.25s ease","transition-delay":5e-4*t+"s"})}))},s.prototype.changeColour=function(t){"loaded"===this.loadingState&&this.$pixels.removeClass("scheme"+this.schemeIndex).addClass("scheme"+t.index),this.schemeIndex=t.index},s.prototype.getColour=function(t){return 0===t?"color0":t<=10?"color1":t<=40?"color2":t<=70?"color3":t<=100?"color4":100<t?"color5":void 0},s.prototype.openDownloadModal=function(){var t;"loaded"===this.loadingState&&(t={square:[1080,0],landscape:[1440,0],portrait:[700,0]},new n(this.app.modal,".pixel-grid","pixel-grid",t).openDownload())},s.prototype.fetchData=function(t){e.get(t,{async:!1},this.dateRanges[0],function(t,e){e=e.reverse(),this.drawGraph(this.$pixelContainer,e)}.bind(this))},s}),define("player/controls",["require","core/ajax","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var i=t("core/ajax"),o=t("jquery");function n(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),t=Math.floor(t%60);return n<10&&(n="0"+n),t<10&&(t="0"+t),(0<(e=e<10?"0"+e:e)?[e,n,t]:[n,t]).join(":")}return e.prototype={ERROR_MESSAGE_DURATION:5e3,constructor:e,start:function(){var n=this;this.$artworkLink=this.$el.find(".js-artwork"),this.$artwork=this.$artworkLink.find("img"),this.$source=this.$el.find(".js-source"),this.$switchDevice=this.$el.find(".js-switch-device"),this.$listeningOn=this.$el.find(".js-player-bar-listening-on"),this.$elapsedLabel=this.$el.find(".js-progress-elapsed"),this.$remainingLabel=this.$el.find(".js-progress-remaining"),this.$progressSlug=this.$el.find(".js-progress-slug"),this.$playPauseButton=this.$el.find(".js-play-pause"),this.$previousButton=this.$el.find(".js-previous"),this.$nextButton=this.$el.find(".js-next"),this.$loveButton=this.$el.find(".js-love"),this.$sourceButtons=this.$el.find(".js-switch-source"),this.pauseString=this.$playPauseButton.data("string-pause"),this.pauseAnalyticsAction=this.$playPauseButton.data("analytics-action-pause"),this.playString=this.$playPauseButton.text().trim(),this.playAnalyticsAction=this.$playPauseButton.data("analytics-action"),this.defaultArtwork=this.$artwork.attr("src"),this.$nextButton.on("click.player.controls",function(t){t.preventDefault(),n.app.player.next()}),this.$previousButton.on("click.player.controls",function(t){t.preventDefault(),n.app.player.previous()}),this.$loveButton.on("click.player.controls",function(t){var e;o(t.target).hasClass("js-click-enabled")&&(e=n.track.userLoves,n.track.userLoves=!e,n.updateLoveButton(),n.track.userLoves&&(n.$loveButton.addClass("disable-hover"),n.$loveButton.on("mouseout.player.controls",function(){n.$loveButton.removeClass("disable-hover"),n.$loveButton.off("mouseout.player.controls")})),t={track:n.track.trackName,artist:n.track.artistName},e&&(t.unlove=!0),i.post(n.track.loveUrl,null,t,function(t){t&&(n.track.userLoves=e,n.updateLoveButton())}))}),this.$sourceButtons.on("click",function(t){t.preventDefault();t=o(this).data("source");n.app.player.play(t)}),this.$switchDevice.on("click",this.switchDevice.bind(this)),this.app.eventMediator.subscribe("player.track.positionChanged",this.updateTrackPosition.bind(this)),this.app.eventMediator.subscribe("player.track.added",this.updateNextButton.bind(this)),this.app.eventMediator.subscribe("player.track.playing",this.showPlayingStatus.bind(this)),this.app.eventMediator.subscribe("player.track.paused",this.showPlayButton.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.disable.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.disable.bind(this)),this.app.eventMediator.subscribe("player.ad.playing",this.adPlaying.bind(this)),this.app.eventMediator.subscribe("player.deviceChanged",this.deviceChanged.bind(this))},switchDevice:function(){this.app.player.switchDevice.call(this.app.player)},showPlayingStatus:function(t){this.updateProviderClass(t.affiliate),this.updateAnalyticsLabels(t.affiliate),this.enable(),this.track=t,this.fetchAdditionalTrackDetails(),this.$remainingLabel.text("-"+n(t.duration)),this.$source.attr("href",t[t.affiliate+"Url"]),this.showPauseButton(),this.enableSourceButtons(t.availableAffiliates)},updateTrackPosition:function(t){this.$elapsedLabel.text(n(t)),t>this.track.duration&&(t=this.track.duration),this.$remainingLabel.text("-"+n(this.track.duration-t)),this.$progressSlug.width(t/this.track.duration*100+"%")},updateProviderClass:function(t){this.providerClass&&this.$el.removeClass(this.providerClass),this.providerClass="player-bar--provider-"+t,this.$el.addClass(this.providerClass)},updateAnalyticsLabels:function(t){this.$el.find("[data-analytics-action]").attr("data-analytics-label",t)},enable:function(){this.$el.removeClass("inactive").removeClass("is-playing-ad"),this.$playPauseButton.attr("disabled",!1),this.$previousButton.attr("disabled",!1),this.updateNextButton()},updateNextButton:function(){this.app.player.isLast()?(this.$nextButton.addClass("inactive"),this.$nextButton.attr("disabled",!0)):(this.$nextButton.removeClass("inactive"),this.$nextButton.attr("disabled",!1))},disable:function(){this.$el.addClass("inactive"),this.$playPauseButton.attr("disabled",!0),this.$previousButton.attr("disabled",!0),this.$nextButton.attr("disabled",!0),this.$loveButton.attr("disabled",!0),this.$loveButton.removeClass("player-bar-btn--loved"),this.abortAdditionalTrackDetails(),this.updateArtwork()},adPlaying:function(){this.$el.addClass("is-playing-ad"),this.$playPauseButton.attr("disabled",!0),this.$previousButton.attr("disabled",!0),this.$nextButton.attr("disabled",!0),this.$loveButton.removeClass("player-bar-btn--loved"),this.updateArtwork()},deviceChanged:function(t){this.$listeningOn.text(t.message)},showPauseButton:function(){var e=this;this.$playPauseButton.off(".player.controls").on("click.player.controls",function(t){t.preventDefault(),e.app.player.pause()}).removeClass("player-bar-btn--play").addClass("player-bar-btn--pause").data("analytics-action",this.pauseAnalyticsAction).text(this.pauseString)},showPlayButton:function(){var e=this;this.$playPauseButton.off(".player.controls").on("click.player.controls",function(t){t.preventDefault(),e.app.player.resume()}).removeClass("player-bar-btn--pause").addClass("player-bar-btn--play").data("analytics-action",this.playAnalyticsAction).text(this.playString)},enableSourceButtons:function(i){this.$sourceButtons.each(function(t){var e=o(this),n=e.data("source");e.toggle(_(i).contains(n))})},fetchAdditionalTrackDetails:function(){this.detailsRequest=i.get(this.track.trackUrl+"/+playerdetails",null,null,function(t,e){t||(this.track.userLoves=e.loves,this.track.loveUrl=e.love_url,this.updateLoveButton(),this.updateArtwork(e))}.bind(this))},abortAdditionalTrackDetails:function(){this.detailsRequest&&this.detailsRequest.abort()},updateArtwork:function(t){this.$artwork.attr("src",(t=t||{}).image||this.defaultArtwork),t.album_url?this.$artworkLink.attr("href",t.album_url):this.$artworkLink.removeAttr("href")},updateLoveButton:function(){var t=this.$loveButton;this.track.userLoves?(t.addClass("player-bar-btn--loved"),t.text(t.data("unloveCopy"))):(t.removeClass("player-bar-btn--loved"),t.text(t.data("loveCopy"))),t.hasClass("js-click-enabled")&&t.attr("disabled",!1)}},e}),define("player/inline-youtube-playlink",["require","shim/youtube","jquery"],function(t){"use strict";function e(t){this.$el=t}var n=t("shim/youtube"),i=t("jquery");return e.prototype.start=function(){this.videoId=this.$el.data("youtube-id"),this.$target=i("#"+this.$el.data("inline-video-target")),this.$el.on("click.inline-youtube-playlink",this.play.bind(this))},e.prototype.stop=function(){this.$el.off(".inline-youtube-playlink")},e.prototype.play=function(t){t.preventDefault();var e=this.$target.find(".embedded-video");e.length||(e=i('<div class="embedded-video" />'),this.$target.append(e)),this.$target.addClass("inline-playback-container--active"),n().then(function(){this.player=new YT.Player(e.get(0),{host:"https://www.youtube-nocookie.com",playerVars:{iv_load_policy:3},videoId:this.videoId,events:{onReady:function(t){t.target.playVideo()}}})}.bind(this))},e}),define("player/scrobble-client",["require","core/ajax","lodash"],function(t){"use strict";var p=t("core/ajax"),d=t("lodash"),h=["spotify"];return function(t,e){var n,i,o,r=0,s=!1;function a(){var e=Date.now();o=setTimeout(function(){var t;t=Date.now()-e,r+=t,!s&&30<=i.duration&&(c(r)>=i.duration/2||240<=c(r))?(s=!0,p.post("/player/scrobble",null,{timestamp:n,artist:i.artistName,track:i.trackName,duration:Math.round(i.duration)})):a()},1e3)}function l(){clearTimeout(o)}function u(){l(),r=0,s=!1,n=i=null}function c(t){return Math.round(t/1e3)}e.eventMediator.subscribe("player.track.paused",l),e.eventMediator.subscribe("player.track.stopped",u),e.eventMediator.subscribe("player.track.finished",u),e.eventMediator.subscribe("player.track.playing",function(t){t&&d(h).contains(t.affiliate)||(n=n||c((new Date).getTime()),t&&(i=t),a(),p.post("/player/now-playing",null,{artist:i.artistName,track:i.trackName,duration:Math.round(i.duration)}))})}}),define("player/status",["require","core/media-size-v2","components/show-alert","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var n=t("core/media-size-v2"),i=t("components/show-alert"),o=t("jquery");return e.prototype={ERROR_MESSAGE_DURATION:5e3,constructor:e,start:function(){this.statusBar=this.$el.find(".js-player-status"),this.errorStatusBar=this.$el.find(".js-player-error"),this.errorStatusMessage=this.$el.find(".js-player-error-message"),this.setStatusMessage("inactive"),this.app.eventMediator.subscribe("player.track.playing",this.showPlayingStatus.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.disable.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.disable.bind(this)),this.app.eventMediator.subscribe("player.ad.playing",this.adPlaying.bind(this)),this.app.eventMediator.subscribe("player.spotify.initialising",this.setStatusMessage.bind(this,"loading-spotify")),this.app.eventMediator.subscribe("player.spotify.abort",this.setStatusMessage.bind(this,"inactive")),this.app.eventMediator.subscribe("player.spotify.signup.start",this.setStatusMessage.bind(this,"spotify-signup")),this.app.eventMediator.subscribe("player.spotify.signup.end",this.setStatusMessage.bind(this,"inactive")),this.app.eventMediator.subscribe("player.spotify.error.auth-error",this.setStatusMessage.bind(this,"spotify-auth-error")),this.app.eventMediator.subscribe("player.playlist.request.error",this.setErrorMessage.bind(this,"cannot-play-item")),this.app.eventMediator.subscribe("player.track.unavailable",this.setErrorMessage.bind(this,"track-unavailable")),this.showAlert=new i(this.$el,this.app)},showPlayingStatus:function(t){var e=o("<a />").addClass("player-bar-artist-name").attr("href",t.artistUrl).text(t.artistName),n=o("<a></a>").addClass("player-bar-track-name").attr("href",t.trackUrl).text(t.trackName);this.statusBar.html(n.prop("outerHTML")+e.prop("outerHTML")),this.statusBar.attr("title",t.trackName+" — "+t.artistName)},disable:function(){this.setStatusMessage("inactive")},adPlaying:function(){this.setStatusMessage("ad-playing")},setStatusMessage:function(t){t=this.$el.data("player-status-"+t);this.setStatus(t)},setStatus:function(t){this.statusBar.html(t),this.statusBar.attr("title",this.statusBar.text())},setErrorMessage:function(t){t=this.$el.data("player-error-"+t);n.isMobile()?this.app.modal.show(this.showAlert.modalBody(t,o("[data-show-alert-ok-copy]").attr("data-show-alert-ok-copy"))):(clearTimeout(this.errorMessageTimeout),this.errorStatusBar.removeClass("player-bar-status--hide"),this.errorStatusMessage.text(t),this.errorStatusMessage.attr("title",t),this.statusBar.addClass("player-bar-status--hide"),this.errorMessageTimeout=setTimeout(function(){this.errorStatusBar.addClass("player-bar-status--hide"),this.statusBar.removeClass("player-bar-status--hide")}.bind(this),this.ERROR_MESSAGE_DURATION))}},e}),define("player/tracking",["require","core/ajax"],function(t){"use strict";function e(t,e){e.eventMediator.subscribe("player.track.tuning",this.tuningHandler.bind(this)),e.eventMediator.subscribe("player.track.unavailable",this.unavailableHandler.bind(this))}var n=t("core/ajax");return e.prototype.tuningHandler=function(t){this.track=t},e.prototype.unavailableHandler=function(){var t;this.track&&(t={artist:this.track.artistName,track:this.track.trackName,affiliate:this.track.affiliate,id:this.track[this.track.affiliate+"Id"]},n.get("/player/unavailable",null,t))},e}),define("player/providers/youtube/youtube-proxy",["require"],function(t){"use strict";function e(t,e){this.youtubePlayer=t,e.on("click",this.stop.bind(this))}return e.prototype={play:function(t){this.youtubePlayer.loadVideoById(t.youtubeId),this.youtubePlayer.playVideo()},resume:function(){this.youtubePlayer.playVideo()},pause:function(){this.youtubePlayer.pauseVideo()},stop:function(){this.youtubePlayer.stopVideo()},getDuration:function(){return this.youtubePlayer.getDuration()},getPosition:function(){return this.youtubePlayer.getCurrentTime()}},e}),define("player/providers/youtube/youtube-exception",[],function(){"use strict";function t(t){this.name="YoutubeException",this.message=e[t]||"No description",this.errorCode=t}var e={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."};return t.prototype=new Error,t}),define("core/timeout-loop",[],function(){"use strict";function t(t,e,n){this.callback=t,this.delay=e,n?this.tick():this.delayTick()}return t.prototype.tick=function(){this.delayTick(),this.callback()},t.prototype.stop=function(){clearTimeout(this.timeout)},t.prototype.delayTick=function(){this.timeout=setTimeout(this.tick.bind(this),this.delay)},t}),!function(w){w.fn.onScreen=function(g){var b={container:window,direction:"vertical",toggleClass:null,doIn:null,doOut:null,tolerance:0,throttle:null,lazyAttr:null,lazyPlaceholder:"data:image/gif;base64,R0lGODlhEAAFAIAAAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAAACwAAAAAEAAFAAACCIyPqcvtD00BACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIQTGCiywKPmjxUNhjtMlWrAgAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFEiyUf6wCEBHvLPemIHdTzCMDegkACH5BAkJAAYALAAAAAAQAAUAgoSChLS2tIyKjLy+vIyOjMTCxP///wAAAAMUWCQ09jAaAiqQmFosdeXRUAkBCCUAIfkECQkACAAsAAAAABAABQCDvLq83N7c3Nrc9Pb0xMLE/P78vL68/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCEwkCnKGbegvQn4RjGMx8F1HxBi5Il4oEiap2DcVYlpZwQAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCDwnCGHEcIMxPn4VAGMQNBx0zQEZHkiYNiap5RaBKG9EQAh+QQJCQAJACwAAAAAEAAFAIOEgoTMysyMjozs6uyUlpSMiozMzsyUkpTs7uz///8AAAAAAAAAAAAAAAAAAAAAAAAEGTBJiYgoBM09DfhAwHEeKI4dGKLTIHzCwEUAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCAQSTmMEGaco8+UBSACwWBqHxKOJYd+q1iaXFoRRMbtEQAh+QQJCQAIACwAAAAAEAAFAIO8urzc3tzc2tz09vTEwsT8/vy8vrz8+vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAEIhBJWc6wJZAtJh3gcRBAaXiIZV2kiRbgNZbA6VXiUAhGL0QAIfkECQkABgAsAAAAABAABQCChIKEtLa0jIqMvL68jI6MxMLE////AAAAAxRoumxFgoxGCbiANos145e3DJcQJAAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFFi6XCQwtCmAHbPVm9kGWKcEQxkkACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIRlI8SAZsPYnuJMUCRnNksWwAAOw==",debug:!1};return"remove"!==g&&w.extend(b,g),this.each(function(){function e(){return!y&&("horizontal"===b.direction?v?h<u-b.tolerance&&o<h+p-b.tolerance:h<a-b.tolerance&&h>-p+b.tolerance:v?d<l-b.tolerance&&i<d+c-b.tolerance:d<s-b.tolerance&&d>-c+b.tolerance)}function n(){return y&&("horizontal"===b.direction?v?h+(p-b.tolerance)<o||h>u-b.tolerance:h>a-b.tolerance||-p+b.tolerance>h:v?d+(c-b.tolerance)<i||d>l-b.tolerance:d>s-b.tolerance||-c+b.tolerance>d)}function t(t,e,n){var i,o,r;return function(){o=arguments,r=!0,n=n||this,i||function(){i=r?(t.apply(n,o),r=!1,setTimeout(arguments.callee,e)):null}()}}var i,o,r,s,a,l,u,c,p,d,h,f=this,y=!1,m=w(this),v=w.isWindow(b.container);"remove"===g?(w(f).off("scroll.onScreen resize.onScreen"),w(window).off("resize.onScreen")):(f=function(){var t;v||"static"!==w(b.container).css("position")||w(b.container).css("position","relative"),r=w(b.container),s=r.height(),a=r.width(),l=r.scrollTop()+s,u=r.scrollLeft()+a,c=m.outerHeight(!0),p=m.outerWidth(!0),h=(v?(t=m.offset(),d=t.top,t):(t=m.position(),d=t.top,t)).left,i=r.scrollTop(),o=r.scrollLeft(),b.debug,e()?(b.toggleClass&&m.addClass(b.toggleClass),w.isFunction(b.doIn)&&b.doIn.call(m[0]),b.lazyAttr&&"IMG"===m.prop("tagName")&&(t=m.attr(b.lazyAttr))!==m.prop("src")&&(m.css({background:"url("+b.lazyPlaceholder+") 50% 50% no-repeat",minHeight:"5px",minWidth:"16px"}),m.prop("src",t).load(function(){w(this).css({background:"none"})})),y=!0):n()&&(b.toggleClass&&m.removeClass(b.toggleClass),w.isFunction(b.doOut)&&b.doOut.call(m[0]),y=!1)},window.location.hash?t(f,50):f(),b.throttle&&(f=t(f,b.throttle)),w(b.container).on("scroll.onScreen resize.onScreen",f),v||w(window).on("resize.onScreen",f),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:"function"==typeof define&&define.amd&&define("jquery-onscreen",[],function(){return jQuery}))})}}(jQuery),define("player/providers/youtube/youtube-provider",["require","jquery","player/providers/youtube/youtube-proxy","player/providers/youtube/youtube-exception","shim/youtube","debug","core/timeout-loop","core/browser-api","jquery-onscreen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.resizeSubscription=null}var i=t("jquery"),n=t("player/providers/youtube/youtube-proxy"),o=t("player/providers/youtube/youtube-exception"),r=t("shim/youtube"),s=t("debug"),a=t("core/timeout-loop"),l=t("core/browser-api");t("jquery-onscreen");return e.prototype={scrollContainer:window,start:function(){this.hide(),r().then(this._initialiseYoutubePlayer.bind(this)),this.app.eventMediator.subscribe("partialRefresh.beforeReplace",function(){this.isActive()&&(i(this.scrollContainer).onScreen("remove"),this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents())}.bind(this),!1),this.$close=this.$el.find(".js-close-player")},stop:function(){this._destroyYoutubeIframe()},isActive:function(){return this.$el.hasClass("video-player--in-place")||this.$el.hasClass("video-player--floating")},publish:function(t,e){var n={provider:"youtube"};void 0!==e&&(n.message=e),this.app.eventMediator.publish(t,n)},show:function(){var t;this.isActive()||(this.$el.attr("aria-hidden",!1),(t=i("body").find("[data-player-now-playing]").parents(".js-video-preview-playlink")).length?(this.showVideoOverPreview(t),t.onScreen({tolerance:2*t.outerHeight()/3,container:this.scrollContainer,doIn:function(t){this.showVideoOverPreview(t),this.listenToPageResizeEvents(t)}.bind(this,t),doOut:function(){this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents()}.bind(this)})):(this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents()))},showVideoOverPreview:function(t){t.addClass("video-preview-playlink--show-skip-link");i(".page-content").offset().left,parseInt(i(".page-content").css("padding-left"),10);t.offset().left,this.$el.addClass("video-player--in-place"),this.$el.removeClass("video-player--floating");var e=i(".page-content").offset().left,n=parseInt(i(".page-content").css("padding-left"),10),e=t.offset().left-e-n;this.$el.css("top",t.offset().top),this.$el.find(".js-player").css("width",t.css("width")),this.$el.find(".js-player").css("height",t.css("height")),this.$el.find(".js-player").css("margin-left",e+"px")},showVideoInPersistentPlayer:function(){this.$el.addClass("video-player--floating"),this.$el.removeClass("video-player--in-place"),this.$el.css("top","auto"),this.$el.find(".js-player").css("width",""),this.$el.find(".js-player").css("height",""),this.$el.find(".js-player").css("margin-left","")},listenToPageResizeEvents:function(t){this.resizeSubscription||(this.resizeSubscription=this.app.eventMediator.subscribe("mediaSize.change",function(t,e){e&&e.isMobile?this.showVideoInPersistentPlayer():this.showVideoOverPreview(t)}.bind(this,t)))},stopListeningToPageResizeEvents:function(){this.app.eventMediator.unsubscribe(this.resizeSubscription),this.resizeSubscription=null},hide:function(){i(this.scrollContainer).onScreen("remove"),this.stopListeningToPageResizeEvents(),this.$el.removeClass("video-player--floating"),this.$el.removeClass("video-player--in-place"),this.$el.find(".js-player").css("width",""),this.$el.find(".js-player").css("height",""),this.$el.attr("aria-hidden",!0)},_destroyYoutubeIframe:function(){this.player.destroy()},_initialiseYoutubePlayer:function(){try{this.player=new YT.Player(this.$el.find(".js-player").get(0),{host:"https://www.youtube-nocookie.com",playerVars:{iv_load_policy:3},events:{onReady:this._onYoutubeReady.bind(this),onStateChange:this._onYoutubeStateChange.bind(this),onError:this._onYoutubeError.bind(this)}})}catch(t){this.publish("player.provider.proxy.error",t)}},_onYoutubeReady:function(){this.youtubeProxy=new n(this.player,this.$close),this.publish("player.provider.proxy.ready",this.youtubeProxy),i("html").removeClass("youtube-provider-not-ready")},_onYoutubeStateChange:function(t){switch(s.info("YouTube StateChange:",t),t.data){case YT.PlayerState.UNSTARTED:this.hide(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.stopped");break;case YT.PlayerState.ENDED:this.stopDetectingAd(),this.hide(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.finished");break;case YT.PlayerState.PLAYING:this.stopDetectingAd(),this.show(),this.publish("player.provider.proxy.playing"),this.startPublishingPlayerPosition();break;case YT.PlayerState.PAUSED:this.stopDetectingAd(),this.show(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.paused");break;case YT.PlayerState.BUFFERING:this.stopDetectingAd(),this.startDetectingAd()}},_onYoutubeError:function(t){this.publish("player.provider.proxy.unavailable",new o(t.data)),l.fullScreenElement()===this.player.getIframe()&&l.exitFullScreen()},startDetectingAd:function(){var e=!1;this.adPositionLoop=new a(function(){var t=this.player.getCurrentTime();!1!==e&&e<t&&(this.show(),this.publish("player.ad.playing"),this.stopDetectingAd()),e=t}.bind(this),1e3,!0)},stopDetectingAd:function(){this.adPositionLoop&&this.adPositionLoop.stop()},startPublishingPlayerPosition:function(){this.positionLoop=new a(function(){var t=this.player.getCurrentTime();this.publish("player.provider.proxy.positionChanged",t)}.bind(this),1e3,!0)},stopPublishingPlayerPosition:function(){this.positionLoop&&this.positionLoop.stop()}},e}),define("social/spotify",["require","core/ajax","social/auth-window"],function(t){"use strict";var e=t("core/ajax"),n=t("social/auth-window"),i={accessToken:function(){return new Promise(function(n,i){e.get("/social/spotify-status",void 0,void 0,function(t,e){(!t&&e.authenticated?n:i)(e)})})},authenticate:function(){return n.status("/social/spotify-status","spotify_authentication").then(i.accessToken)},switchAccount:function(){return n.reauthenticate("/social/spotify-switch-account","spotify_authentication").then(i.accessToken)}};return i}),define("player/providers/spotify/spotify-auth",["require","social/spotify"],function(t){"use strict";function e(t,e,n){this.modal=t,this.modalPaths=e,this.errorCallback=n}var n=t("social/spotify");return e.prototype.REFRESH_TOKEN_ADVANCE=59e3,e.prototype.connect=function(){return this.fetchAccessToken()},e.prototype.getPremium=function(){var t=this.actionModal(this.modalPaths.premium,n.switchAccount);return t.then(this.storeAndAutoRefreshAccessToken.bind(this)),t},e.prototype.authenticate=function(){var t=this.actionModal(this.modalPaths.auth,n.authenticate);return t.catch(this.errorCallback),t},e.prototype.fetchAccessToken=function(){var t=n.accessToken().catch(this.authenticate.bind(this));return t.then(this.storeAndAutoRefreshAccessToken.bind(this)),t},e.prototype.storeAndAutoRefreshAccessToken=function(t){this.accessToken=t.accessToken,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.fetchAccessToken.bind(this),1e3*t.expires-this.REFRESH_TOKEN_ADVANCE)},e.prototype.actionModal=function(i,o){return new Promise(function(e,t){var n=this.modal;n.open(i,{actions:{connect:function(){o().then(function(t){e(t),n.close()}).catch(function(){t(),n.close()})}},onclose:t})}.bind(this))},e}),define("player/providers/spotify/spotify-api",["require","jquery","core/ajax","debug"],function(t){"use strict";function e(t,e){this.auth=t,this.notPremiumCallback=e,this.requestId=0}var l=t("jquery"),u=t("core/ajax"),c=t("debug");return e.prototype.SendFormat={JSON_BODY:"json",QUERY_STRING:"query"},e.prototype.play=function(t,e){var n="/me/player/play";return e&&(n+="?device_id="+e),this.send("PUT",n,{uris:["spotify:track:"+t]},this.SendFormat.JSON_BODY)},e.prototype.pause=function(){return this.send("PUT","/me/player/pause")},e.prototype.resume=function(t){var e;return this.send("PUT","/me/player/play",e=t?{device_id:t}:e,this.SendFormat.QUERY_STRING)},e.prototype.seek=function(t,e){return this.send("PUT","/me/player/seek",{position_ms:Math.round(t),device_id:e},this.SendFormat.QUERY_STRING)},e.prototype.resolveId=function(t,e){return this.send("GET","/tracks/"+t,{market:e}).then(function(t){return t.id})},e.prototype.user=function(){return this.send("GET","/me")},e.prototype.subscribeToState=function(t){return this.send("PUT","/me/notifications/player",{connection_id:t},this.SendFormat.QUERY_STRING)},e.prototype.state=function(t){return this.send("GET","/me/player",{market:t})},e.prototype.fetchDevices=function(){return this.send("GET","/me/player/devices").then(function(t){return t.devices})},e.prototype.selectDevice=function(t,e){return this.send("PUT","/me/player",{device_ids:[t],play:e},this.SendFormat.JSON_BODY)},e.prototype.send=function(o,r,s,a){return this.handleAuthErrors(function(){var t=this.requestId++,e=(c.info("Spotify request #"+t+":",o,r,s,a),"https://api.spotify.com/v1"+r),n=s,i=(s&&"GET"!==o&&(a===this.SendFormat.JSON_BODY?n=JSON.stringify(s):a===this.SendFormat.QUERY_STRING&&(e+="?"+l.param(s),n=void 0)),{headers:{Authorization:"Bearer "+this.auth.accessToken}}),e=u.request(o,e,i,n),i=c.info.bind(c,"Spotify response #"+t+":");return e.then(i),e.catch(i),e}.bind(this))},e.prototype.handleAuthErrors=function(i){var t=i(),e=t.catch(function(t){var e=t&&t.error&&t.error.status,n=t&&t.error&&t.error.message;return 403===e&&"Not available for the current user"===n&&this.notPremiumCallback(i),401===e?this.auth.connect().then(i):Promise.reject(t)}.bind(this));return e.abort=function(){e.aborted=!0,t.abort()},e},e}),define("player/providers/spotify/spotify-state",["require","core/browser-api","debug"],function(t){"use strict";function e(t,e,n,i){this.api=t,this.auth=e,this.market=n,this.stateCallback=i.stateCallback,this.inactiveCallback=i.inactiveCallback,this.deviceStateCallback=i.deviceStateCallback}var n=t("core/browser-api"),o=t("debug");return e.prototype.subscribe=function(){return new Promise(function(t,e){this.socket=new n.WebSocket("wss://dealer.spotify.com?access_token="+this.auth.accessToken),this.delayPing(),this.socket.addEventListener("message",this.messageHandler.bind(this,t,e))}.bind(this))},e.prototype.unsubscribe=function(){clearInterval(this.timeout),this.socket.close()},e.prototype.ping=function(){this.socket.readyState===this.socket.OPEN?(this.socket.send(JSON.stringify({type:"ping"})),this.delayPing()):this.socket.readyState===this.socket.CLOSED&&this.subscribe()},e.prototype.delayPing=function(){this.timeout=setTimeout(this.ping.bind(this),3e4)},e.prototype.messageHandler=function(t,e,n){var n=JSON.parse(n.data),i=(o.info("Spotify message:",n),"PUT"===n.method&&(i=decodeURIComponent(n.uri.split("/").slice(-1).pop()),this.api.subscribeToState(i).then(t,e)),n.payloads&&n.payloads[0]&&n.payloads[0].events||[]);i.some(this.isPlayerStateChangeEvent)&&this.updatePlayerState(),i.some(this.isDeviceStateChangeEvent)&&this.updateDeviceState()},e.prototype.isPlayerStateChangeEvent=function(t){return"PLAYER_STATE_CHANGED"===t.type},e.prototype.isDeviceStateChangeEvent=function(t){return"DEVICE_STATE_CHANGED"===t.type},e.prototype.updatePlayerState=function(){var t=this.fetchState();t.then(this.transformState).then(this.stateCallback),t.then(function(t){this.deviceStateCallback(t.device)}.bind(this))},e.prototype.updateDeviceState=function(){this.fetchState().then(function(t){this.deviceStateCallback(t.device),t.device.is_active||this.inactiveCallback()}.bind(this))},e.prototype.fetchState=function(){return this.stateRequest&&this.stateRequest.abort(),this.stateRequest=this.api.state(this.market),this.stateRequest},e.prototype.transformState=function(t){var e={};return e.status=t.is_playing,t.item?(e.track={track_resource:{uri:t.item.uri},length:t.item.duration_ms/1e3},t.item.is_playable?e.playing_position=t.progress_ms/1e3:e.status=!1):t.is_playing?e.track={track_type:"ad"}:e.track={track_type:"unavailable"},e},e}),define("player/providers/spotify/spotify-events",[],function(){"use strict";return{CONNECTED:"connected",STATE:"state",DEVICE_CHANGED:"device",ERROR:"error"}}),define("player/providers/spotify/spotify-errors",[],function(){"use strict";return{UNAUTHORIZED:"unauthorized",NOT_PREMIUM:"not_premium",INACTIVE_DEVICE:"inactive_device",NO_DEVICE_SELECTED:"no_client_selected"}}),define("player/providers/spotify/spotify-device-modal",["require","jquery","mustache"],function(t){function e(t,e){this.modal=t,this.spotifyApi=e}var r=t("jquery"),s=t("mustache");return e.prototype.selectDevice=function(n){return new Promise(function(t,e){this.modal.open(n,{onopen:this.updateDevices.bind(this),onclose:e,actions:{"select-device":this.deviceSelected.bind(this,t),"refresh-devices":this.updateDevices.bind(this)}})}.bind(this))},e.prototype.deviceSelected=function(t,e){e=r(e.target).find(".js-device-selector");t({id:e.val(),name:e.find("option:selected").text()}),this.modal.close()},e.prototype.updateDevices=function(){var t=r("[js-modal-body]"),e=this.renderDevices.bind(this,t);this.spotifyApi.fetchDevices().then(e).catch(function(){e()})},e.prototype.renderDevices=function(t,e){var n=!(!e||!e.length),i=(t.find(".device-selector-loading").addClass("hidden"),t.find(".device-selector-none-found").toggleClass("hidden",n),t.find(".js-device-selector")),o=i.data("incompatibleTemplate");i.find("option").remove(),e&&e.forEach(function(t){var e=t.is_restricted?s.render(o,t):t.name,e=r("<option>",{value:t.id,text:e});t.is_active&&e.attr("selected","selected"),t.is_restricted&&e.attr("disabled","disabled"),i.append(e)}),t.find(".device-selector-options").toggleClass("hidden",!n)},e}),define("player/providers/spotify/spotify-client",["require","player/providers/spotify/spotify-auth","player/providers/spotify/spotify-api","player/providers/spotify/spotify-state","player/providers/spotify/spotify-events","player/providers/spotify/spotify-errors","player/providers/spotify/spotify-device-modal"],function(t){"use strict";var i=t("player/providers/spotify/spotify-auth"),o=t("player/providers/spotify/spotify-api"),e=t("player/providers/spotify/spotify-state"),r=t("player/providers/spotify/spotify-events"),s=t("player/providers/spotify/spotify-errors"),a=t("player/providers/spotify/spotify-device-modal");function n(t,e,n){this.auth=new i(t,e,this.unauthorizedError.bind(this)),this.api=new o(this.auth,this.notPremiumError.bind(this)),this.modal=t,this.modalPaths=e,this.deviceModal=new a(this.modal,this.api),this.events=n,this.requestId=0,this.deviceId=null}return n.prototype.connect=function(){this.auth.connect().then(function(t){t=this.publish.bind(this,r.CONNECTED,t);this.selectInitialDevice().then(this.updateMarket.bind(this)).then(this.subscribe.bind(this)).then(t)}.bind(this))},n.prototype.play=function(t,e){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.play(t,this.deviceId),e&&(t=this.seek.bind(this,e),this.playpauseRequest.then(t)),this.successCheck&&clearTimeout(this.successCheck),this.successCheck=setTimeout(this.updateState.bind(this),2e3)},n.prototype.pause=function(){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.pause()},n.prototype.resume=function(){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.resume(this.deviceId)},n.prototype.seek=function(t){this.api.seek(1e3*t,this.deviceId)},n.prototype.resolveId=function(t){return this.api.resolveId(t,this.market)},n.prototype.updateState=function(){this.state.updatePlayerState()},n.prototype.selectDevice=function(){return this.deviceModal.selectDevice(this.modalPaths.initialDeviceDetection).then(this.handleDeviceUpdate.bind(this))},n.prototype.updateMarket=function(){return this.api.user().then(function(t){return t.hasOwnProperty("country")?(this.market=t.country,Promise.resolve()):Promise.reject()}.bind(this))},n.prototype.subscribe=function(){var t={stateCallback:this.onStateChange.bind(this),inactiveCallback:this.inactiveError.bind(this),deviceStateCallback:this.handleDeviceUpdate.bind(this)};return this.state=new e(this.api,this.auth,this.market,t),this.state.subscribe()},n.prototype.notPremiumError=function(e){var t=this.publish.bind(this,r.ERROR,s.NOT_PREMIUM),n=this.auth.getPremium();n.catch(t),n.then(function(t){t=this.publish.bind(this,r.CONNECTED,t);this.state.unsubscribe(this.state),this.updateMarket().then(this.subscribe.bind(this)).then(t).then(e)}.bind(this))},n.prototype.selectInitialDevice=function(){var t=this.selectDevice();return t.catch(this.noDeviceSelected.bind(this)),t},n.prototype.unauthorizedError=function(){this.publish(r.ERROR,s.UNAUTHORIZED)},n.prototype.inactiveError=function(){this.publish(r.ERROR,s.INACTIVE_DEVICE),this.state.unsubscribe();var t=this.deviceModal.selectDevice(this.modalPaths.inactive).then(this.handleDeviceUpdate.bind(this));t.then(this.state.subscribe.bind(this.state)).then(this.publish.bind(this,r.CONNECTED)),t.catch(this.noDeviceSelected.bind(this))},n.prototype.handleDeviceUpdate=function(t){this.deviceId!==t.id&&(this.deviceId=t.id,this.publish(r.DEVICE_CHANGED,t.name))},n.prototype.onStateChange=function(t){this.publish(r.STATE,t)},n.prototype.noDeviceSelected=function(){this.publish(r.ERROR,s.NO_DEVICE_SELECTED)},n.prototype.publish=function(t,e){this.events.hasOwnProperty(t)&&this.events[t](e)},n.prototype.showInactiveModal=function(){this.modal.open(this.modalPaths.inactive)},n}),define("player/providers/spotify/spotify-proxy",["require","machina","player/providers/spotify/spotify-client","player/providers/spotify/spotify-events","player/providers/spotify/spotify-errors","debug"],function(t){"use strict";function i(t){this._state=t}function e(t,e){this.app=t;var n={};n[r.CONNECTED]=function(t){this.app.eventMediator.publish("player.spotify.connected",t),this.stateManager.handle("initialized")}.bind(this),n[r.STATE]=function(t){this.playerStateHandler(new i(t))}.bind(this),n[r.DEVICE_CHANGED]=this.publish.bind(this,"player.deviceChanged"),n[r.ERROR]=this.errorHandler.bind(this),this.client=new o(t.modal,e,n),this.stateManager=new(l.extend({publish:this.publish.bind(this),stopPublishingPlayerPosition:this.stopPublishingPlayerPosition.bind(this),startPublishingPlayerPosition:this.startPublishingPlayerPosition.bind(this),client:this.client,resumePausedAd:this.resumePausedAd.bind(this)})),this.publish("player.provider.proxy.ready",this)}var n=t("machina"),o=t("player/providers/spotify/spotify-client"),r=t("player/providers/spotify/spotify-events"),s=t("player/providers/spotify/spotify-errors"),a=t("debug"),t={_onEnter:function(){this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.paused")},play:"Tuning",resume:"Resume",stop:"Stopped",playing:"Playing",unexpectedTrack:"PausedUnexpected",inactiveDevice:"PausedInactiveDevice",deviceManuallySwitched:"PausedWithNewDevice",stopped:"Stopped"},l=n.Fsm.extend({eventListeners:{transition:[function(t){a.info("Spotify proxy transition:",t.fromState,"->",t.toState)}]},initialState:"Uninitialized",states:{Uninitialized:{play:"Initialize",initialized:"Ready"},Initialize:{_onEnter:function(){this.track=this.currentActionArgs[1],this.publish("player.spotify.initialising"),this.client.connect()},play:function(){this.deferUntilTransition("Uninitialized"),this.transition("Uninitialized")},initialized:"Tuning",stopped:"Aborted"},Ready:{play:"Tuning"},Tuning:{_onEnter:function(){this.duration=!1,this.track=this.currentActionArgs[1]||this.track,this.requestedTrackId=this.track.spotifyId,this.resumePausedAd(),this.secondPlayAttempt=!1,this.client.play(this.track.spotifyId)},stop:function(){this.client.pause(),this.transition("Stopped")},pause:function(){this.client.pause()},playing:"Playing",stopped:"Stopped",unexpectedTrack:function(){var e=this.currentActionArgs[1];this.client.resolveId(this.requestedTrackId).then(function(t){e.trackId()===t&&(this.requestedTrackId=t,this.handle("playing",e.duration()),this.handle("positionChanged",e.position()))}.bind(this))},unavailable:function(){this.transition("Ready"),this.publish("player.provider.proxy.unavailable")}},Aborted:{_onEnter:function(){this.publish("player.spotify.abort"),this.transition("Uninitialized")}},Stopping:{_onEnter:function(){this.client.pause()},paused:"Stopped",playing:function(){this.client.updateState()}},Playing:{_onEnter:function(){this.duration=this.currentActionArgs[1],this.publish("player.provider.proxy.playing")},play:"Tuning",pause:"Pause",stop:"Stopping",paused:"Paused",unexpectedTrack:"PausedUnexpected",inactiveDevice:"PausedInactiveDevice",deviceManuallySwitched:"ResumeLastPosition",stopped:"Stopped",adPlaying:"AdPlaying",finished:"Finished",positionChanged:function(){this.startPublishingPlayerPosition()}},Resume:{_onEnter:function(){this.client.resume()},play:"Tuning",pause:"Pause",stop:"Stopped",paused:"Paused",playing:"Playing",stopped:"Stopped",positionChanged:function(){this.startPublishingPlayerPosition()}},ResumeLastPosition:{_onEnter:function(){this.client.play(this.requestedTrackId,this.lastPosition)},play:"Tuning",pause:"Pause",stop:"Stopped",playing:"Playing",stopped:"Stopped"},Pause:{_onEnter:function(){this.client.pause()},play:"Tuning",resume:"Resume",stop:"Stopped",paused:"Paused",stopped:"Stopped",playing:"Playing",positionChanged:function(){this.startPublishingPlayerPosition()}},Paused:t,PausedInactiveDevice:Object.assign({},t,{resume:"ResumeLastPosition",initialized:"ResumeLastPosition"}),PausedUnexpected:Object.assign({},t,{resume:"ResumeLastPosition"}),PausedWithNewDevice:Object.assign({},t,{resume:"ResumeLastPosition"}),AdPlaying:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.publish("player.ad.playing")},finished:"Finished",playing:"Playing"},Stopped:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.transition("Ready"),this.publish("player.provider.proxy.stopped")}},Finished:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.transition("Ready"),this.publish("player.provider.proxy.finished")}}}});i.prototype={isUnavailable:function(){return"unavailable"===this._state.track.track_type||void 0===this.position()&&!1===this._state.status},isAd:function(){return"ad"===this._state.track.track_type},isPlaying:function(){return!this.isPaused()&&!this.isFinished()},isPaused:function(){return!1===this._state.status},isFinished:function(){var t=this.position()>this.duration()-1;return!1===this._state.status&&0===this.position()||t},trackId:function(){return this._state.track.track_resource.uri.split("spotify:track:")[1]},position:function(){return this._state.playing_position},duration:function(){return this._state.track.length}};return e.prototype={play:function(t){this.stateManager.handle("play",t)},pause:function(){this.stateManager.handle("pause")},resume:function(){this.stateManager.handle("resume")},stop:function(){this.stateManager.handle("stop")},switchDevice:function(){this.client.selectDevice().then(function(){this.stateManager.handle("deviceManuallySwitched")}.bind(this))},getDuration:function(){return this.stateManager.duration},playerStateHandler:function(t){(this.lastState=t).isUnavailable()?this.stateManager.handle("unavailable"):t.isAd()?this.stateManager.handle("adPlaying"):this.isRequestedTrack(t)&&t.isUnavailable()?this.stateManager.handle("unavailable"):this.isRequestedTrack(t)||t.isUnavailable()?t.isPlaying()?(this.stateManager.handle("playing",t.duration()),this.stateManager.handle("positionChanged")):t.isFinished()?this.stateManager.handle("finished"):(this.stateManager.handle("positionChanged"),this.stateManager.handle("paused")):this.stateManager.handle("unexpectedTrack",t)},errorHandler:function(t){t===s.UNAUTHORIZED&&this.publish("player.spotify.error.auth-error"),t===s.NOT_PREMIUM&&this.stateManager.handle("stopped"),t===s.INACTIVE_DEVICE&&this.stateManager.handle("inactiveDevice"),t===s.NO_DEVICE_SELECTED&&this.stateManager.handle("stopped")},resumePausedAd:function(){this.lastState&&this.lastState.isAd()&&this.lastState.isPaused()&&this.client.resume()},isRequestedTrack:function(t){return void 0!==this.stateManager.requestedTrackId&&t.trackId()===this.stateManager.requestedTrackId},publish:function(t,e){var n={provider:"spotify"};void 0!==e&&(n.message=e),this.app.eventMediator.publish(t,n)},startPublishingPlayerPosition:function(){this.stopPublishingPlayerPosition(),this.publishPlayerPosition(this.lastState.position())},publishPlayerPosition:function(e){this.stateManager.lastPosition=e,this.publish("player.provider.proxy.positionChanged",e),this.lastPublishedPositionTimestamp=Date.now(),this._playerPositionTimeout=setTimeout(function(){var t=(Date.now()-this.lastPublishedPositionTimestamp)/1e3;this.publishPlayerPosition(e+t)}.bind(this),1e3)},stopPublishingPlayerPosition:function(){clearTimeout(this._playerPositionTimeout)}},e}),define("player/providers/spotify/spotify-provider",["require","player/providers/spotify/spotify-proxy"],function(t){"use strict";function e(t,e){this.app=e,this.$el=t}var n=t("player/providers/spotify/spotify-proxy");return e.prototype={start:function(){var t={auth:this.$el.data("spotify-auth-modal"),premium:this.$el.data("spotify-premium-modal"),inactive:this.$el.data("spotify-inactive-modal"),initialDeviceDetection:this.$el.data("spotify-initial-device-modal")};new n(this.app,t)}},e}),define("ads/ad-container",["require","jquery"],function(t){"use strict";var e=t("jquery");return{open:function(t){e(t.element).parents("[data-ad-container]").addClass(this.openClass(t))},close:function(t){e(t.element).parents("[data-ad-container]").removeClass(this.openClass(t))},openClass:function(t){return"open-ad-container-"+(t.is_mobile?"mobile":"desktop")}}}),define("ads/bidbarrel-helper",["require","ads/ad-container"],function(t){"use strict";function s(t,e,n,i){return o.dfpPath={pagePath:t.zone.substring(1),isMobile:n},o.pageTargeting={env:t.env,vguid:t.vguid,ptype:t.pageTargeting.ptype,geo:i},o}function e(t){this.app=t,this.targetingKeys=[],this.idCount=0}var n=t("ads/ad-container"),o={dfpPath:{},targeting:{auto:!0,cookie:{surround:!0,consolidate:!0}},geo:{},pageTargeting:{},optanon:{renderScript:!1}};return e.prototype.init=function(o){const r=this;return new Promise(function(t,e){r.app.countryCode();var n=r.app.geo(),i=r.app.isMobile();BidBarrel.setLazyLoad(),BidBarrel.initialize(s(o,0,i,n)),t(),BidBarrel.on("rendered",function(t){r.app.eventMediator.publish("AdRenderSucceeded")})})},e.prototype.createEvents=function(n){BidBarrel.on(n+".visibilityChanged",function(t,e){e=0<e.inViewPercentage?"visible":"hidden";this.app.eventMediator.publish("ad."+n+"."+e)}.bind(this))},e.prototype.setTargeting=function(t){BidBarrel.setTargeting(t)},e.prototype.incrementPageView=function(){},e.prototype.clearSlots=function(){BidBarrel.destroySlots(Object.keys(BidBarrel.slots).filter(t=>!!BidBarrel.slots[t]))},e.prototype.clearTargeting=function(){BidBarrel.setTargeting({})},e.prototype.createSlot=function(t){},e.prototype.createSlots=function(t,e){BidBarrel.setConfig(s(e,this.app.countryCode(),this.app.isMobile(),this.app.geo())),t.forEach(function(t){this.createEvents(t.id),n.open(t)}.bind(this)),BidBarrel.auction(t.map(function(t){return t.id}))},e.prototype.refresh=function(){},e}),define("ads/adblock-messaging",["require","jquery","lodash","ads/ad-container"],function(t){"use strict";function e(){this.messages=n(".js-adblock-message-template").toArray().map(function(t){return n(t).html()}),this.indexMobile=this.randomIndex(this.messages),this.indexDesktop=this.randomIndex(this.messages)}var n=t("jquery"),i=t("lodash"),o=t("ads/ad-container");return e.prototype.showInPlacements=function(t){var t=i.filter(t,"adblock_message"),e=i.filter(t,"is_mobile"),t=i.reject(t,"is_mobile"),e=this.randomItem(e),t=this.randomItem(t);e&&this.showInPlacement(e),t&&this.showInPlacement(t)},e.prototype.showInPlacement=function(t){var e=this.nextMessage(t.is_mobile);n(t.element).html(e),o.open(t)},e.prototype.nextMessage=function(t){var e;return t?(e=this.indexMobile,this.indexMobile=(e+1)%this.messages.length):(e=this.indexDesktop,this.indexDesktop=(e+1)%this.messages.length),this.messages[e]},e.prototype.randomItem=function(t){return t[this.randomIndex(t)]},e.prototype.randomIndex=function(t){return Math.floor(Math.random()*t.length)},e}),define("ads/page-ads",["require","jquery","lodash","ads/bidbarrel-helper","ads/adblock-messaging"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var s=t("jquery"),n=t("lodash"),i=t("ads/bidbarrel-helper"),o=t("ads/adblock-messaging");return e.prototype.start=function(){this.app.adsEnabled()?this.init():this.initSubscription=this.app.eventMediator.subscribe("page.transitionComplete",this.pageUpdated.bind(this))},e.prototype.pageUpdated=function(){this.app.adsEnabled()&&(this.app.eventMediator.unsubscribe(this.initSubscription),this.init())},e.prototype.init=function(){this.app.eventMediator.publish("ads.requested"),this.adsHelper=new i(this.app);var t=this.getAdContext(),t=this.adsHelper.init(t);t.then(this.showAds.bind(this)),t.catch(this.showAdblockMessages.bind(this))},e.prototype.showAds=function(){this.app.eventMediator.subscribe("partialRefresh.beforeReplace",this.beforeReplace.bind(this),"none"),this.app.eventMediator.subscribe("page.transitionComplete",this.transitionCompleteHandler.bind(this),"none"),this.setTargeting(),this.createPlacements(),this.debouncedAfterReplace=n.debounce(this.afterUpdate.bind(this),2500,{leading:!1,trailing:!0})},e.prototype.showAdblockMessages=function(){var e=new o,n=function(){var t=this.getPlacementsConfig();e.showInPlacements(t)}.bind(this);this.app.eventMediator.subscribe("page.transitionComplete",function(t){t.fullPage&&n()}.bind(this),"none"),n()},e.prototype.getTargetingParams=function(){return this.app.adTargeting()},e.prototype.getAdContext=function(){var t=s("#data-ads").data(),e=t.adsZone,n=t.adsEnv,i=this.app.adNetwork(),o=this.app.lang(),r="undefined"!=typeof utag_data?utag_data.pageViewGuid:void 0,t=t.adsTargeting;return t.lang=o,{zone:e,env:n,vguid:r,pageTargeting:t,adsNetwork:i}},e.prototype.getPlacementsConfig=function(){var t=s("[data-ads-placement]",this.$el).toArray();const n=this.app.isMobile();return t.map(function(t){var e=s(t).data("ads-placement");return e.is_mobile=e.is_mobile_and_desktop?n:e.is_mobile,e.element=t,e})},e.prototype.setTargeting=function(){var t=this.getTargetingParams();this.adsHelper.setTargeting(t),this.adsHelper.incrementPageView()},e.prototype.createPlacements=function(){var t=this.getPlacementsConfig(),e=this.getAdContext();const n=this.app.isMobile();t=t.filter(function(t){var e=!!t.is_mobile;return t.is_mobile=t.is_mobile_and_desktop?n:t.is_mobile,!!t.is_mobile_and_desktop||e===n});this.adsHelper.createSlots(t,e)},e.prototype.beforeReplace=function(){this.adsHelper.clearTargeting(),this.adsHelper.clearSlots()},e.prototype.afterReplace=function(){this.setTargeting(),this.createPlacements()},e.prototype.afterUpdate=function(){this.adsHelper.incrementPageView(),this.adsHelper.refresh()},e.prototype.transitionCompleteHandler=function(t){t.fullPage?this.afterReplace():this.debouncedAfterReplace()},e}),define("ads/searchlinks",["require","core/module-requiring-consent","jquery","core/media-size-v2"],function(t){"use strict";function e(t,e){n.call(this,e.consentManager,e.consentManager.TARGETING),this.app=e}var n=t("core/module-requiring-consent"),i=t("jquery"),o=t("core/media-size-v2"),r="428642350";return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.start=function(){window._mNHandle=window._mNHandle||{},window._mNHandle.queue=window._mNHandle.queue||[],window.medianet_versionId="3121199",t(["searchlinks-library"]),this.app.eventMediator.subscribe("domReady",this.addSearchLinks.bind(this)),this.refreshSubsription=this.app.eventMediator.subscribe("partialRefresh.afterReplace",this.addSearchLinks.bind(this))},e.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.refreshSubsription)},e.prototype.addSearchLinks=function(){this.addId(),this.loadSearchLinks()},e.prototype.addId=function(){(o.isMobile()?i("[data-searchlinks-mobile]"):i("[data-searchlinks-desktop]")).attr("id",r)},e.prototype.loadSearchLinks=function(){window._mNHandle.queue.push(function(){window._mNDetails.loadTag(r,"370x250",r)})},e}),define("ads/tonefuze",["require","core/media-size-v2","core/module-requiring-consent","ads/ad-container","uuid"],function(t){"use strict";function e(t,e){i.call(this,e.consentManager,e.consentManager.TARGETING);var n=t.attr("id")+"-"+r.v4();t.attr("id",n),t.find("button").attr("aria-controls",n),this.options={artist:t.data("tonefuze-artist"),song:t.data("tonefuze-track"),adunit_id:t.data("tonefuze-id"),flex:t.data("tonefuze-flex"),div_id:n},this.$el=t,this.eventMediator=e.eventMediator}var n=t("core/media-size-v2"),i=t("core/module-requiring-consent"),o=t("ads/ad-container"),r=t("uuid");return((e.prototype=Object.create(i.prototype)).constructor=e).prototype.start=function(){this.isUnitActive()&&(o.open({element:this.$el,is_mobile:this.$el.hasClass("tonefuze--mobile")}),t(["https://srv.clickfuse.com/showads/showad.js"],this.ready.bind(this)))},e.prototype.isUnitActive=function(){return!(!n.isMobile()||!this.$el.hasClass("tonefuze--mobile"))||!(n.isMobile()||!this.$el.hasClass("tonefuze--desktop"))},e.prototype.ready=function(){cf.showAsyncAd(this.options),this.$el.data("require").includes("ads/ad-placement-helper")&&this.eventMediator.publish("ad.tonefuze.show")},e}),define("components/cbsi-video",["require","core/media-size-v2","core/event-mediator","core/module-requiring-consent"],function(t){"use strict";function e(t,e){i.call(this,e.consentManager,e.consentManager.TARGETING),this.$el=t,this.$playerEl=t.find(".js-player"),this.app=e,this.localEventMediator=new n}var a=t("core/media-size-v2"),n=t("core/event-mediator"),i=t("core/module-requiring-consent");return((e.prototype=Object.create(i.prototype)).constructor=e).prototype.EVENTS={AD_START:"ad-start",AD_END:"ad-end",CONTENT_START:"video-start",CONTENT_END:"video-end",END:"stop"},e.prototype.start=function(){var t=this.$el.data("cbsi-video-pid"),e=this.$el.data("cbsi-video-thumbnail"),n=this.$el.is("[data-cbsi-video-autoplay]"),i=this.$el.is("[data-cbsi-video-start-muted]"),o=this.$el.is("[data-cbsi-video-disable-mobile]"),r=this.$el.is("[data-cbsi-video-disable-ads]"),s=this.$el.data("cbsi-video-event-prefix");this.eventPrefix=void 0!==s?s:"cbsi-video",o&&a.isMobile()||this.app.cbsiplayer&&this.app.cbsiplayer.isSupported()&&(this.app.cbsiplayer.playVideo(this.$playerEl,t,{autoplay:n,mute:i,previewImage:e,disableAds:r,events:{onAdStart:this.handleEvent.bind(this,this.EVENTS.AD_START),onAdEnd:this.handleEvent.bind(this,this.EVENTS.AD_END),onContentStart:this.handleEvent.bind(this,this.EVENTS.CONTENT_START),onContentEnd:this.handleEvent.bind(this,this.EVENTS.CONTENT_END),onResourceEnd:this.handleEvent.bind(this,this.EVENTS.END)}}),this.tuningSubscription=this.app.eventMediator.subscribe("player.track.tuning",this.stop.bind(this)))},e.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.tuningSubscription),this.app.cbsiplayer.destroyPlayer(this.$playerEl),this.$el.remove()},e.prototype.eventConfig=function(){return{onAdStart:this.handleEvent.bind(this,this.EVENTS.AD_START),onAdEnd:this.handleEvent.bind(this,this.EVENTS.AD_END),onContentStart:this.handleEvent.bind(this,this.EVENTS.CONTENT_START),onContentEnd:this.handleEvent.bind(this,this.EVENTS.CONTENT_END),onResourceEnd:this.handleEvent.bind(this,this.EVENTS.END)}},e.prototype.handleEvent=function(t){this.publishLocal(t),this.publishGlobal(t)},e.prototype.publishLocal=function(t){this.localEventMediator.publish(t)},e.prototype.publishGlobal=function(t){t=[this.eventPrefix,t].join("."),this.app.eventMediator.publish(t)},e}),define("components/cbsi-autoplay-video",["require","components/cbsi-video"],function(t){"use strict";function e(t,e){n.call(this,t,e)}var n=t("components/cbsi-video"),i=(e.prototype=Object.create(n.prototype),n.prototype);return(e.prototype.constructor=e).prototype.start=function(){this.$close=this.$el.find(".js-close-player"),this.$close.on("click.cbsi-autoplay-video",this.stop.bind(this)),this.localEventMediator.subscribe(this.EVENTS.AD_START,this.adStart.bind(this)),this.localEventMediator.subscribe(this.EVENTS.CONTENT_START,this.contentStart.bind(this)),i.start.apply(this,arguments)},e.prototype.stop=function(){this.$close.off(".cbsi-autoplay-video"),i.stop.apply(this,arguments)},e.prototype.adStart=function(){this.show(),this.showCloseButton(5e3)},e.prototype.contentStart=function(){this.show(),this.showCloseButton()},e.prototype.show=function(){this.$el.removeClass("video-player--hidden")},e.prototype.showCloseButton=function(t){t?setTimeout(this.showCloseButton.bind(this),t):this.$el.find(".js-close-player").removeClass("video-player-close--hidden")},e}),!function(t,e){"function"==typeof define&&define.amd?define("store",[],e):"object"==typeof exports?module.exports=e():t.store=e()}(this,function(){var i,n,t,r={},e="undefined"!=typeof window?window:global,o=e.document,s="localStorage";if(r.disabled=!1,r.version="1.3.20",r.set=function(t,e){},r.get=function(t,e){},r.has=function(t){return void 0!==r.get(t)},r.remove=function(t){},r.clear=function(){},r.transact=function(t,e,n){null==n&&(n=e,e=null);e=r.get(t,e=null==e?{}:e);n(e),r.set(t,e)},r.getAll=function(){},r.forEach=function(){},r.serialize=function(t){return JSON.stringify(t)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return s in e&&e[s]}catch(t){}}())i=e[s],r.set=function(t,e){return void 0===e?r.remove(t):(i.setItem(t,r.serialize(e)),e)},r.get=function(t,e){t=r.deserialize(i.getItem(t));return void 0===t?e:t},r.remove=function(t){i.removeItem(t)},r.clear=function(){i.clear()},r.getAll=function(){var n={};return r.forEach(function(t,e){n[t]=e}),n},r.forEach=function(t){for(var e=0;e<i.length;e++){var n=i.key(e);t(n,r.get(n))}};else if(o&&o.documentElement.addBehavior){try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),n=t.w.frames[0].document,i=n.createElement("div")}catch(t){i=o.createElement("div"),n=o.body}function a(e){return function(){var t=Array.prototype.slice.call(arguments,0),t=(t.unshift(i),n.appendChild(i),i.addBehavior("#default#userData"),i.load(s),e.apply(r,t));return n.removeChild(i),t}}function l(t){return t.replace(/^d/,"___$&").replace(u,"___")}var u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");r.set=a(function(t,e,n){return e=l(e),void 0===n?r.remove(e):(t.setAttribute(e,r.serialize(n)),t.save(s),n)}),r.get=a(function(t,e,n){e=l(e);t=r.deserialize(t.getAttribute(e));return void 0===t?n:t}),r.remove=a(function(t,e){e=l(e),t.removeAttribute(e),t.save(s)}),r.clear=a(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(s);for(var n=e.length-1;0<=n;n--)t.removeAttribute(e[n].name);t.save(s)}),r.getAll=function(t){var n={};return r.forEach(function(t,e){n[t]=e}),n},r.forEach=a(function(t,e){for(var n,i=t.XMLDocument.documentElement.attributes,o=0;n=i[o];++o)e(n.name,r.deserialize(t.getAttribute(n.name)))})}try{var c="__storejs__";r.set(c,c),r.get(c)!=c&&(r.disabled=!0),r.remove(c)}catch(t){r.disabled=!0}return r.enabled=!r.disabled,r}),define("url",[],function(){return function(t,e){return t=t.replace(/^\/\w{2}\//,"/"),t=e&&"en"!=e?"/"+e+t:t}}),define("components/visited-artists",["require","lodash","store"],function(t){"use strict";function e(t){this.store=i,this.artists=[],this.maxArtists=t||3}var n=t("lodash"),i=t("store"),o="lazyrecsbar:artists:1";return e.prototype.recordVisit=function(e){var t=this.toArray(),t=n(t).filter(function(t){return t!=e}).unshift(e).take(this.maxArtists).value();this.save(t)},e.prototype.save=function(t){this.store.enabled?this.store.set(o,t):this.artists=t},e.prototype.toArray=function(){return this.store.enabled?this.store.get(o,[]):this.artists},e}),define("components/lazy-recs-bar",["require","jquery","lodash","store","url","core/ajax","components/alert-dismissable","components/visited-artists"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.lastArtist=null,this.lastLang=e.lang(),this.pageTransitionSubscription=null,this.alertDismissable=new r(this.$el,this.app)}var i=t("jquery"),n=(t("lodash"),t("store"),t("url")),o=t("core/ajax"),r=t("components/alert-dismissable"),s=t("components/visited-artists");return e.prototype.start=function(){this.url=this.$el.data("url"),this.visitedArtists=new s,this.$el.on("click.lazyrecs",".js-lazy-recs-bar-show-more",this.expandRecommendationsPanel.bind(this)),this.$el.on("click.lazyrecs",".js-lazy-recs-bar-close",this.closeRecsBar.bind(this)),this.pageTransitionSubscription=this.app.eventMediator.subscribe("page.transitionComplete",this.updateRecommendationsForPage.bind(this)),this.updateRecommendationsForPage()},e.prototype.stop=function(){this.$el.off(".lazyrecs"),this.app.eventMediator.unsubscribe(this.pageTransitionSubscription)},e.prototype.expandRecommendationsPanel=function(t){t.preventDefault(),this.$el.addClass("lazy-recs-bar--extended"),i("body").addClass("has-lazy-recs-bar--extended")},e.prototype.updateRecommendationsForPage=function(){var t=function(){var t=i(document).find("[data-page-resource-type]"),e=t.attr("data-page-resource-type"),n=t.attr("data-page-resource-blacklist-level");if(function(t){return"artist"==t||"track"==t||"album"==t}(e)&&-1===["1","3"].indexOf(n))return t.attr("data-page-resource-artist-name")||t.attr("data-page-resource-name")}();t&&this.recordArtistVisit(t),this.isDisabled()?this.hideBar():this.isStale()?this.refreshRecommendations():this.hasContent?this.showBar():this.hideBar()},e.prototype.isDisabled=function(){return!this.app.adsEnabled()||i("body").hasClass("js-disable-lazy-recs-bar")},e.prototype.recordArtistVisit=function(t){this.visitedArtists.recordVisit(t)},e.prototype.isStale=function(){var t=this.visitedArtists.toArray();return t.length&&(t[0]!=this.lastArtist||this.lastLang!==this.app.lang())},e.prototype.refreshRecommendations=function(){var t=this.visitedArtists.toArray();t.length&&this.url&&(this.lastArtist=t[0],this.lastLang=this.app.lang(),o.get(n(this.url,this.lastLang),null,{artists:t},this.renderResponse.bind(this)))},e.prototype.renderResponse=function(t,e){!t&&e&&(this.hasContent=!0,this.$el.html(e),this.showBar())},e.prototype.closeRecsBar=function(t){this.alertDismissable.close(t,this.hideBar.bind(this)),this.stop()},e.prototype.showBar=function(){this.$el.slideDown(),this.$el.removeClass("lazy-recs-bar--hidden"),i("body").addClass("has-lazy-recs-bar"),this.publishedShown||(this.app.eventMediator.publish("lazy-recs-bar.shown"),this.publishedShown=!0)},e.prototype.hideBar=function(){this.$el.addClass("lazy-recs-bar--hidden"),i("body").removeClass("has-lazy-recs-bar")},e});